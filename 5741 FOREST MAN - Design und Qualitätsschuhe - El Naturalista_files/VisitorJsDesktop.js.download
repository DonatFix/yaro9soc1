function YouTubeViewer(n){var t=this;oct8ne.log("Inicializamos youtube");this.player="";this.videoPlayerIsReady=ko.observable(!1);this.isPlaying=ko.observable(!1);this.isMuted=ko.observable(!1);this.videoDuration=ko.observable(0);this.currentPosition=ko.observable(0);this.pauseTimer=0;this.positionTimer=0;this.lastClickTime=0;this.delayBetweenClicks=300;this.onAction=function(n,t){var i=$o.core.globalVariables.room;$o.core.globalVariables.userType=="V"?$o.core.isSignalRConnected()&&$o.hubsOut.sendVideoAction(n,t,i):window.top.videoActionFromDrashboard(n,t,i)};this.currentTimePositionFormatted=ko.pureComputed(function(){var n=t.currentPosition(),r=Math.floor(n/3600),i,u,f;return n-=r*3600,i=Math.floor(n/60),n-=i*60,u=Math.round(n),f=(r<10?"0":"")+r+":",f+=(i<10?"0":"")+i+":",f+((u<10?"0":"")+u)});this.autocheckingTimer=0;this.prevStatus=null;this.viewerContainerId=n;this.slider="";this.initializeSlider();this.loaded=!1;this.retries=0}function Log(){}var Core,Oct8ne,__awaiter,__generator,__extends,Interactions;!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ni(n){var t=!!n&&"length"in n&&n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function ti(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(re.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return vt.call(t,n)>-1!==r})}function gi(n,t){while((n=n[t])&&1!==n.nodeType);return n}function lf(n){var t={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function ct(){u.removeEventListener("DOMContentLoaded",ct);n.removeEventListener("load",ct);i.ready()}function ft(){this.expando=i.expando+ft.uid++}function nr(n,t,r){var u;if(void 0===r&&1===n.nodeType)if(u="data-"+t.replace(bu,"-$&").toLowerCase(),r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:ue.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=void 0;return r}function tr(n,t,r,u){var h,e=1,l=20,c=u?function(){return u.cur()}:function(){return i.css(n,t,"")},s=c(),o=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||"px"!==o&&+s)&&et.exec(i.css(n,t));if(f&&f[3]!==o){o=o||f[3];r=r||[];f=+s||1;do e=e||".5",f/=e,i.style(n,t,f+o);while(e!==(e=c()/s)&&1!==e&&--l)}return r&&(f=+f||+s||0,h=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=o,u.start=f,u.end=h)),h}function o(n,t){var r="undefined"!=typeof n.getElementsByTagName?n.getElementsByTagName(t||"*"):"undefined"!=typeof n.querySelectorAll?n.querySelectorAll(t||"*"):[];return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function ii(n,t){for(var i=0,u=n.length;u>i;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function ir(n,t,r,u,f){for(var e,s,p,a,w,v,h=t.createDocumentFragment(),y=[],l=0,b=n.length;b>l;l++)if(e=n[l],e||0===e)if("object"===i.type(e))i.merge(y,e.nodeType?[e]:e);else if(uu.test(e)){for(s=s||h.appendChild(t.createElement("div")),p=(gu.exec(e)||["",""])[1].toLowerCase(),a=c[p]||c._default,s.innerHTML=a[1]+i.htmlPrefilter(e)+a[2],v=a[0];v--;)s=s.lastChild;i.merge(y,s.childNodes);s=h.firstChild;s.textContent=""}else y.push(t.createTextNode(e));for(h.textContent="",l=0;e=y[l++];)if(u&&i.inArray(e,u)>-1)f&&f.push(e);else if(w=i.contains(e.ownerDocument,e),s=o(h.appendChild(e),"script"),w&&ii(s),r)for(v=0;e=s[v++];)nf.test(e.type||"")&&r.push(e);return h}function lt(){return!0}function d(){return!1}function rr(){try{return u.activeElement}catch(n){}}function ri(n,t,r,u,f,e){var o,s;if("object"==typeof t){"string"!=typeof r&&(u=u||r,r=void 0);for(s in t)ri(n,s,r,u,t[s],e);return n}if(null==u&&null==f?(f=r,u=r=void 0):null==f&&("string"==typeof r?(f=u,u=void 0):(f=u,u=r,r=void 0)),f===!1)f=d;else if(!f)return this;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function ur(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n:n}function af(n){return n.type=(null!==n.getAttribute("type"))+"/"+n.type,n}function vf(n){var t=ce.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function fr(n,t){var u,c,f,s,h,l,a,o;if(1===t.nodeType){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),o=s.events)){delete h.handle;h.events={};for(f in o)for(u=0,c=o[f].length;c>u;u++)i.event.add(t,f,o[f][u])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function yf(n,t){var i=t.nodeName.toLowerCase();"input"===i&&du.test(n.type)?t.checked=n.checked:("input"===i||"textarea"===i)&&(t.defaultValue=n.defaultValue)}function y(n,t,u,e){t=kr.apply([],t);var l,w,c,a,s,b,h=0,v=n.length,d=v-1,p=t[0],k=i.isFunction(p);if(k||v>1&&"string"==typeof p&&!f.checkClone&&he.test(p))return n.each(function(i){var r=n.eq(i);k&&(t[0]=p.call(this,i,r.html()));y(r,t,u,e)});if(v&&(l=ir(t,n[0].ownerDocument,!1,n,e),w=l.firstChild,1===l.childNodes.length&&(l=w),w||e)){for(c=i.map(o(l,"script"),af),a=c.length;v>h;h++)s=l,h!==d&&(s=i.clone(s,!0,!0),a&&i.merge(c,o(s,"script"))),u.call(n[h],s,h);if(a)for(b=c[c.length-1].ownerDocument,i.map(c,vf),h=0;a>h;h++)s=c[h],nf.test(s.type||"")&&!r.access(s,"globalEval")&&i.contains(b,s)&&(s.src?i._evalUrl&&i._evalUrl(s.src):i.globalEval(s.textContent.replace(le,"")))}return n}function er(n,t,r){for(var u,e=t?i.filter(t,n):n,f=0;null!=(u=e[f]);f++)r||1!==u.nodeType||i.cleanData(o(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&ii(o(u,"script")),u.parentNode.removeChild(u));return n}function or(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.detach(),u}function ui(n){var r=u,t=ci[n];return t||(t=or(n,r),"none"!==t&&t||(wt=(wt||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=wt[0].contentDocument,r.write(),r.close(),t=or(n,r),wt.detach()),ci[n]=t),t}function g(n,t,r){var o,s,h,u,e=n.style;return r=r||gt(n),r&&(u=r.getPropertyValue(t)||r[t],""!==u||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),!f.pixelMarginRight()&&yi.test(u)&&rf.test(t)&&(o=e.width,s=e.minWidth,h=e.maxWidth,e.minWidth=e.maxWidth=e.width=u,u=r.width,e.width=o,e.minWidth=s,e.maxWidth=h)),void 0!==u?u+"":u}function fi(n,t){return{get:function(){return n()?void delete this.get:(this.get=t).apply(this,arguments)}}}function sr(n){if(n in ef)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=ff.length;t--;)if(n=ff[t]+i,n in ef)return n}function hr(n,t,i){var r=et.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function cr(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+k[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+k[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+k[e]+"Width",!0,f))):(o+=i.css(n,"padding"+k[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+k[e]+"Width",!0,f)));return o}function lr(t,r,e){var h=!0,o="width"===r?t.offsetWidth:t.offsetHeight,s=gt(t),c="border-box"===i.css(t,"boxSizing",!1,s);if(u.msFullscreenElement&&n.top!==n&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[r])),0>=o||null==o){if(o=g(t,r,s),(0>o||null==o)&&(o=t.style[r]),yi.test(o))return o;h=c&&(f.boxSizingReliable()||o===t.style[r]);o=parseFloat(o)||0}return o+cr(t,r,e||(c?"border":"content"),h,s)+"px"}function ar(n,t){for(var e,u,s,o=[],f=0,h=n.length;h>f;f++)u=n[f],u.style&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||"none"!==e||(u.style.display=""),""===u.style.display&&ot(u)&&(o[f]=r.access(u,"olddisplay",ui(u.nodeName)))):(s=ot(u),"none"===e&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;h>f;f++)u=n[f],u.style&&(t&&"none"!==u.style.display&&""!==u.style.display||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function vr(){return n.setTimeout(function(){tt=void 0}),tt=i.now()}function at(n,t){var r,u=0,i={height:n};for(t=t?1:0;4>u;u+=2-t)r=k[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function yr(n,t,i){for(var u,f=(l.tweeners[t]||[]).concat(l.tweeners["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function pf(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&ot(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),null==o.unqueued&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b="none"===h?r.get(n,"olddisplay")||ui(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],fu.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?ui(n.nodeName):h)&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=yr(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function wf(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function l(n,t,r){var e,o,s=0,a=l.prefilters.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=tt||vr(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;e>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:tt||vr(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;r>i;i++)u.tweens[i].run(1);return t?(f.notifyWith(n,[u,1,0]),f.resolveWith(n,[u,t])):f.rejectWith(n,[u,t]),this}}),h=u.props;for(wf(h,u.opts.specialEasing);a>s;s++)if(e=l.prefilters[s].call(u,n,h,u.opts))return i.isFunction(e.stop)&&(i._queueHooks(u.elem,u.opts.queue).stop=i.proxy(e.stop,e)),e;return i.map(h,yr,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function p(n){return n.getAttribute&&n.getAttribute("class")||""}function pr(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function wr(n,t,r,u){function f(s){var h;return e[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||e[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),f(s),!1)}),h}var e={},o=n===ki;return f(t.dataTypes[0])||!e["*"]&&f("*")}function ei(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function bf(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return f!==r[0]&&r.unshift(f),i[f]}function kf(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function oi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||de.test(n)?u(n,i):oi(n+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)oi(n+"["+f+"]",t[f],r,u)}function br(n){return i.isWindow(n)?n:9===n.nodeType&&n.defaultView}var w=[],u=n.document,v=w.slice,kr=w.concat,si=w.push,vt=w.indexOf,yt={},df=yt.toString,hi=yt.hasOwnProperty,f={},dr="2.2.0",i=function(n,t){return new i.fn.init(n,t)},gf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^-ms-/,te=/-([\da-z])/gi,ie=function(n,t){return t.toUpperCase()},b,gr,nu,tu,iu,ru,h,pt,a,nt,uu,wt,ci,tt,bt,fu,eu,ou,it,su,hu,kt,cu,li,lu,rt,ai,dt,vi,au,vu;i.fn=i.prototype={jquery:dr,constructor:i,selector:"",length:0,toArray:function(){return v.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:v.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:si,sort:w.sort,splice:w.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(e=arguments[u]))for(f in e)r=n[f],t=e[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(dr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray,isWindow:function(n){return null!=n&&n===n.window},isNumeric:function(n){var t=n&&n.toString();return!i.isArray(n)&&t-parseFloat(t)+1>=0},isPlainObject:function(n){return"object"!==i.type(n)||n.nodeType||i.isWindow(n)?!1:n.constructor&&!hi.call(n.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?yt[df.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(1===n.indexOf("use strict")?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(ne,"ms-").replace(te,ie)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t){var r,i=0;if(ni(n)){for(r=n.length;r>i;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(gf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ni(Object(n))?i.merge(r,"string"==typeof n?[n]:n):si.call(r,n)),r},inArray:function(n,t,i){return null==t?-1:vt.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;u>i;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(ni(n))for(e=n.length;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return kr.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return"string"==typeof t&&(u=n[t],t=n,n=u),i.isFunction(n)?(f=v.call(arguments,2),r=function(){return n.apply(t||this,f.concat(v.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:Date.now,support:f});"function"==typeof Symbol&&(i.fn[Symbol.iterator]=w[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){yt["[object "+t+"]"]=t.toLowerCase()});b=function(n){function u(n,t,r,u){var h,w,a,s,nt,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],"string"!=typeof n||!n||1!==v&&9!==v&&11!==v)return r;if(!u&&((t?t.ownerDocument||t:l)!==i&&b(t),t=t||i,c)){if(11!==v&&(d=ar.exec(n)))if(h=d[1]){if(9===v){if(!(a=t.getElementById(h)))return r;if(a.id===h)return r.push(a),r}else if(p&&(a=p.getElementById(h))&&et(t,a)&&a.id===h)return r.push(a),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((h=d[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(h)),r}if(f.qsa&&!vt[n+" "]&&(!o||!o.test(n))){if(1!==v)p=t,g=n;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(vr,"\\$&"):t.setAttribute("id",s=e),y=ft(n),w=y.length,nt=wi.test(s)?"#"+s:"[id='"+s+"']";w--;)y[w]=nt+" "+st(y[w]);g=y.join(",");p=ei.test(n)&&kt(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(tt){}finally{s===e&&t.removeAttribute("id")}}}return ci(n.replace(yt,"$1"),t,r,u)}function wt(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function s(n){return n[e]=!0,n}function a(n){var t=i.createElement("div");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function bt(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function oi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||vi)-(~n.sourceIndex||vi);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function ki(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function di(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function d(n){return s(function(t){return t=+t,s(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function kt(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function si(){}function st(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function dt(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=tr++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c,l=[v,f];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(c=t[e]||(t[e]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),(s=h[r])&&s[0]===v&&s[1]===f)return l[2]=s[2];if(h[r]=l,l[2]=n(t,i,o))return!0}}}function gt(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function gi(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function ht(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ni(n,t,i,r,u,f){return r&&!r[e]&&(r=ni(r)),u&&!u[e]&&(u=ni(u,f)),s(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||gi(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:ht(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=ht(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?tt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=ht(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ti(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=dt(function(n){return n===o},c,!0),a=dt(function(n){return tt(o,n)>-1},c,!0),f=[function(n,t,i){var r=!h&&(i||t!==lt)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];s>i;i++)if(u=t.relative[n[i].type])f=[dt(gt(f),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[e]){for(r=++i;s>r;r++)if(t.relative[n[r].type])break;return ni(i>1&&gt(f),i>1&&st(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(yt,"$1"),u,r>i&&ti(n.slice(i,r)),s>r&&ti(n=n.slice(r)),s>r&&st(n))}f.push(u)}return gt(f)}function nr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,h,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=lt,rt=o||e&&t.find.TAG("*",a),ut=v+=null==it?1:Math.random()||.1,ft=rt.length;for(a&&(lt=s===i||s||a);p!==ft&&null!=(y=rt[p]);p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),h=!c);d=n[nt++];)if(d(y,s||i,h)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,h);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=rr.call(l));w=ht(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,lt=it),tt};return f?s(o):o}var rt,f,t,ct,hi,ft,ii,ci,lt,w,ut,b,i,h,c,o,g,at,et,e="sizzle"+1*new Date,l=n.document,v=0,tr=0,li=wt(),ai=wt(),vt=wt(),ri=function(n,t){return n===t&&(ut=!0),0},vi=-2147483648,ir={}.hasOwnProperty,nt=[],rr=nt.pop,ur=nt.push,k=nt.push,yi=nt.slice,tt=function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},ui="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pi="\\["+r+"*("+it+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+r+"*\\]",fi=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+pi+")*)|.*)\\)|)",fr=new RegExp(r+"+","g"),yt=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),er=new RegExp("^"+r+"*,"+r+"*"),or=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),sr=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),hr=new RegExp(fi),wi=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+pi),PSEUDO:new RegExp("^"+fi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+ui+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},cr=/^(?:input|select|textarea|button)$/i,lr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,ar=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ei=/[+~]/,vr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},bi=function(){b()};try{k.apply(nt=yi.call(l.childNodes),l.childNodes);nt[l.childNodes.length].nodeType}catch(yr){k={apply:nt.length?function(n,t){ur.apply(n,yi.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}f=u.support={};hi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};b=u.setDocument=function(n){var v,u,s=n?n.ownerDocument||n:l;return s!==i&&9===s.nodeType&&s.documentElement?(i=s,h=i.documentElement,c=!hi(i),(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",bi,!1):u.attachEvent&&u.attachEvent("onunload",bi)),f.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),f.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),f.getElementsByClassName=ot.test(i.getElementsByClassName),f.getById=a(function(n){return h.appendChild(n).id=e,!i.getElementsByName||!i.getElementsByName(e).length}),f.getById?(t.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&c){var i=t.getElementById(n);return i?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=f.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):f.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=f.getElementsByClassName&&function(n,t){if("undefined"!=typeof t.getElementsByClassName&&c)return t.getElementsByClassName(n)},g=[],o=[],(f.qsa=ot.test(i.querySelectorAll))&&(a(function(n){h.appendChild(n).innerHTML="<a id='"+e+"'><\/a><select id='"+e+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+ui+")");n.querySelectorAll("[id~="+e+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+e+"+*").length||o.push(".#.+[+~]")}),a(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(f.matchesSelector=ot.test(at=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&a(function(n){f.disconnectedMatch=at.call(n,"div");at.call(n,"[s!='']:x");g.push("!=",fi)}),o=o.length&&new RegExp(o.join("|")),g=g.length&&new RegExp(g.join("|")),v=ot.test(h.compareDocumentPosition),et=v||ot.test(h.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},ri=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&r||!f.sortDetached&&t.compareDocumentPosition(n)===r?n===i||n.ownerDocument===l&&et(l,n)?-1:t===i||t.ownerDocument===l&&et(l,t)?1:w?tt(w,n)-tt(w,t):0:4&r?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:w?tt(w,n)-tt(w,t):0;if(o===s)return oi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?oi(f[u],e[u]):f[u]===l?-1:e[u]===l?1:0},i):i};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(sr,"='$1']"),f.matchesSelector&&c&&!vt[t+" "]&&(!g||!g.test(t))&&(!o||!o.test(t)))try{var r=at.call(n,t);if(r||f.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(e){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var e=t.attrHandle[r.toLowerCase()],u=e&&ir.call(t.attrHandle,r.toLowerCase())?e(n,r,!c):void 0;return void 0!==u?u:f.attributes||!c?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!f.detectDuplicates,w=!f.sortStable&&n.slice(0),n.sort(ri),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};ct=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=ct(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=ct(r);return i};t=u.selectors={cacheLength:50,createPseudo:s,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return pt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&hr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=li[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&li(n,function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(fr," ")+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=f&&t.nodeName.toLowerCase(),g=!h&&!f,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(f?c.nodeName.toLowerCase()===nt:1===c.nodeType)return!1;b=k="only"===n&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(1===c.nodeType&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((f?c.nodeName.toLowerCase()===nt:1===c.nodeType)&&++l&&(g&&(y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var f,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[e]?r(i):r.length>1?(f=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?s(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=tt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,f)}):r}},pseudos:{not:s(function(n){var t=[],r=[],i=ii(n.replace(yt,"$1"));return i[e]?s(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:s(function(n){return function(t){return u(n,t).length>0}}),contains:s(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||ct(t)).indexOf(n)>-1}}),lang:s(function(n){return wi.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===h},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return lr.test(n.nodeName)},input:function(n){return cr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(n,t){return[t-1]}),eq:d(function(n,t,i){return[0>i?i+t:i]}),even:d(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:d(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:d(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:d(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=ki(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=di(rt);return si.prototype=t.filters=t.pseudos,t.setFilters=new si,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ai[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=er.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=or.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(yt," ")}),r=r.slice(e.length));for(o in t.filter)(f=pt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ai(n,h).slice(0)},ii=u.compile=function(n,t){var r,u=[],f=[],i=vt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ti(t[r]),i[e]?u.push(i):f.push(i);i=vt(n,nr(f,u));i.selector=n}return i},ci=u.select=function(n,i,r,u){var s,e,o,a,v,l="function"==typeof n&&n,h=!u&&ft(n=l.selector||n);if(r=r||[],1===h.length){if(e=h[0]=h[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&f.getById&&9===i.nodeType&&c&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;l&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=pt.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(u=v(o.matches[0].replace(y,p),ei.test(e[0].type)&&kt(i.parentNode)||i))){if(e.splice(s,1),n=u.length&&st(e),!n)return k.apply(r,u),r;break}}}return(l||ii(n,h))(u,i,!c,r,!i||ei.test(n)&&kt(i.parentNode)||i),r},f.sortStable=e.split("").sort(ri).join("")===e,f.detectDuplicates=!!ut,b(),f.sortDetached=a(function(n){return 1&n.compareDocumentPosition(i.createElement("div"))}),a(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||bt("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||bt("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),a(function(n){return null==n.getAttribute("disabled")})||bt(ui,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=b;i.expr=b.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=b.uniqueSort;i.text=b.getText;i.isXMLDoc=b.isXML;i.contains=b.contains;var ut=function(n,t,r){for(var u=[],f=void 0!==r;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(f&&i(n).is(r))break;u.push(n)}return u},yu=function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i},pu=i.expr.match.needsContext,wu=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,re=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;u>t;t++)if(i.contains(f[t],this))return!0}));for(t=0;u>t;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ti(this,n||[],!1))},not:function(n){return this.pushStack(ti(this,n||[],!0))},is:function(n){return!!ti(this,"string"==typeof n&&pu.test(n)?i(n):n||[],!1).length}});nu=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;tu=i.fn.init=function(n,t,r){var f,e;if(!n)return this;if(r=r||gr,"string"==typeof n){if(f="<"===n[0]&&">"===n[n.length-1]&&n.length>=3?[null,n,null]:nu.exec(n),!f||!f[1]&&t)return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n);if(f[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(f[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),wu.test(f[1])&&i.isPlainObject(t))for(f in t)i.isFunction(this[f])?this[f](t[f]):this.attr(f,t[f]);return this}return e=u.getElementById(f[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?void 0!==r.ready?r.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};tu.prototype=i.fn;gr=i(u);iu=/^(?:parents|prev(?:Until|All))/;ru={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;r>n;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=pu.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?"string"==typeof n?vt.call(i(n),this[0]):vt.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return ut(n,"parentNode")},parentsUntil:function(n,t,i){return ut(n,"parentNode",i)},next:function(n){return gi(n,"nextSibling")},prev:function(n){return gi(n,"previousSibling")},nextAll:function(n){return ut(n,"nextSibling")},prevAll:function(n){return ut(n,"previousSibling")},nextUntil:function(n,t,i){return ut(n,"nextSibling",i)},prevUntil:function(n,t,i){return ut(n,"previousSibling",i)},siblings:function(n){return yu((n.parentNode||{}).firstChild,n)},children:function(n){return yu(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(ru[n]||i.uniqueSort(f),iu.test(n)&&f.reverse()),this.pushStack(f)}});h=/\S+/g;i.Callbacks=function(n){n="string"==typeof n?lf(n):i.extend({},n);var o,r,h,f,t=[],e=[],u=-1,c=function(){for(f=n.once,h=o=!0;e.length;u=-1)for(r=e.shift();++u<t.length;)t[u].apply(r[0],r[1])===!1&&n.stopOnFalse&&(u=t.length,r=!1);n.memory||(r=!1);o=!1;f&&(t=r?[]:"")},s={add:function(){return t&&(r&&!o&&(u=t.length-1,e.push(r)),function f(r){i.each(r,function(r,u){i.isFunction(u)?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==i.type(u)&&f(u)})}(arguments),r&&!o&&c()),this},remove:function(){return i.each(arguments,function(n,r){for(var f;(f=i.inArray(r,t,f))>-1;)t.splice(f,1),u>=f&&u--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=e=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=e=[],r||(t=r=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],e.push(t),o||c()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().progress(f.notify).done(f.resolve).fail(f.reject):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=v.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?v.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().progress(h(t,c,o)).done(h(t,s,u)).fail(f.reject):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0||(pt.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready"))))}});i.ready.promise=function(t){return pt||(pt=i.Deferred(),"complete"===u.readyState||"loading"!==u.readyState&&!u.documentElement.doScroll?n.setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",ct),n.addEventListener("load",ct))),pt.promise(t)};i.ready.promise();a=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)a(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};nt=function(n){return 1===n.nodeType||9===n.nodeType||!+n.nodeType};ft.uid=1;ft.prototype={register:function(n,t){var i=t||{};return n.nodeType?n[this.expando]=i:Object.defineProperty(n,this.expando,{value:i,writable:!0,configurable:!0}),n[this.expando]},cache:function(n){if(!nt(n))return{};var t=n[this.expando];return t||(t={},nt(n)&&(n.nodeType?n[this.expando]=t:Object.defineProperty(n,this.expando,{value:t,configurable:!0}))),t},set:function(n,t,i){var r,u=this.cache(n);if("string"==typeof t)u[t]=i;else for(r in t)u[r]=t[r];return u},get:function(n,t){return void 0===t?this.cache(n):n[this.expando]&&n[this.expando][t]},access:function(n,t,r){var u;return void 0===t||t&&"string"==typeof t&&void 0===r?(u=this.get(n,t),void 0!==u?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),void 0!==r?r:t)},remove:function(n,t){var f,r,e,u=n[this.expando];if(void 0!==u){if(void 0===t)this.register(n);else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(e=i.camelCase(t),(t in u)?r=[t,e]:(r=e,r=(r in u)?[r]:r.match(h)||[])),f=r.length;f--;)delete u[r[f]];(void 0===t||i.isEmptyObject(u))&&(n.nodeType?n[this.expando]=void 0:delete n[this.expando])}},hasData:function(n){var t=n[this.expando];return void 0!==t&&!i.isEmptyObject(t)}};var r=new ft,e=new ft,ue=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bu=/[A-Z]/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(void 0===n){if(this.length&&(s=e.get(u),1===u.nodeType&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,0===f.indexOf("data-")&&(f=i.camelCase(f.slice(5)),nr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return"object"==typeof n?this.each(function(){e.set(this,n)}):a(this,function(t){var r,f;if(u&&void 0===t){if((r=e.get(u,n)||e.get(u,n.replace(bu,"-$&").toLowerCase()),void 0!==r)||(f=i.camelCase(n),r=e.get(u,f),void 0!==r)||(r=nr(u,f,void 0),void 0!==r))return r}else f=i.camelCase(n),this.each(function(){var i=e.get(this,f);e.set(this,f,t);n.indexOf("-")>-1&&void 0!==i&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var ku=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+ku+")([a-z%]*)$","i"),k=["Top","Right","Bottom","Left"],ot=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)},du=/^(?:checkbox|radio)$/i,gu=/<([\w:-]+)/,nf=/^$|\/(?:java|ecma)script/i,c={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};c.optgroup=c.option;c.tbody=c.tfoot=c.colgroup=c.caption=c.thead;c.th=c.td;uu=/<|&#?\w+;/;!function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var fe=/^key/,ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,tf=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,c,s,l,o,k,d,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){if("undefined"!=typeof i&&i.event.triggered!==t.type)return i.event.dispatch.apply(n,arguments)}),t=(t||"").match(h)||[""],b=t.length;b--;)w=tf.exec(t[b])||[],o=d=w[1],k=(w[2]||"").split(".").sort(),o&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},c=i.extend({type:o,origType:d,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y)),s.add&&(s.add.call(n,c),c.handler.guid||(c.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,c):l.push(c),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var y,k,c,v,p,s,l,a,o,b,d,w=r.hasData(n)&&r.get(n);if(w&&(v=w.events)){for(t=(t||"").match(h)||[""],p=t.length;p--;)if(c=tf.exec(t[p])||[],o=d=c[1],b=(c[2]||"").split(".").sort(),o){for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],c=c[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=y=a.length;y--;)s=a[y],!e&&d!==s.origType||u&&u.guid!==s.guid||c&&!c.test(s.namespace)||f&&f!==s.selector&&("**"!==f||!s.selector)||(a.splice(y,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,w.handle)!==!1||i.removeEvent(n,o,w.handle),delete v[o])}else for(o in v)i.event.remove(n,o+t[p],u,f,!0);i.isEmptyObject(v)&&r.remove(n,"handle events")}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=v.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.rnamespace||n.rnamespace.test(t.namespace))&&(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),void 0!==e&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&("click"!==n.type||isNaN(n.button)||n.button<1))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&(r.disabled!==!0||"click"!==n.type)){for(u=[],e=0;s>e;e++)o=t[e],f=o.selector+" ",void 0===u[f]&&(u[f]=o.needsContext?i(f,this).index(r)>-1:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=ee.test(r)?this.mouseHooks:fe.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),3===n.target.nodeType&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rr()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===rr()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&i.nodeName(this,"input"))return this.click(),!1},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?lt:d):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={constructor:i.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=lt;n&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=lt;n&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=lt;n&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return(!r||r!==f&&!i.contains(f,r))&&(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.fn.extend({on:function(n,t,i,r){return ri(this,n,t,i,r)},one:function(n,t,i,r){return ri(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=d),this.each(function(){i.event.remove(this,n,r,t)})}});var oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,se=/<script|<style|<link/i,he=/checked\s*(?:[^=]|=\s*.checked.)/i,ce=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;i.extend({htmlPrefilter:function(n){return n.replace(oe,"<$1><\/$2>")},clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!(f.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=o(h),s=o(n),u=0,c=s.length;c>u;u++)yf(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;c>u;u++)fr(s[u],e[u]);else fr(n,h);return e=o(h,"script"),e.length>0&&ii(e,!l&&o(n,"script")),h},cleanData:function(n){for(var u,t,f,s=i.event.special,o=0;void 0!==(t=n[o]);o++)if(nt(t)){if(u=t[r.expando]){if(u.events)for(f in u.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,u.handle);t[r.expando]=void 0}t[e.expando]&&(t[e.expando]=void 0)}}});i.fn.extend({domManip:y,detach:function(n){return er(this,n,!0)},remove:function(n){return er(this,n)},text:function(n){return a(this,function(n){return void 0===n?i.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return y(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ur(this,n);t.appendChild(n)}})},prepend:function(){return y(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ur(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return y(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return y(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;null!=(n=this[t]);t++)1===n.nodeType&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return a(this,function(n){var t=this[0]||{},r=0,u=this.length;if(void 0===n&&1===t.nodeType)return t.innerHTML;if("string"==typeof n&&!se.test(n)&&!c[(gu.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;u>r;r++)t=this[r]||{},1===t.nodeType&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return y(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(o(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),si.apply(f,u.get());return this.pushStack(f)}});ci={HTML:"block",BODY:"block"};var rf=/^margin/,yi=new RegExp("^("+ku+")(?!px)[a-z%]+$","i"),gt=function(t){var i=t.ownerDocument.defaultView;return i.opener||(i=n),i.getComputedStyle(t)},pi=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f},st=u.documentElement;!function(){var s,e,h,c,r=u.createElement("div"),t=u.createElement("div");if(t.style){t.style.backgroundClip="content-box";t.cloneNode(!0).style.backgroundClip="";f.clearCloneStyle="content-box"===t.style.backgroundClip;r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";r.appendChild(t);function o(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";t.innerHTML="";st.appendChild(r);var i=n.getComputedStyle(t);s="1%"!==i.top;c="2px"===i.marginLeft;e="4px"===i.width;t.style.marginRight="50%";h="4px"===i.marginRight;st.removeChild(r)}i.extend(f,{pixelPosition:function(){return o(),s},boxSizingReliable:function(){return null==e&&o(),e},pixelMarginRight:function(){return null==e&&o(),h},reliableMarginLeft:function(){return null==e&&o(),c},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",st.appendChild(r),f=!parseFloat(n.getComputedStyle(i).marginRight),st.removeChild(r),t.removeChild(i),f}})}}();var ae=/^(none|table(?!-c[ea]).+)/,ve={position:"absolute",visibility:"hidden",display:"block"},uf={letterSpacing:"0",fontWeight:"400"},ff=["Webkit","O","Moz","ms"],ef=u.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=g(n,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var e,h,o,s=i.camelCase(t),c=n.style;return t=i.cssProps[s]||(i.cssProps[s]=sr(s)||s),o=i.cssHooks[t]||i.cssHooks[s],void 0===r?o&&"get"in o&&void 0!==(e=o.get(n,!1,u))?e:c[t]:(h=typeof r,"string"===h&&(e=et.exec(r))&&e[1]&&(r=tr(n,t,e),h="number"),null!=r&&r===r&&("number"===h&&(r+=e&&e[3]||(i.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(n,r,u))||(c[t]=r)),void 0)}},css:function(n,t,r,u){var f,s,o,e=i.camelCase(t);return t=i.cssProps[e]||(i.cssProps[e]=sr(e)||e),o=i.cssHooks[t]||i.cssHooks[e],o&&"get"in o&&(f=o.get(n,!0,r)),void 0===f&&(f=g(n,t,u)),"normal"===f&&t in uf&&(f=uf[t]),""===r||r?(s=parseFloat(f),r===!0||isFinite(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return ae.test(i.css(n,"display"))&&0===n.offsetWidth?pi(n,ve,function(){return lr(n,t,u)}):lr(n,t,u)},set:function(n,r,u){var f,e=u&&gt(n),o=u&&cr(n,t,u,"border-box"===i.css(n,"boxSizing",!1,e),e);return o&&(f=et.exec(r))&&"px"!==(f[3]||"px")&&(n.style[t]=r,r=i.css(n,t)),hr(n,r,o)}}});i.cssHooks.marginLeft=fi(f.reliableMarginLeft,function(n,t){if(t)return(parseFloat(g(n,"marginLeft"))||n.getBoundingClientRect().left-pi(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"});i.cssHooks.marginRight=fi(f.reliableMarginRight,function(n,t){if(t)return pi(n,{display:"inline-block"},g,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+k[r]+t]=u[r]||u[r-2]||u[0];return f}};rf.test(n)||(i.cssHooks[n+t].set=hr)});i.fn.extend({css:function(n,t){return a(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=gt(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return ar(this,!0)},hide:function(){return ar(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){ot(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var r,t=s.propHooks[this.prop];return this.pos=r=this.options.duration?i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):n,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):1!==n.elem.nodeType||null==n.elem.style[i.cssProps[n.prop]]&&!i.cssHooks[n.prop]?n.elem[n.prop]=n.now:i.style(n.elem,n.prop,n.now+n.unit)}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=s.prototype.init;i.fx.step={};fu=/^(?:toggle|show|hide)$/;eu=/queueHooks$/;i.Animation=i.extend(l,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return tr(i.elem,n,et.exec(t),i),i}]},tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.match(h);for(var r,u=0,f=n.length;f>u;u++)r=n[u],l.tweeners[r]=l.tweeners[r]||[],l.tweeners[r].unshift(t)},prefilters:[pf],prefilter:function(n,t){t?l.prefilters.unshift(n):l.prefilters.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(null==u.queue||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(ot).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=l(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=null!=n&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&eu.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem!==this||null!=n&&o[t].queue!==n||(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;s>t;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(at(t,!0),n,i,u)}});i.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(tt=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();tt=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){bt||(bt=n.setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){n.clearInterval(bt);bt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=""!==n.value;f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue="t"===n.value}();it=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return a(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return"undefined"==typeof n.getAttribute?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),f=i.attrHooks[t]||(i.expr.match.bool.test(t)?ou:void 0)),void 0!==r?null===r?void i.removeAttr(n,t):f&&"set"in f&&void 0!==(u=f.set(n,r,t))?u:(n.setAttribute(t,r+""),r):f&&"get"in f&&null!==(u=f.get(n,t))?u:(u=i.find.attr(n,t),null==u?void 0:u))},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)}});ou={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=it[t]||i.find.attr;it[t]=function(n,t,i){var u,f;return i||(f=it[t],it[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,it[t]=f),u}});su=/^(?:input|select|textarea|button)$/i;hu=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return a(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return 1===e&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):su.test(n.nodeName)||hu.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});kt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,p(this)))});if("string"==typeof n&&n)for(o=n.match(h)||[];t=this[c++];)if(u=p(t),r=1===t.nodeType&&(" "+u+" ").replace(kt," ")){for(s=0;f=o[s++];)r.indexOf(" "+f+" ")<0&&(r+=f+" ");e=i.trim(r);u!==e&&t.setAttribute("class",e)}return this},removeClass:function(n){var o,r,t,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,p(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof n&&n)for(o=n.match(h)||[];r=this[c++];)if(u=p(r),t=1===r.nodeType&&(" "+u+" ").replace(kt," ")){for(s=0;f=o[s++];)while(t.indexOf(" "+f+" ")>-1)t=t.replace(" "+f+" "," ");e=i.trim(t);u!==e&&r.setAttribute("class",e)}return this},toggleClass:function(n,t){var u=typeof n;return"boolean"==typeof t&&"string"===u?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,p(this),t),t)}):this.each(function(){var t,e,f,o;if("string"===u)for(e=0,f=i(this),o=n.match(h)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else(void 0===n||"boolean"===u)&&(t=p(this),t&&r.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||n===!1?"":r.get(this,"__className__")||""))})},hasClass:function(n){for(var t,i=0,r=" "+n+" ";t=this[i++];)if(1===t.nodeType&&(" "+p(t)+" ").replace(kt," ").indexOf(r)>-1)return!0;return!1}});cu=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(cu,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){return i.trim(n.value)}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,h=u?null:[],c=u?r+1:s.length,e=0>r?c:u?r:0;c>e;e++)if(t=s[e],(t.selected||e===r)&&(f.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i.valHooks.option.get(r),e)>-1)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};f.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});li=/^(?:focusinfocus|focusoutblur)$/;i.extend(i.event,{trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=hi.call(t,"type")?t.type:t,y=hi.call(t,"namespace")?t.namespace.split("."):[];if(s=c=e=e||u,3!==e.nodeType&&8!==e.nodeType&&!li.test(h+i.event.triggered)&&(h.indexOf(".")>-1&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=e),f=null==f?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,li.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&nt(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||l._default&&l._default.apply(p.pop(),f)!==!1||!nt(e)||a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=void 0,c&&(e[a]=c)),t.result}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t);u.isDefaultPrevented()&&r.preventDefault()}});i.fn.extend({trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});f.focusin="onfocusin"in n;f.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});var ht=n.location,wi=i.now(),bi=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(t){var r;if(!t||"string"!=typeof t)return null;try{r=(new n.DOMParser).parseFromString(t,"text/xml")}catch(u){r=void 0}return(!r||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+t),r};var ye=/#.*$/,of=/([?&])_=[^&]*/,pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,we=/^(?:GET|HEAD)$/,be=/^\/\//,sf={},ki={},hf="*/".concat("*"),di=u.createElement("a");di.href=ht.href;i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ht.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":hf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ei(ei(n,i.ajaxSettings),t):ei(i.ajaxSettings,n)},ajaxPrefilter:pr(sf),ajaxTransport:pr(ki),ajax:function(t,r){function p(t,r,u,h){var a,rt,it,p,w,l=r;2!==s&&(s=2,d&&n.clearTimeout(d),v=void 0,k=h||"",e.readyState=t>0?4:0,a=t>=200&&300>t||304===t,u&&(p=bf(f,e,u)),p=kf(f,p,e,a),a?(f.ifModified&&(w=e.getResponseHeader("Last-Modified"),w&&(i.lastModified[o]=w),w=e.getResponseHeader("etag"),w&&(i.etag[o]=w)),204===t||"HEAD"===f.type?l="nocontent":304===t?l="notmodified":(l=p.state,rt=p.data,it=p.error,a=!it)):(it=l,(t||!l)&&(l="error",0>t&&(t=0))),e.status=t,e.statusText=(r||l)+"",a?nt.resolveWith(c,[rt,l,e]):nt.rejectWith(c,[e,l,it]),e.statusCode(b),b=void 0,y&&g.trigger(a?"ajaxSuccess":"ajaxError",[e,f,a?rt:it]),tt.fireWith(c,[e,l]),y&&(g.trigger("ajaxComplete",[e,f]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof t&&(r=t,t=void 0);r=r||{};var v,o,k,w,d,l,y,a,f=i.ajaxSetup({},r),c=f.context||f,g=f.context&&(c.nodeType||c.jquery)?i(c):i.event,nt=i.Deferred(),tt=i.Callbacks("once memory"),b=f.statusCode||{},it={},rt={},s=0,ut="canceled",e={readyState:0,getResponseHeader:function(n){var t;if(2===s){if(!w)for(w={};t=pe.exec(k);)w[t[1].toLowerCase()]=t[2];t=w[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===s?k:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return s||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return s||(f.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>s)for(t in n)b[t]=[b[t],n[t]];else e.always(n[e.status]);return this},abort:function(n){var t=n||ut;return v&&v.abort(t),p(0,t),this}};if(nt.promise(e).complete=tt.add,e.success=e.done,e.error=e.fail,f.url=((t||f.url||ht.href)+"").replace(ye,"").replace(be,ht.protocol+"//"),f.type=r.method||r.type||f.method||f.type,f.dataTypes=i.trim(f.dataType||"*").toLowerCase().match(h)||[""],null==f.crossDomain){l=u.createElement("a");try{l.href=f.url;l.href=l.href;f.crossDomain=di.protocol+"//"+di.host!=l.protocol+"//"+l.host}catch(ft){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=i.param(f.data,f.traditional)),wr(sf,f,r,e),2===s)return e;y=i.event&&f.global;y&&0==i.active++&&i.event.trigger("ajaxStart");f.type=f.type.toUpperCase();f.hasContent=!we.test(f.type);o=f.url;f.hasContent||(f.data&&(o=f.url+=(bi.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=of.test(o)?o.replace(of,"$1_="+wi++):o+(bi.test(o)?"&":"?")+"_="+wi++));f.ifModified&&(i.lastModified[o]&&e.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&e.setRequestHeader("If-None-Match",i.etag[o]));(f.data&&f.hasContent&&f.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",f.contentType);e.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+hf+"; q=0.01":""):f.accepts["*"]);for(a in f.headers)e.setRequestHeader(a,f.headers[a]);if(f.beforeSend&&(f.beforeSend.call(c,e,f)===!1||2===s))return e.abort();ut="abort";for(a in{success:1,error:1,complete:1})e[a](f[a]);if(v=wr(ki,f,r,e)){if(e.readyState=1,y&&g.trigger("ajaxSend",[e,f]),2===s)return e;f.async&&f.timeout>0&&(d=n.setTimeout(function(){e.abort("timeout")},f.timeout));try{s=1;v.send(it,p)}catch(ft){if(!(2>s))throw ft;p(-1,ft)}}else p(-1,"No Transport");return e},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax(i.extend({url:n,type:t,dataType:f,data:r,success:u},i.isPlainObject(n)&&n))}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return!i.expr.filters.visible(n)};i.expr.filters.visible=function(n){return n.offsetWidth>0||n.offsetHeight>0||n.getClientRects().length>0};var ke=/%20/g,de=/\[\]$/,cf=/\r?\n/g,ge=/^(?:submit|button|image|reset|file)$/i,no=/^(?:input|select|textarea|keygen)/i;return i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)oi(r,n[r],t,f);return u.join("&").replace(ke,"+")},i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&no.test(this.nodeName)&&!ge.test(n)&&(this.checked||!du.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(cf,"\r\n")}}):{name:t.name,value:r.replace(cf,"\r\n")}}).get()}}),i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}},lu={0:200,1223:204},rt=i.ajaxSettings.xhr(),f.cors=!!rt&&"withCredentials"in rt,f.ajax=rt=!!rt,i.ajaxTransport(function(t){var i,r;if(f.cors||rt&&!t.crossDomain)return{send:function(u,f){var o,e=t.xhr();if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");for(o in u)e.setRequestHeader(o,u[o]);i=function(n){return function(){i&&(i=r=e.onload=e.onerror=e.onabort=e.onreadystatechange=null,"abort"===n?e.abort():"error"===n?"number"!=typeof e.status?f(0,"error"):f(e.status,e.statusText):f(lu[e.status]||e.status,e.statusText,"text"!==(e.responseType||"text")||"string"!=typeof e.responseText?{binary:e.response}:{text:e.responseText},e.getAllResponseHeaders()))}};e.onload=i();r=e.onerror=i("error");void 0!==e.onabort?e.onabort=r:e.onreadystatechange=function(){4===e.readyState&&n.setTimeout(function(){i&&r()})};i=i("abort");try{e.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s;}},abort:function(){i&&i()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e("error"===n.type?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),ai=[],dt=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=ai.pop()||i.expando+"_"+wi++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,e,o,s=t.jsonp!==!1&&(dt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(dt,"$1"+f):t.jsonp!==!1&&(t.url+=(bi.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json",e=n[f],n[f]=function(){o=arguments},u.always(function(){void 0===e?i(n).removeProp(f):n[f]=e;t[f]&&(t.jsonpCallback=r.jsonpCallback,ai.push(f));o&&i.isFunction(e)&&e(o[0]);o=e=void 0}),"script"}),f.createHTMLDocument=function(){var n=u.implementation.createHTMLDocument("").body;return n.innerHTML="<form><\/form><form><\/form>",2===n.childNodes.length}(),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||(f.createHTMLDocument?u.implementation.createHTMLDocument(""):u);var e=wu.exec(n),o=!r&&[];return e?[t.createElement(e[1])]:(e=ir([n],t,o),o&&o.length&&i(o).remove(),i.merge([],e.childNodes))},vi=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&vi)return vi.apply(this,arguments);var f,o,s,u=this,e=n.indexOf(" ");return e>-1&&(f=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),u.length>0&&i.ajax({url:n,type:o||"GET",dataType:"html",data:t}).done(function(n){s=arguments;u.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).always(r&&function(n,t){u.each(function(){r.apply(u,s||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,i.extend({},u)));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,r=this[0],u={top:0,left:0},e=r&&r.ownerDocument;if(e)return t=e.documentElement,i.contains(t,r)?(u=r.getBoundingClientRect(),f=br(e),{top:u.top+f.pageYOffset-t.clientTop,left:u.left+f.pageXOffset-t.clientLeft}):u},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0)-n.scrollTop(),t.left+=i.css(n[0],"borderLeftWidth",!0)-n.scrollLeft()),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&"static"===i.css(n,"position");)n=n.offsetParent;return n||st})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r="pageYOffset"===t;i.fn[n]=function(i){return a(this,function(n,i,u){var f=br(n);return void 0===u?f?f[t]:n[i]:void(f?f.scrollTo(r?f.pageXOffset:u,r?u:f.pageYOffset):n[i]=u)},n,i,arguments.length)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=fi(f.pixelPosition,function(n,r){if(r)return r=g(n,t),yi.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return a(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)},size:function(){return this.length}}),i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),au=n.jQuery,vu=n.$,i.noConflict=function(t){return n.$===i&&(n.$=vu),t&&n.jQuery===i&&(n.jQuery=au),i},t||(n.jQuery=n.$=i),i}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function f(t,i){var r,u,f,o=t.nodeName.toLowerCase();return"area"===o?(r=t.parentNode,u=r.name,t.href&&u&&"map"===r.nodeName.toLowerCase()?(f=n("img[usemap='#"+u+"']")[0],!!f&&e(f)):!1):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&e(t)}function e(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return"hidden"===n.css(this,"visibility")}).length}var o,i,t,r,u;n.ui=n.ui||{};n.extend(n.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({scrollParent:function(t){var i=this.css("position"),u="absolute"===i,f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return u&&"static"===t.css("position")?!1:f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:n(this[0].ownerDocument||document)},uniqueId:function(){var n=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return f(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var i=n.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&f(t,!r)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(t,i){function r(t,i,r,u){return n.each(e,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var e="Width"===i?["Left","Right"]:["Top","Bottom"],u=i.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+i]=function(t){return void 0===t?f["inner"+i].call(this):this.each(function(){n(this).css(u,r(this,t)+"px")})};n.fn["outer"+i]=function(t,e){return"number"!=typeof t?f["outer"+i].call(this,t):this.each(function(){n(this).css(u,r(this,t,!0,e)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.fn.extend({focus:function(t){return function(i,r){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),disableSelection:function(){var n="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(n+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var r,u,i=n(this[0]);i.length&&i[0]!==document;){if(r=i.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(u=parseInt(i.css("zIndex"),10),!isNaN(u)&&0!==u))return u;i=i.parent()}return 0}});n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(u=0;f.length>u;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}};o=0;i=Array.prototype.slice;n.cleanData=function(t){return function(i){for(var r,u,f=0;null!=(u=i[f]);f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){return this._createWidget?(arguments.length&&this._createWidget(n,t),void 0):new u(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){return n.isFunction(r)?(h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var t,i=this._super,f=this._superApply;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}(),void 0):(h[t]=r,void 0)}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(t){for(var r,u,e=i.call(arguments,1),f=0,o=e.length;o>f;f++)for(r in e[f])u=e[f][r],e[f].hasOwnProperty(r)&&void 0!==u&&(t[r]=n.isPlainObject(u)?n.isPlainObject(t[r])?n.widget.extend({},t[r],u):n.widget.extend({},u):u);return t};n.widget.bridge=function(t,r){var u=r.prototype.widgetFullName||t;n.fn[t]=function(f){var s="string"==typeof f,o=i.call(arguments,1),e=this;return s?this.each(function(){var i,r=n.data(this,u);return"instance"===f?(e=r,!1):r?n.isFunction(r[f])&&"_"!==f.charAt(0)?(i=r[f].apply(r,o),i!==r&&void 0!==i?(e=i&&i.jquery?e.pushStack(i.get()):i,!1):void 0):n.error("no such method '"+f+"' for "+t+" widget instance"):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+f+"'")}):(o.length&&(f=n.widget.extend.apply(null,[f].concat(o))),this.each(function(){var t=n.data(this,u);t?(t.option(f||{}),t._init&&t._init()):n.data(this,u,new r(f,this))})),e}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=o++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var r,u,f,e=t;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof t)if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;r.length-1>f;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),1===arguments.length)return void 0===u[t]?null:u[t];u[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){var t;for(t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,"disabled"===n&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;"boolean"!=typeof t&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return("string"==typeof n?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){"string"==typeof u&&(u={effect:u});var o,e=u?u===!0||"number"==typeof u?i:u.effect||i:t;u=u||{};"number"==typeof u&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});n.widget;t=!1;n(document).mouseup(function(){t=!1});n.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return(n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1)});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=1===i.which,f="string"==typeof this.options.cancel&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return u&&!f&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return this._mouseMoved&&(n.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button||!t.which)?this._mouseUp(t):((t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted))},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&n.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),t=!1,!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function f(n,t,i){return[parseFloat(n[0])*(a.test(n[0])?t/100:1),parseFloat(n[1])*(a.test(n[1])?i/100:1)]}function i(t,i){return parseInt(n.css(t,i),10)||0}function v(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var u,e,r=Math.max,t=Math.abs,o=Math.round,s=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,a=/%$/,y=n.fn.position;n.position={scrollbarWidth:function(){if(void 0!==u)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,f="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return y.apply(this,arguments);u=n.extend({},u);var k,a,p,b,w,g,nt=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),d=(u.collision||"flip").split(" "),tt={};return g=v(nt),nt[0].preventDefault&&(u.at="left top"),a=g.width,p=g.height,b=g.offset,w=n.extend({},b),n.each(["my","at"],function(){var t,i,n=(u[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]);n[0]=s.test(n[0])?n[0]:"center";n[1]=h.test(n[1])?n[1]:"center";t=c.exec(n[0]);i=c.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[l.exec(n[0])[0],l.exec(n[1])[0]]}),1===d.length&&(d[1]=d[0]),"right"===u.at[0]?w.left+=a:"center"===u.at[0]&&(w.left+=a/2),"bottom"===u.at[1]?w.top+=p:"center"===u.at[1]&&(w.top+=p/2),k=f(tt.at,a,p),w.left+=k[0],w.top+=k[1],this.each(function(){var y,g,h=n(this),c=h.outerWidth(),l=h.outerHeight(),ut=i(this,"marginLeft"),ft=i(this,"marginTop"),et=c+ut+i(this,"marginRight")+rt.width,ot=l+ft+i(this,"marginBottom")+rt.height,s=n.extend({},w),v=f(tt.my,h.outerWidth(),h.outerHeight());"right"===u.my[0]?s.left-=c:"center"===u.my[0]&&(s.left-=c/2);"bottom"===u.my[1]?s.top-=l:"center"===u.my[1]&&(s.top-=l/2);s.left+=v[0];s.top+=v[1];e||(s.left=o(s.left),s.top=o(s.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[d[t]]&&n.ui.position[d[t]][i](s,{targetWidth:a,targetHeight:p,elemWidth:c,elemHeight:l,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:h})});u.using&&(g=function(n){var i=b.left-s.left,o=i+a-c,f=b.top-s.top,v=f+p-l,e={target:{element:nt,left:b.left,top:b.top,width:a,height:p},element:{element:h,left:s.left,top:s.top,width:c,height:l},horizontal:0>o?"left":i>0?"right":"center",vertical:0>v?"top":f>0?"bottom":"middle"};c>a&&a>t(i+o)&&(e.horizontal="center");l>p&&p>t(f+v)&&(e.vertical="middle");e.important=r(t(i),t(o))>r(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});h.offset(n.extend(s,{using:g}))})};n.ui.position={fit:{left:function(n,t){var h,e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=u-s,f=s+t.collisionWidth-o-u;t.collisionWidth>o?i>0&&0>=f?(h=n.left+i+t.collisionWidth-o-u,n.left+=i-h):n.left=f>0&&0>=i?u:i>f?u+o-t.collisionWidth:u:i>0?n.left+=i:f>0?n.left-=f:n.left=r(n.left-s,n.left)},top:function(n,t){var h,o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=u-s,f=s+t.collisionHeight-e-u;t.collisionHeight>e?i>0&&0>=f?(h=n.top+i+t.collisionHeight-e-u,n.top+=i-h):n.top=f>0&&0>=i?u:i>f?u+e-t.collisionHeight:u:i>0?n.top+=i:f>0?n.top-=f:n.top=r(n.top-s,n.top)}},flip:{left:function(n,i){var o,s,r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,h=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-h,v=l+i.collisionWidth-c-h,u="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,f="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,e=-2*i.offset[0];0>a?(o=n.left+u+f+e+i.collisionWidth-c-y,(0>o||t(a)>o)&&(n.left+=u+f+e)):v>0&&(s=n.left-i.collisionPosition.marginLeft+u+f+e-h,(s>0||v>t(s))&&(n.left+=u+f+e))},top:function(n,i){var o,s,r=i.within,y=r.offset.top+r.scrollTop,c=r.height,h=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-h,v=l+i.collisionHeight-c-h,p="top"===i.my[1],u=p?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,f="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,e=-2*i.offset[1];0>a?(s=n.top+u+f+e+i.collisionHeight-c-y,(0>s||t(a)>s)&&(n.top+=u+f+e)):v>0&&(o=n.top-i.collisionPosition.marginTop+u+f+e-h,(o>0||v>t(o))&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,f,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in r)t.style[f]=r[f];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;e=u>10&&11>u;t.innerHTML="";i.removeChild(t)}()}();n.ui.position;n.widget("ui.draggable",n.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(n,t){this._super(n,t);"handle"===n&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&n(i.activeElement).blur()}catch(r){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===n(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(n){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:n.pageX-this.offset.left,top:n.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var r=this.options,u=n.isFunction(r.helper),i=u?n(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),u&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(n){return/(html|body)/i.test(n.tagName)||n===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var n=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:n.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,t,i,r=this.options,u=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?(this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,n(u).width()-this.helperProportions.width-this.margins.left,(n(u).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i&&(f=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(f?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t),void 0):(this.containment=null,void 0)},_convertPositionTo:function(n,t){t||(t=this.position);var i="absolute"===n?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(n,t){var i,s,u,f,r=this.options,h=this._isRootNode(this.scrollParent[0]),e=n.pageX,o=n.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,n.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),n.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),n.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),n.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f),"y"===r.axis&&(e=this.originalPageX),"x"===r.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,r){var u=n.extend({},i,{item:r.element});r.sortables=[];n(r.options.connectToSortable).each(function(){var i=n(this).sortable("instance");i&&!i.options.disabled&&(r.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,u))})},stop:function(t,i,r){var u=n.extend({},i,{item:r.element});r.cancelHelperRemoval=!1;n.each(r.sortables,function(){var n=this;n.isOver?(n.isOver=0,r.cancelHelperRemoval=!0,n.cancelHelperRemoval=!1,n._storedCSS={position:n.placeholder.css("position"),top:n.placeholder.css("top"),left:n.placeholder.css("left")},n._mouseStop(t),n.options.helper=n.options._helper):(n.cancelHelperRemoval=!0,n._trigger("deactivate",t,u))})},drag:function(t,i,r){n.each(r.sortables,function(){var f=!1,u=this;u.positionAbs=r.positionAbs;u.helperProportions=r.helperProportions;u.offset.click=r.offset.click;u._intersectsWith(u.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==u&&this._intersectsWith(this.containerCache)&&n.contains(u.element[0],this.element[0])&&(f=!1),f}));f?(u.isOver||(u.isOver=1,r._parent=i.helper.parent(),u.currentItem=i.helper.appendTo(u.element).data("ui-sortable-item",!0),u.options._helper=u.options.helper,u.options.helper=function(){return i.helper[0]},t.target=u.currentItem[0],u._mouseCapture(t,!0),u._mouseStart(t,!0,!0),u.offset.click.top=r.offset.click.top,u.offset.click.left=r.offset.click.left,u.offset.parent.left-=r.offset.parent.left-u.offset.parent.left,u.offset.parent.top-=r.offset.parent.top-u.offset.parent.top,r._trigger("toSortable",t),r.dropped=u.element,n.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,u.fromOutside=r),u.currentItem&&(u._mouseDrag(t),i.position=u.position)):u.isOver&&(u.isOver=0,u.cancelHelperRemoval=!0,u.options._revert=u.options.revert,u.options.revert=!1,u._trigger("out",t,u._uiHash(u)),u._mouseStop(t,!0),u.options.revert=u.options._revert,u.options.helper=u.options._helper,u.placeholder&&u.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(t),i.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,n.each(r.sortables,function(){this.refreshPositions()}))})}});n.ui.plugin.add("draggable","cursor",{start:function(t,i,r){var u=n("body"),f=r.options;u.css("cursor")&&(f._cursor=u.css("cursor"));u.css("cursor",f.cursor)},stop:function(t,i,r){var u=r.options;u._cursor&&n("body").css("cursor",u._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("opacity")&&(f._opacity=u.css("opacity"));u.css("opacity",f.opacity)},stop:function(t,i,r){var u=r.options;u._opacity&&n(i.helper).css("opacity",u._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(n,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1));i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,r){var u=r.options,o=!1,e=r.scrollParentNotHidden[0],f=r.document[0];e!==f&&"HTML"!==e.tagName?(u.axis&&"x"===u.axis||(r.overflowOffset.top+e.offsetHeight-t.pageY<u.scrollSensitivity?e.scrollTop=o=e.scrollTop+u.scrollSpeed:t.pageY-r.overflowOffset.top<u.scrollSensitivity&&(e.scrollTop=o=e.scrollTop-u.scrollSpeed)),u.axis&&"y"===u.axis||(r.overflowOffset.left+e.offsetWidth-t.pageX<u.scrollSensitivity?e.scrollLeft=o=e.scrollLeft+u.scrollSpeed:t.pageX-r.overflowOffset.left<u.scrollSensitivity&&(e.scrollLeft=o=e.scrollLeft-u.scrollSpeed))):(u.axis&&"x"===u.axis||(t.pageY-n(f).scrollTop()<u.scrollSensitivity?o=n(f).scrollTop(n(f).scrollTop()-u.scrollSpeed):n(window).height()-(t.pageY-n(f).scrollTop())<u.scrollSensitivity&&(o=n(f).scrollTop(n(f).scrollTop()+u.scrollSpeed))),u.axis&&"y"===u.axis||(t.pageX-n(f).scrollLeft()<u.scrollSensitivity?o=n(f).scrollLeft(n(f).scrollLeft()-u.scrollSpeed):n(window).width()-(t.pageX-n(f).scrollLeft())<u.scrollSensitivity&&(o=n(f).scrollLeft(n(f).scrollLeft()+u.scrollSpeed))));o!==!1&&n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(t,i,r){var u=r.options;r.snapElements=[];n(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each(function(){var t=n(this),i=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,r){for(var e,o,s,h,c,a,l,v,w,b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--)c=r.snapElements[u].left-r.margins.left,a=c+r.snapElements[u].width,l=r.snapElements[u].top-r.margins.top,v=l+r.snapElements[u].height,c-f>k||y>a+f||l-f>d||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)?(r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1):("inner"!==b.snapMode&&(e=f>=Math.abs(l-d),o=f>=Math.abs(v-p),s=f>=Math.abs(c-k),h=f>=Math.abs(a-y),e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left)),w=e||o||s||h,"outer"!==b.snapMode&&(e=f>=Math.abs(l-p),o=f>=Math.abs(v-d),s=f>=Math.abs(c-y),h=f>=Math.abs(a-k),e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left)),!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=e||o||s||h||w)}});n.ui.plugin.add("draggable","stack",{start:function(t,i,r){var f,e=r.options,u=n.makeArray(n(e.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});u.length&&(f=parseInt(n(u[0]).css("zIndex"),10)||0,n(u).each(function(t){n(this).css("zIndex",f+t)}),this.css("zIndex",f+u.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex"));u.css("zIndex",f.zIndex)},stop:function(t,i,r){var u=r.options;u._zIndex&&n(i.helper).css("zIndex",u._zIndex)}});n.ui.draggable;r="ui-effects-";u=n;n.effects={effect:{}},function(n,t){function f(n,t,i){var r=h[t.type]||{};return null==n?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n)?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:n>r.max?r.max:n)}function s(f){var o=i(),s=o._rgba=[];return f=f.toLowerCase(),r(v,function(n,i){var r,h=i.re.exec(f),c=h&&i.parse(h),e=i.space||"rgba";return c?(r=o[e](c),o[u[e].cache]=r[u[e].cache],s=o._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&n.extend(s,e.transparent),o):e[f]}function o(n,t,i){return i=(i+1)%1,1>6*i?n+6*(t-n)*i:1>2*i?t:2>3*i?n+6*(t-n)*(2/3-i):n}var e,a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=i.support={},l=n("<p>")[0],r=n.each;l.style.cssText="background-color:rgba(1,1,1,.5)";c.rgba=l.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,h,c,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(h),h=t);var a=this,v=n.type(o),y=this._rgba=[];return h!==t&&(o=[o,h,c,l],v="array"),"string"===v?this.parse(s(o)||e._default):"array"===v?(r(u.rgba.props,function(n,t){y[t.idx]=f(o[t.idx],t)}),this):"object"===v?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if("alpha"===n||null==o[n])return;a[u]=i.to(a._rgba)}a[u][t.idx]=f(o[n],t,!0)});a[u]&&0>n.inArray(null,a[u].slice(0,3))&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):t},is:function(n){var o=i(n),f=!0,e=this;return r(u,function(n,i){var s,u=o[i.cache];return u&&(s=e[i.cache]||i.to&&i.to(e._rgba)||[],r(i.props,function(n,i){return null!=u[i.idx]?f=u[i.idx]===s[i.idx]:t})),f}),f},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var e=i(n),c=e._space(),o=u[c],l=0===this.alpha()?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),s=a.slice();return e=e[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=e[c],o=h[i.type]||{};null!==u&&(null===r?s[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),s[c]=f((u-r)*t+r,i)))}),this[c](s)},blend:function(t){if(1===this._rgba[3])return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return null==n?t>2?1:0:n});return 1===t[3]&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return null==n&&(n=t>2?1:0),t&&3>t&&(n=Math.round(100*n)+"%"),n});return 1===t[3]&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(255*r)),"#"+n.map(i,function(n){return n=(n||0).toString(16),1===n.length?"0"+n:n}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var s,h,i=n[0]/255,r=n[1]/255,f=n[2]/255,c=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,l=.5*o;return s=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,h=0===t?0:.5>=l?t/o:t/(2-o),[Math.round(s)%360,h,l,null==c?1:c]};u.hsla.from=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=.5>=t?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(255*o(f,i,r+1/3)),Math.round(255*o(f,i,r)),Math.round(255*o(f,i,r-1/3)),e]};r(u,function(u,e){var s=e.props,o=e.cache,h=e.to,c=e.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v="array"===a||"object"===a?u:arguments,e=this[o].slice();return r(s,function(n,t){var i=v["object"===a?n:t.idx];null==i&&(i=e[t.idx]);e[t.idx]=f(i,t)}),c?(l=i(c(e)),l[o]=e,l):i(e)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f,e=n.type(i),h="alpha"===t?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx];return"undefined"===e?s:("function"===e&&(i=i.call(this,s),e=n.type(i)),null==i&&r.empty?this:("string"===e&&(f=a.exec(i),f&&(i=s+parseFloat(f[2])*("+"===f[1]?1:-1))),o[r.idx]=i,this[h](o)))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if("transparent"!==u&&("string"!==n.type(u)||(o=s(u)))){if(u=i(o||u),!c.rgba&&1!==u._rgba[3]){for(f="backgroundColor"===r?t.parentNode:t;(""===e||"transparent"===e)&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(h){}u=u.blend(e&&"transparent"!==e?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(h){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};e=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(u),function(){function t(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],"string"==typeof i[r]&&(f[n.camelCase(r)]=i[r]);else for(r in i)"string"==typeof i[r]&&(f[r]=i[r]);return f}function i(t,i){var r,u,e={};for(r in i)u=i[r],t[r]!==u&&(f[r]||(n.fx.step[r]||!isNaN(parseFloat(u)))&&(e[r]=u));return e}var r=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){("none"===n.end||n.setAttr)&&(1!==n.pos||n.setAttr)||(u.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(u,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var o,e=n(this),h=e.attr("class")||"",f=s.children?e.find("*").addBack():e;f=f.map(function(){var i=n(this);return{el:i,start:t(this)}});o=function(){n.each(r,function(n,t){u[t]&&e[t+"Class"](u[t])})};o();f=f.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(t){return function(i,r,u,f,e){return"boolean"==typeof r||void 0===r?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):t.apply(this,arguments):n.effects.animateClass.call(this,{toggle:i},r,u,f)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function t(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),("number"==typeof i||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:"number"==typeof r?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function i(t){return!t||"number"==typeof t||n.fx.speeds[t]?!0:"string"!=typeof t||n.effects.effect[t]?n.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}n.extend(n.effects,{version:"1.11.4",save:function(n,t){for(var i=0;t.length>i;i++)null!==t[i]&&n.data(r+t[i],n[0].style[t[i]])},restore:function(n,t){for(var u,i=0;t.length>i;i++)null!==t[i]&&(u=n.data(r+t[i]),void 0===u&&(u=""),n.css(t[i],u))},setMode:function(n,t){return"toggle"===t&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),"static"===t.css("position")?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function r(t){function f(){n.isFunction(o)&&o.call(r[0]);n.isFunction(t)&&t()}var r=n(this),o=i.complete,u=i.mode;(r.is(":hidden")?"hide"===u:"show"===u)?(r[u](),f()):e.call(r[0],i,f)}var i=t.apply(this,arguments),u=i.mode,f=i.queue,e=n.effects.effect[i.effect];return n.fx.off||!e?u?this[u](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):f===!1?this.each(r):this.queue(f||"fx",r)},show:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(n.fn.show),hide:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(n.fn.hide),toggle:function(n){return function(r){if(i(r)||"boolean"==typeof r)return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return 0===n||1===n?n:-Math.pow(2,8*(n-1))*Math.sin((80*(n-1)-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>n;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return.5>n?i(2*n)/2:1-i(-2*n+2)/2}})}();n.effects;n.effects.effect.pulsate=function(t,i){var e,r=n(this),o=n.effects.setMode(r,t.mode||"show"),h="show"===o,a="hide"===o,v=h||"hide"===o,s=2*(t.times||5)+(v?1:0),c=t.duration/s,u=0,f=r.queue(),l=f.length;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),e=1;s>e;e++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing);r.queue(function(){a&&r.hide();i()});l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,s+1)));r.dequeue()}}),function(n,t,i){function v(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function y(n){return n==="http:"?80:n==="https:"?443:void 0}function h(n,t){return t.match(/:\d+$/)?t:t+":"+y(n)}function p(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1};u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())};u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function")throw new Error(f.nojQuery);var r,c,s=t.document.readyState==="complete",e=n(t),l="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},w=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},o=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},b=function(n){return n.state===r.connectionState.disconnected},a=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},k=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f)}),i._.configuredStopReconnectingTimeout=!0)};r=function(n,t,i){return new r.fn.init(n,t,i)};r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}};r.events=u;r.resources=f;r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1};r.changeState=o;r.isDisconnecting=b;r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}};e.load(function(){s=!0});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new p(this,function(n){f.triggerHandler(u.onReceived,[n])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0};typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+h(u.protocol,u.host)!==r.protocol+h(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,h){var c=this,y={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},d,p=c._deferral||n.Deferred(),w=t.document.createElement("a"),b,g;if(c.lastError=null,c._deferral=p,!c.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(y,i),n.type(y.callback)==="function"&&(h=y.callback)),y.transport=v(y.transport,c),!y.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(c._.config=y,!s&&y.waitForPageLoad===!0)?(c._.deferredStartHandler=function(){c.start(i,h)},e.bind("load",c._.deferredStartHandler),p.promise()):c.state===r.connectionState.connecting?p.promise():o(c,r.connectionState.disconnected,r.connectionState.connecting)===!1?(p.resolve(c),p.promise()):(k(c),w.href=c.url,w.protocol&&w.protocol!==":"?(c.protocol=w.protocol,c.host=w.host):(c.protocol=t.document.location.protocol,c.host=w.host||t.document.location.host),c.baseUrl=c.protocol+"//"+c.host,c.wsProtocol=c.protocol==="https:"?"wss://":"ws://",y.transport==="auto"&&y.jsonp===!0&&(y.transport="longPolling"),c.url.indexOf("//")===0&&(c.url=t.location.protocol+c.url,c.log("Protocol relative URL detected, normalizing it to '"+c.url+"'.")),this.isCrossDomain(c.url)&&(c.log("Auto detected cross domain url."),y.transport==="auto"&&(y.transport=["webSockets","serverSentEvents","longPolling"]),typeof y.withCredentials=="undefined"&&(y.withCredentials=!0),y.jsonp||(y.jsonp=!n.support.cors,y.jsonp&&c.log("Using jsonp because this browser doesn't support CORS.")),c.contentType=r._.defaultContentType),c.withCredentials=y.withCredentials,c.ajaxDataType=y.jsonp?"jsonp":"text",n(c).bind(u.onStart,function(){n.type(h)==="function"&&h.call(c);p.resolve(c)}),c._.initHandler=r.transports._logic.initHandler(c),d=function(i,s){var l=r._.error(f.noTransportOnInit);if(s=s||0,s>=i.length){s===0?c.log("No transports supported by the server were selected."):s===1?c.log("No fallback transports were selected."):c.log("Fallback transports exhausted.");n(c).triggerHandler(u.onError,[l]);p.reject(l);c.stop();return}if(c.state!==r.connectionState.disconnected){var y=i[s],h=r.transports[y],v=function(){d(i,s+1)};c.transport=h;try{c._.initHandler.start(h,function(){var i=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,f=!!c.withCredentials&&i;c.log("The start request succeeded. Transitioning to the connected state.");a(c)&&r.transports._logic.monitorKeepAlive(c);r.transports._logic.startHeartbeat(c);r._.configurePingInterval(c);o(c,r.connectionState.connecting,r.connectionState.connected)||c.log("WARNING! The connection was not in the connecting state.");c._.connectingMessageBuffer.drain();n(c).triggerHandler(u.onStart);e.bind("unload",function(){c.log("Window unloading, stopping the connection.");c.stop(f)});i&&e.bind("beforeunload",function(){})},v)}catch(w){c.log(h.name+" transport threw '"+w.message+"' when attempting to start.");v()}}},b=c.url+"/negotiate",g=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);p.reject(e);i.stop()},n(c).triggerHandler(u.onStarting),b=r.transports._logic.prepareQueryString(c,b),c.log("Negotiating with '"+b+"'."),c._.negotiateRequest=r.transports._logic.ajax(c,{url:b,error:function(n,t){t!==l?g(n,c):p.reject(r._.error(f.stoppedWhileNegotiating,null,c._.negotiateRequest))},success:function(t){var i,e,h,o=[],s=[];try{i=c._parseResponse(t)}catch(l){g(r._.error(f.errorParsingNegotiateResponse,l),c);return}if(e=c._.keepAliveData,c.appRelativeUrl=i.Url,c.id=i.ConnectionId,c.token=i.ConnectionToken,c.webSocketServerUrl=i.WebSocketServerUrl,c._.pollTimeout=i.ConnectionTimeout*1e3+1e4,c.disconnectTimeout=i.DisconnectTimeout*1e3,c._.totalTransportConnectTimeout=c.transportConnectTimeout+i.TransportConnectTimeout*1e3,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1e3,e.timeoutWarning=e.timeout*c.keepAliveWarnAt,c._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,c.reconnectWindow=c.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==c.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,c.clientProtocol,i.ProtocolVersion));n(c).triggerHandler(u.onError,[h]);p.reject(h);return}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets)return!0;s.push(n)});n.isArray(y.transport)?n.each(y.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):y.transport==="auto"?o=s:n.inArray(y.transport,s)>=0&&o.push(y.transport);d(o)}}),p.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,h){var c=this,v=c._deferral;if(c._.deferredStartHandler&&e.unbind("load",c._.deferredStartHandler),delete c._.config,delete c._.deferredStartHandler,!s&&(!c._.config||c._.config.waitForPageLoad===!0)){c.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(c.state!==r.connectionState.disconnected)return c.log("Stopping connection."),o(c,c.state,r.connectionState.disconnected),t.clearTimeout(c._.beatHandle),t.clearInterval(c._.pingIntervalId),c.transport&&(c.transport.stop(c),h!==!1&&c.transport.abort(c,i),a(c)&&r.transports._logic.stopMonitoringKeepAlive(c),c.transport=null),c._.negotiateRequest&&(c._.negotiateRequest.abort(l),delete c._.negotiateRequest),c._.initHandler&&c._.initHandler.stop(),n(c).triggerHandler(u.onDisconnect),delete c._deferral,delete c.messageId,delete c.groupsToken,delete c.id,delete c._.pingIntervalId,delete c._.lastMessageAt,delete c._.lastActiveAt,c._.connectingMessageBuffer.clear(),c},log:function(n){w(n,this.logging)}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=c),r};n.connection&&(c=n.connection);n.connection=n.signalR=r}(window.jQuery,window),function(n,t,i){function o(n){n._.keepAliveData.monitoring&&c(n);u.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){o(n)},n._.beatInterval))}function c(t){var i=t._.keepAliveData,u;t.state===r.connectionState.connected&&(u=(new Date).getTime()-t._.lastMessageAt,u>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):u>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(f.onConnectionSlow),i.userNotified=!0):i.userNotified=!1)}function e(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),u.prepareQueryString(n,i)}function s(n){this.connection=n;this.startRequested=!1;this.startCompleted=!1;this.connectionStopped=!1}var r=n.signalR,f=n.signalR.events,l=n.signalR.changeState,h="__Start Aborted__",u;r.transports={};s.prototype={start:function(n,r,u){var f=this,e=f.connection,o=!1;if(f.startRequested||f.connectionStopped){e.log("WARNING! "+n.name+" transport cannot be started. Initialization ongoing or completed.");return}e.log(n.name+" transport starting.");f.transportTimeoutHandle=t.setTimeout(function(){o||(o=!0,e.log(n.name+" transport timed out when trying to connect."),f.transportFailed(n,i,u))},e._.totalTransportConnectTimeout);n.start(e,function(){o||f.initReceived(n,r)},function(t){return o||(o=!0,f.transportFailed(n,t,u)),!f.startCompleted||f.connectionStopped})},stop:function(){this.connectionStopped=!0;t.clearTimeout(this.transportTimeoutHandle);r.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(n,i){var u=this,f=u.connection;if(u.startRequested){f.log("WARNING! The client received multiple init messages.");return}u.connectionStopped||(u.startRequested=!0,t.clearTimeout(u.transportTimeoutHandle),f.log(n.name+" transport connected. Initiating start request."),r.transports._logic.ajaxStart(f,function(){u.startCompleted=!0;i()}))},transportFailed:function(i,u,e){var o=this.connection,h=o._deferral,s;this.connectionStopped||(t.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(s=r._.error(r.resources.errorDuringStartRequest,u),o.log(i.name+" transport failed during the start request. Stopping the connection."),n(o).triggerHandler(f.onError,[s]),h&&h.reject(s),o.stop()):(i.stop(o),o.log(i.name+" transport failed to connect. Attempting to fall back."),e()))}};u=r.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,i=n.Deferred();return t.transport?(e=t.url+"/ping",e=u.addQs(e,t.qs),f=u.ajax(t,{url:e,success:function(n){var u;try{u=t._parseResponse(n)}catch(e){i.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,e,f));t.stop();return}u.Response==="pong"?i.resolve():i.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(i.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):i.reject(r._.transportError(r.resources.pingServerFailed,t.transport,n,f))}})):i.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),i.promise()},prepareQueryString:function(n,i){var r;return r=u.addQs(i,"clientProtocol="+n.clientProtocol),r=u.addQs(r,n.qs),n.token&&(r+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(r+="&connectionData="+t.encodeURIComponent(n.data)),r},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i)return t;if(typeof i=="object")return t+r+n.param(i);if(typeof i=="string")return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,r,f,e){var h=i==="webSockets"?"":n.baseUrl,o=h+n.appRelativeUrl,s="transport="+i;return!e&&n.groupsToken&&(s+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(o+=f?"/poll":"/reconnect",!e&&n.messageId&&(s+="&messageId="+t.encodeURIComponent(n.messageId))):o+="/connect",o+="?"+s,o=u.prepareQueryString(n,o),e||(o+="&tid="+Math.floor(Math.random()*11)),o},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,i){var h=u.stringifySend(t,i),c=e(t,"/send"),o,s=function(t,u){n(u).triggerHandler(f.onError,[r._.transportError(r.resources.sendFailed,u.transport,t,o),i])};return o=u.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(r){s(r,t);t.stop();return}u.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=e(n,"/abort");u.ajax(n,{url:i,async:t,timeout:1e3,type:"POST"});n.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,i){var s=function(n){var i=t._deferral;i&&i.reject(n)},o=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(f.onError,[i]);s(i);t.stop()};t._.startRequest=u.ajax(t,{url:e(t,"/start"),success:function(n,u,f){var e;try{e=t._parseResponse(n)}catch(s){o(r._.error(r._.format(r.resources.errorParsingStartResponse,n),s,f));return}e.Response==="started"?i():o(r._.error(r._.format(r.resources.invalidStartResponse,n),null,f))},error:function(n,i,u){i!==h?o(r._.error(r.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),s(r._.error(r.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(h),delete n._.startRequest)},tryInitialize:function(n,t){n.Initialized&&t()},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(f.onReceived,[i])},processMessages:function(t,i,r){var f;u.markLastMessage(t);i&&(f=u.maximizePersistentResponse(i),u.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){u.triggerReceived(t,i)}),u.tryInitialize(f,r)))},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t)},n(t).bind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+", keep alive timeout of "+i.timeout+" and disconnecting timeout of "+t.disconnectTimeout))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();o(n)},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime()},markActive:function(n){return u.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(n){return n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting},ensureReconnectingState:function(t){return l(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&n(t).triggerHandler(f.onReconnecting),t.state===r.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var i=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(i),n(t).triggerHandler(f.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(n,i){var f=r.transports[i];if(u.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!u.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){u.verifyLastActive(n)&&(f.stop(n),u.ensureReconnectingState(n)&&(n.log(i+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,i,u,e,o){var s=r._.transportError(r._.format(r.resources.parseFailed,i),t.transport,u,o);e&&e(s)?t.log("Failed to parse server response while attempting to connect."):(n(t).triggerHandler(f.onError,[s]),t.stop())},initHandler:function(n){return new s(n)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");i.clearReconnectTimeout(e);f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){var i;this===e.socket&&(c&&typeof t.wasClean!="undefined"&&t.wasClean===!1?(i=r._.transportError(r.resources.webSocketClosed,e.transport,t),e.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):e.log("Websocket closed."),s&&s(i)||(i&&n(e).triggerHandler(u.onError,[i]),l.reconnect(e)))},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data)}catch(u){i.handleParseFailure(e,t.data,u,s,t);return}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o)},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect))},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(i){r.handleParseFailure(o,n.data,i,h,n);return}r.processMessages(o,t,s)}},!1);o.eventSource.addEventListener("error",function(n){var r=i._.transportError(i.resources.eventSourceError,o.transport,n);this===o.eventSource&&(h&&h(r)||(o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[r]))))},!1)},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){r.ajaxSend(n,t)},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){r.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");e&&e()||l.reconnect(n)};if(t.EventSource){e&&(n.log("Forever Frame is not supported by SignalR on browsers with SSE support."),e());return}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.documentElement.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occured when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(o,s,h){var a=this,v=function(){v=n.noop;o.log("LongPolling connected.");s()},y=function(n){return h(n)?(o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var g=s.messageId,nt=g===null,k=!nt,tt=!h,d=i.getUrl(s,a.name,k,tt,!0),b={};(s.messageId&&(b.messageId=s.messageId),s.groupsToken&&(b.groupsToken=s.groupsToken),f(s)!==!0)&&(o.log("Opening long polling request to '"+d+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:d,type:"POST",contentType:r._.defaultContentType,data:b,timeout:o._.pollTimeout,success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),f(s)!==!0)&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a)},w):e(s,a))},error:function(f,h){var v=r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr);if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!y(v)){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[v])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},a.reconnectDelay)}}}),k&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n){function r(n){return n+s}function e(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function o(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i)r=i[f],r.method.call(r.scope,{E:t})}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var s=".hubProxy",h=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i){var u=this,f=u._.callbackMap;return t=t.toLowerCase(),f[t]||(f[t]={}),f[t][i]=function(n,t){i.apply(u,t)},n(u).bind(r(t),f[t][i]),u},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e},invoke:function(t){var i=this,r=i.connection,s=n.makeArray(arguments).slice(1),c=e(s,o),f={H:i.hubName,M:t,A:c,I:r._.invocationCallbackId},u=n.Deferred(),l=function(f){var e=i._maximizeHubResponse(f),s,o;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),s=e.IsHubException?"HubException":"Exception",o=h._.error(e.Error,s),o.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+o.message),u.rejectWith(i,[o])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:l},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])))});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})))});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i)}))};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t};t.fn.init.prototype=t.fn;n.hubConnection=t}(window.jQuery,window),function(n){n.signalR.version="2.2.0"}(window.jQuery),function(n){"use strict";function r(t,i){return function(){i.apply(t,n.makeArray(arguments))}}function i(t,i){var o,u,f,e,s;for(o in t)if(t.hasOwnProperty(o)){if(u=t[o],!u.hubName)continue;s=i?u.on:u.off;for(f in u.client)if(u.client.hasOwnProperty(f)){if(e=u.client[f],!n.isFunction(e))continue;s.call(u,f,r(u,e),e)}}}if(typeof n.signalR!="function")throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var t=n.signalR;n.hubConnection.prototype.createHubProxies=function(){var t={};return this.starting(function(){i(t,!0);this._registerSubscribedHubs()}).disconnected(function(){i(t,!1)}),t.hubInterface=this.createHubProxy("hubInterface"),t.hubInterface.client={},t.hubInterface.server={alertAgentAddToCart:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["AlertAgentAddToCart"],n.makeArray(arguments)))},alertAgentAddToMyList:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["AlertAgentAddToMyList"],n.makeArray(arguments)))},assignedVisitorsFromLogin:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["AssignedVisitorsFromLogin"],n.makeArray(arguments)))},cleanInactiveVisitors:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["CleanInactiveVisitors"],n.makeArray(arguments)))},closeLastConnection:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["CloseLastConnection"],n.makeArray(arguments)))},closeSession:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["CloseSession"],n.makeArray(arguments)))},connectBotFromOverflow:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ConnectBotFromOverflow"],n.makeArray(arguments)))},connectedAgent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ConnectedAgent"],n.makeArray(arguments)))},connectFromPincode:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ConnectFromPincode"],n.makeArray(arguments)))},createSessionSameToken:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["CreateSessionSameToken"],n.makeArray(arguments)))},forceCloseRoom:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ForceCloseRoom"],n.makeArray(arguments)))},forceCloseSession:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ForceCloseSession"],n.makeArray(arguments)))},forceKickAgent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ForceKickAgent"],n.makeArray(arguments)))},getFirstVisitorToOverbookingList:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["GetFirstVisitorToOverbookingList"],n.makeArray(arguments)))},getVisitorStatusCall:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["GetVisitorStatusCall"],n.makeArray(arguments)))},goToBackgroundAppMobile:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["GoToBackgroundAppMobile"],n.makeArray(arguments)))},initBotConversation:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["InitBotConversation"],n.makeArray(arguments)))},isTyping:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["IsTyping"],n.makeArray(arguments)))},joinAgent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["JoinAgent"],n.makeArray(arguments)))},logOffOtherAgent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["LogOffOtherAgent"],n.makeArray(arguments)))},markAsTransferredInVideoCallInDic:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["MarkAsTransferredInVideoCallInDic"],n.makeArray(arguments)))},receiveTag:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ReceiveTag"],n.makeArray(arguments)))},rejectedVideoCall:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["RejectedVideoCall"],n.makeArray(arguments)))},reloadAgents:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["ReloadAgents"],n.makeArray(arguments)))},sendAddToMyCartToVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendAddToMyCartToVisitor"],n.makeArray(arguments)))},sendAddToMyListToVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendAddToMyListToVisitor"],n.makeArray(arguments)))},sendAgentsChatMessage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendAgentsChatMessage"],n.makeArray(arguments)))},sendAnalyticsEvent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendAnalyticsEvent"],n.makeArray(arguments)))},sendCartData:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendCartData"],n.makeArray(arguments)))},sendChoice:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendChoice"],n.makeArray(arguments)))},sendChoiceResponse:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendChoiceResponse"],n.makeArray(arguments)))},sendConferenceMessage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendConferenceMessage"],n.makeArray(arguments)))},sendDashboard:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDashboard"],n.makeArray(arguments)))},sendDataVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDataVisitor"],n.makeArray(arguments)))},sendDataVisitorWithRoom:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDataVisitorWithRoom"],n.makeArray(arguments)))},sendDelay:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDelay"],n.makeArray(arguments)))},sendDelayCallback:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDelayCallback"],n.makeArray(arguments)))},sendDeleteVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDeleteVisitor"],n.makeArray(arguments)))},sendDrag:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDrag"],n.makeArray(arguments)))},sendDrawing:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendDrawing"],n.makeArray(arguments)))},sendEnableClientTranslation:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendEnableClientTranslation"],n.makeArray(arguments)))},sendError:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendError"],n.makeArray(arguments)))},sendFormResponse:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendFormResponse"],n.makeArray(arguments)))},sendFormVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendFormVisitor"],n.makeArray(arguments)))},sendImage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendImage"],n.makeArray(arguments)))},sendInactivityVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendInactivityVisitor"],n.makeArray(arguments)))},sendInputValidation:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendInputValidation"],n.makeArray(arguments)))},sendInteractionsToAgent:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendInteractionsToAgent"],n.makeArray(arguments)))},sendMessage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendMessage"],n.makeArray(arguments)))},sendMessageRating:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendMessageRating"],n.makeArray(arguments)))},sendMessageRatingResponse:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendMessageRatingResponse"],n.makeArray(arguments)))},sendNode:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendNode"],n.makeArray(arguments)))},sendNote:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendNote"],n.makeArray(arguments)))},sendPin:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendPin"],n.makeArray(arguments)))},sendPoint:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendPoint"],n.makeArray(arguments)))},sendResetImage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendResetImage"],n.makeArray(arguments)))},sendRunAsyncScript:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendRunAsyncScript"],n.makeArray(arguments)))},sendSearchOrder:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSearchOrder"],n.makeArray(arguments)))},sendSearchTerm:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSearchTerm"],n.makeArray(arguments)))},sendSearchTermCatalog:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSearchTermCatalog"],n.makeArray(arguments)))},sendSideBubble:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSideBubble"],n.makeArray(arguments)))},sendSignalingMessage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSignalingMessage"],n.makeArray(arguments)))},sendStatus:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendStatus"],n.makeArray(arguments)))},sendStatusDomain:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendStatusDomain"],n.makeArray(arguments)))},sendSummary:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendSummary"],n.makeArray(arguments)))},sendSupervisorMessage:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["sendSupervisorMessage"],n.makeArray(arguments)))},sendUndo:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendUndo"],n.makeArray(arguments)))},sendViewChange:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendViewChange"],n.makeArray(arguments)))},sendVisitorCheckout:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendVisitorCheckout"],n.makeArray(arguments)))},sendVisitorOrderRequest:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendVisitorOrderRequest"],n.makeArray(arguments)))},sendVisitorOrderResult:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendVisitorOrderResult"],n.makeArray(arguments)))},sendVoiceForm:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendVoiceForm"],n.makeArray(arguments)))},sendZoom:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["SendZoom"],n.makeArray(arguments)))},transfer:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["Transfer"],n.makeArray(arguments)))},transferVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["TransferVisitor"],n.makeArray(arguments)))},transferVisitorFromBot:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["TransferVisitorFromBot"],n.makeArray(arguments)))},transferVisitorMobile:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["TransferVisitorMobile"],n.makeArray(arguments)))},updateStatusCallInDic:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["UpdateStatusCallInDic"],n.makeArray(arguments)))},updateVisitor:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["UpdateVisitor"],n.makeArray(arguments)))},updateVisitorMuteAudioInDic:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["UpdateVisitorMuteAudioInDic"],n.makeArray(arguments)))},updateVisitorMuteVideoInDic:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["updateVisitorMuteVideoInDic"],n.makeArray(arguments)))},videoAction:function(){return t.hubInterface.invoke.apply(t.hubInterface,n.merge(["VideoAction"],n.makeArray(arguments)))}},t};t.hub=n.hubConnection("/signalr",{useDefaultPath:!1});n.extend(t,t.hub.createHubProxies())}(window.jQuery,window),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n:n(jQuery)}(function(n){function e(r){var f=r||window.event,w=h.call(arguments,1),l=0,o=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(f),r.type="mousewheel","detail"in f&&(e=f.detail*-1),"wheelDelta"in f&&(e=f.wheelDelta),"wheelDeltaY"in f&&(e=f.wheelDeltaY),"wheelDeltaX"in f&&(o=f.wheelDeltaX*-1),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(o=e*-1,e=0),l=e===0?o:e,"deltaY"in f&&(e=f.deltaY*-1,l=e),"deltaX"in f&&(o=f.deltaX,e===0&&(l=o*-1)),e!==0||o!==0)return f.deltaMode===1?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,o*=v):f.deltaMode===2&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,o*=y),a=Math.max(Math.abs(e),Math.abs(o)),(!t||a<t)&&(t=a,s(f,a)&&(t/=40)),s(f,a)&&(l/=40,o/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),o=Math[o>=1?"floor":"ceil"](o/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=o,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,o,e),u&&clearTimeout(u),u=setTimeout(c,200),(n.event.dispatch||n.event.handle).apply(this,w)}function c(){t=null}function s(n,t){return i.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,u,t,f,i;if(n.event.fixHooks)for(f=o.length;f;)n.event.fixHooks[o[--f]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!0);else this.onmousewheel=e;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!0);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module!="undefined"&&module.exports?module.exports=n:n(jQuery,window,document)}(function(n){(function(t){var i=typeof define=="function"&&define.amd,r=typeof module!="undefined"&&module.exports,u="https:"==document.location.protocol?"https:":"http:";i||(r?require("jquery-mousewheel")(n):n.event.special.mousewheel||n("head").append(decodeURI("%3Cscript src="+u+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E")));t()})(function(){var h="mCustomScrollbar",t="mCS",it=".mCustomScrollbar",ot={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},pt=0,b={},p=window.attachEvent&&!window.addEventListener?1:0,e=!1,c,i=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],s={init:function(r){var r=n.extend(!0,{},ot,r),e=v.call(this),u,f;if(r.live){if(u=r.liveSelector||this.selector||it,f=n(u),r.live==="off"){k(u);return}b[u]=setTimeout(function(){f.mCustomScrollbar(r);r.live==="once"&&f.length&&k(u)},500)}else k(u);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":wt(r.axis),r.scrollInertia=r.scrollInertia>0&&r.scrollInertia<17?17:r.scrollInertia,typeof r.mouseWheel!="object"&&r.mouseWheel==!0&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=bt(r.scrollButtons.scrollType),st(r),n(e).each(function(){var u=n(this);if(!u.data(t)){u.data(t,{idx:++pt,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:u.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=u.data(t),f=e.opt,o=u.data("mcs-axis"),h=u.data("mcs-scrollbar-position"),c=u.data("mcs-theme");o&&(f.axis=o);h&&(f.scrollbarPosition=h);c&&(f.theme=c,st(f));kt.call(this);e&&f.callbacks.onCreate&&typeof f.callbacks.onCreate=="function"&&f.callbacks.onCreate.call(this);n("#mCSB_"+e.idx+"_container img:not(."+i[2]+")").addClass(i[2]);s.update.call(null,u)}})},update:function(r,f){var e=r||v.call(this);return n(e).each(function(){var s=n(this),c;if(s.data(t)){var e=s.data(t),r=e.opt,h=n("#mCSB_"+e.idx+"_container"),a=n("#mCSB_"+e.idx),l=[n("#mCSB_"+e.idx+"_dragger_vertical"),n("#mCSB_"+e.idx+"_dragger_horizontal")];if(!h.length)return;e.tweenRunning&&o(s);f&&e&&r.callbacks.onBeforeUpdate&&typeof r.callbacks.onBeforeUpdate=="function"&&r.callbacks.onBeforeUpdate.call(this);s.hasClass(i[3])&&s.removeClass(i[3]);s.hasClass(i[4])&&s.removeClass(i[4]);a.css("max-height","none");a.height()!==s.height()&&a.css("max-height",s.height());dt.call(this);r.axis==="y"||r.advanced.autoExpandHorizontalScroll||h.css("width",ht(h));e.overflowed=ii.call(this);ct.call(this);r.autoDraggerLength&&ni.call(this);ti.call(this);ri.call(this);c=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)];r.axis!=="x"&&(e.overflowed[0]?l[0].height()>l[0].parent().height()?y.call(this):(u(s,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(y.call(this),r.axis==="y"?g.call(this):r.axis==="yx"&&e.overflowed[1]&&u(s,c[1].toString(),{dir:"x",dur:0,overwrite:"none"})));r.axis!=="y"&&(e.overflowed[1]?l[1].width()>l[1].parent().width()?y.call(this):(u(s,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(y.call(this),r.axis==="x"?g.call(this):r.axis==="yx"&&e.overflowed[0]&&u(s,c[0].toString(),{dir:"y",dur:0,overwrite:"none"})));f&&e&&(f===2&&r.callbacks.onImageLoad&&typeof r.callbacks.onImageLoad=="function"?r.callbacks.onImageLoad.call(this):f===3&&r.callbacks.onSelectorChange&&typeof r.callbacks.onSelectorChange=="function"?r.callbacks.onSelectorChange.call(this):r.callbacks.onUpdate&&typeof r.callbacks.onUpdate=="function"&&r.callbacks.onUpdate.call(this));et.call(this)}})},scrollTo:function(i,r){if(typeof i!="undefined"&&i!=null){var f=v.call(this);return n(f).each(function(){var s=n(this);if(s.data(t)){var o=s.data(t),h=o.opt,c={trigger:"external",scrollInertia:h.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},f=n.extend(!0,{},c,r),e=ft.call(this,i),l=f.scrollInertia>0&&f.scrollInertia<17?17:f.scrollInertia;e[0]=at.call(this,e[0],"y");e[1]=at.call(this,e[1],"x");f.moveDragger&&(e[0]*=o.scrollRatio.y,e[1]*=o.scrollRatio.x);f.dur=wi()?0:l;setTimeout(function(){e[0]!==null&&typeof e[0]!="undefined"&&h.axis!=="x"&&o.overflowed[0]&&(f.dir="y",f.overwrite="all",u(s,e[0].toString(),f));e[1]!==null&&typeof e[1]!="undefined"&&h.axis!=="y"&&o.overflowed[1]&&(f.dir="x",f.overwrite="none",u(s,e[1].toString(),f))},f.timeout)}})}},stop:function(){var i=v.call(this);return n(i).each(function(){var i=n(this);i.data(t)&&o(i)})},disable:function(r){var u=v.call(this);return n(u).each(function(){var u=n(this),f;u.data(t)&&(f=u.data(t),et.call(this,"remove"),g.call(this),r&&y.call(this),ct.call(this,!0),u.addClass(i[3]))})},destroy:function(){var r=v.call(this);return n(r).each(function(){var f=n(this);if(f.data(t)){var u=f.data(t),e=u.opt,s=n("#mCSB_"+u.idx),o=n("#mCSB_"+u.idx+"_container"),c=n(".mCSB_"+u.idx+"_scrollbar");e.live&&k(e.liveSelector||n(r).selector);et.call(this,"remove");g.call(this);y.call(this);f.removeData(t);a(this,"mcs");c.remove();o.find("img."+i[2]).removeClass(i[2]);s.replaceWith(o.contents());f.removeClass(h+" _"+t+"_"+u.idx+" "+i[6]+" "+i[7]+" "+i[5]+" "+i[3]).addClass(i[4])}})}},v=function(){return typeof n(this)!="object"||n(this).length<1?it:this},st=function(t){t.autoDraggerLength=n.inArray(t.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1?!1:t.autoDraggerLength;t.autoExpandScrollbar=n.inArray(t.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1?!1:t.autoExpandScrollbar;t.scrollButtons.enable=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!1:t.scrollButtons.enable;t.autoHideScrollbar=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!0:t.autoHideScrollbar;t.scrollbarPosition=n.inArray(t.theme,["minimal","minimal-dark"])>-1?"outside":t.scrollbarPosition},k=function(n){b[n]&&(clearTimeout(b[n]),a(b,n))},wt=function(n){return n==="yx"||n==="xy"||n==="auto"?"yx":n==="x"||n==="horizontal"?"x":"y"},bt=function(n){return n==="stepped"||n==="pixels"||n==="step"||n==="click"?"stepped":"stepless"},kt=function(){var f=n(this),u=f.data(t),r=u.opt,l=r.autoExpandScrollbar?" "+i[1]+"_expand":"",o=["<div id='mCSB_"+u.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>","<div id='mCSB_"+u.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>"],v=r.axis==="yx"?"mCSB_vertical_horizontal":r.axis==="x"?"mCSB_horizontal":"mCSB_vertical",a=r.axis==="yx"?o[0]+o[1]:r.axis==="x"?o[1]:o[0],y=r.axis==="yx"?"<div id='mCSB_"+u.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",p=r.autoHideScrollbar?" "+i[6]:"",w=r.axis!=="x"&&u.langDir==="rtl"?" "+i[7]:"",c,s,e;r.setWidth&&f.css("width",r.setWidth);r.setHeight&&f.css("height",r.setHeight);r.setLeft=r.axis!=="y"&&u.langDir==="rtl"?"989999px":r.setLeft;f.addClass(h+" _"+t+"_"+u.idx+p+w).wrapInner("<div id='mCSB_"+u.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+v+"'><div id='mCSB_"+u.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir='"+u.langDir+"' /><\/div>");c=n("#mCSB_"+u.idx);s=n("#mCSB_"+u.idx+"_container");r.axis==="y"||r.advanced.autoExpandHorizontalScroll||s.css("width",ht(s));r.scrollbarPosition==="outside"?(f.css("position")==="static"&&f.css("position","relative"),f.css("overflow","visible"),c.addClass("mCSB_outside").after(a)):(c.addClass("mCSB_inside").append(a),s.wrap(y));gt.call(this);e=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")];e[0].css("min-height",e[0].height());e[1].css("min-width",e[1].width())},ht=function(t){var i=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return n(this).outerWidth(!0)}).get())],r=t.parent().width();return i[0]>r?i[0]:i[1]>r?i[1]:"100%"},dt=function(){var e=n(this),f=e.data(t),r=f.opt,i=n("#mCSB_"+f.idx+"_container"),u;r.advanced.autoExpandHorizontalScroll&&r.axis!=="y"&&(i.css({width:"auto","min-width":0,"overflow-x":"scroll"}),u=Math.ceil(i[0].scrollWidth),r.advanced.autoExpandHorizontalScroll===3||r.advanced.autoExpandHorizontalScroll!==2&&u>i.parent().width()?i.css({width:u,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap())},gt=function(){var s=n(this),o=s.data(t),u=o.opt,h=n(".mCSB_"+o.idx+"_scrollbar:first"),f=tt(u.scrollButtons.tabindex)?"tabindex='"+u.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+i[13]+"' "+f+" />","<a href='#' class='"+i[14]+"' "+f+" />","<a href='#' class='"+i[15]+"' "+f+" />","<a href='#' class='"+i[16]+"' "+f+" />"],e=[u.axis==="x"?r[2]:r[0],u.axis==="x"?r[3]:r[1],r[2],r[3]];u.scrollButtons.enable&&h.prepend(e[0]).append(e[1]).next(".mCSB_scrollTools").prepend(e[2]).append(e[3])},ni=function(){var s=n(this),u=s.data(t),f=n("#mCSB_"+u.idx),e=n("#mCSB_"+u.idx+"_container"),r=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")],o=[f.height()/e.outerHeight(!1),f.width()/e.outerWidth(!1)],i=[parseInt(r[0].css("min-height")),Math.round(o[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(o[1]*r[1].parent().width())],h=p&&i[1]<i[0]?i[0]:i[1],c=p&&i[3]<i[2]?i[2]:i[3];r[0].css({height:h,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":i[0]+"px"});r[1].css({width:c,"max-width":r[1].parent().width()-10})},ti=function(){var s=n(this),i=s.data(t),u=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),r=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e=[f.outerHeight(!1)-u.height(),f.outerWidth(!1)-u.width()],o=[e[0]/(r[0].parent().height()-r[0].height()),e[1]/(r[1].parent().width()-r[1].width())];i.scrollRatio={y:o[0],x:o[1]}},d=function(n,t,r){var f=r?i[0]+"_expanded":"",u=n.closest(".mCSB_scrollTools");t==="active"?(n.toggleClass(i[0]+" "+f),u.toggleClass(i[1]),n[0]._draggable=n[0]._draggable?0:1):n[0]._draggable||(t==="hide"?(n.removeClass(i[0]),u.removeClass(i[1])):(n.addClass(i[0]),u.addClass(i[1])))},ii=function(){var h=n(this),r=h.data(t),e=n("#mCSB_"+r.idx),i=n("#mCSB_"+r.idx+"_container"),u=r.overflowed==null?i.height():i.outerHeight(!1),f=r.overflowed==null?i.width():i.outerWidth(!1),o=i[0].scrollHeight,s=i[0].scrollWidth;return o>u&&(u=o),s>f&&(f=s),[u>e.height(),f>e.width()]},y=function(){var r=n(this),i=r.data(t),f=i.opt,c=n("#mCSB_"+i.idx),s=n("#mCSB_"+i.idx+"_container"),h=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e;o(r);(f.axis!=="x"&&!i.overflowed[0]||f.axis==="y"&&i.overflowed[0])&&(h[0].add(s).css("top",0),u(r,"_resetY"));(f.axis!=="y"&&!i.overflowed[1]||f.axis==="x"&&i.overflowed[1])&&(e=dx=0,i.langDir==="rtl"&&(e=c.width()-s.outerWidth(!1),dx=Math.abs(e/i.scrollRatio.x)),s.css("left",e),h[1].css("left",dx),u(r,"_resetX"))},ri=function(){var u=n(this),r=u.data(t),i=r.opt,e;if(!r.bindEvents){if(ui.call(this),i.contentTouchScroll&&fi.call(this),ei.call(this),i.mouseWheel.enable){function f(){e=setTimeout(function(){n.event.special.mousewheel?(clearTimeout(e),oi.call(u[0])):f()},100)}f()}hi.call(this);li.call(this);i.advanced.autoScrollOnFocus&&ci.call(this);i.scrollButtons.enable&&ai.call(this);i.keyboard.enable&&vi.call(this);r.bindEvents=!0}},g=function(){var f=n(this),r=f.data(t),u=r.opt,o=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",e=n("#mCSB_"+r.idx+",#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,"+s+" ."+i[12]+",#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal,"+s+">a"),h=n("#mCSB_"+r.idx+"_container");u.advanced.releaseDraggableSelectors&&e.add(n(u.advanced.releaseDraggableSelectors));u.advanced.extraDraggableSelectors&&e.add(n(u.advanced.extraDraggableSelectors));r.bindEvents&&(n(document).add(n(!l()||top.document)).unbind("."+o),e.each(function(){n(this).unbind("."+o)}),clearTimeout(f[0]._focusTimeout),a(f[0],"_focusTimeout"),clearTimeout(r.sequential.step),a(r.sequential,"step"),clearTimeout(h[0].onCompleteTimeout),a(h[0],"onCompleteTimeout"),r.bindEvents=!1)},ct=function(r){var h=n(this),u=h.data(t),o=u.opt,c=n("#mCSB_"+u.idx+"_container_wrapper"),f=c.length?c:n("#mCSB_"+u.idx+"_container"),e=[n("#mCSB_"+u.idx+"_scrollbar_vertical"),n("#mCSB_"+u.idx+"_scrollbar_horizontal")],s=[e[0].find(".mCSB_dragger"),e[1].find(".mCSB_dragger")];o.axis!=="x"&&(u.overflowed[0]&&!r?(e[0].add(s[0]).add(e[0].children("a")).css("display","block"),f.removeClass(i[8]+" "+i[10])):(o.alwaysShowScrollbar?(o.alwaysShowScrollbar!==2&&s[0].css("display","none"),f.removeClass(i[10])):(e[0].css("display","none"),f.addClass(i[10])),f.addClass(i[8])));o.axis!=="y"&&(u.overflowed[1]&&!r?(e[1].add(s[1]).add(e[1].children("a")).css("display","block"),f.removeClass(i[9]+" "+i[11])):(o.alwaysShowScrollbar?(o.alwaysShowScrollbar!==2&&s[1].css("display","none"),f.removeClass(i[11])):(e[1].css("display","none"),f.addClass(i[11])),f.addClass(i[9])));u.overflowed[0]||u.overflowed[1]?h.removeClass(i[5]):h.addClass(i[5])},r=function(t){var e=t.type,i=t.target.ownerDocument!==document&&frameElement!==null?[n(frameElement).offset().top,n(frameElement).offset().left]:null,u=l()&&t.target.ownerDocument!==top.document&&frameElement!==null?[n(t.view.frameElement).offset().top,n(t.view.frameElement).offset().left]:[0,0],r,f;switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[t.originalEvent.pageY-i[0]+u[0],t.originalEvent.pageX-i[1]+u[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":return r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],f=t.originalEvent.touches.length||t.originalEvent.changedTouches.length,t.target.ownerDocument!==document?[r.screenY,r.screenX,f>1]:[r.pageY,r.pageX,f>1];default:return i?[t.pageY-i[0]+u[0],t.pageX-i[1]+u[1],!1]:[t.pageY,t.pageX,!1]}},ui=function(){function k(n,t,r,f){var e,o;w[0].idleTimer=h.scrollInertia<233?250:0;i.attr("id")===y[1]?(e="x",o=(i[0].offsetLeft-t+f)*s.scrollRatio.x):(e="y",o=(i[0].offsetTop-n+r)*s.scrollRatio.y);u(v,o.toString(),{dir:e,drag:!0})}var v=n(this),s=v.data(t),h=s.opt,f=t+"_"+s.idx,y=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],w=n("#mCSB_"+s.idx+"_container"),b=n("#"+y[0]+",#"+y[1]),i,c,a,g=h.advanced.releaseDraggableSelectors?b.add(n(h.advanced.releaseDraggableSelectors)):b,nt=h.advanced.extraDraggableSelectors?n(!l()||top.document).add(n(h.advanced.extraDraggableSelectors)):n(!l()||top.document);b.bind("contextmenu."+f,function(n){n.preventDefault()}).bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),yt(t)){e=!0;p&&(document.onselectstart=function(){return!1});lt.call(w,!1);o(v);i=n(this);var u=i.offset(),f=r(t)[0]-u.top,s=r(t)[1]-u.left,l=i.height()+u.top,y=i.width()+u.left;f<l&&f>0&&s<y&&s>0&&(c=f,a=s);d(i,"active",h.autoExpandScrollbar)}}).bind("touchmove."+f,function(n){n.stopImmediatePropagation();n.preventDefault();var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;k(c,a,u,f)});n(document).add(nt).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(n){if(i){var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;if(c===u&&a===f)return;k(c,a,u,f)}}).add(g).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(){i&&(d(i,"active",h.autoExpandScrollbar),i=null);e=!1;p&&(document.onselectstart=null);lt.call(w,!0)})},fi=function(){function dt(n){if(!nt(n)||e||r(n)[2]){c=0;return}c=1;ft=0;et=0;st=1;k.removeClass("mCS_touch_action");var t=b.offset();d=r(n)[0]-t.top;g=r(n)[1]-t.left;v=[r(n)[0],r(n)[1]]}function gt(n){var c,l,a,y;if(nt(n)&&!e&&!r(n)[2]&&(f.documentTouchScroll||n.preventDefault(),n.stopImmediatePropagation(),!et||ft)&&st){pt=w();var o=tt.offset(),t=r(n)[0]-o.top,u=r(n)[1]-o.left,h="mcsLinearOut";rt.push(t);ut.push(u);v[2]=Math.abs(r(n)[0]-v[0]);v[3]=Math.abs(r(n)[1]-v[1]);i.overflowed[0]&&(c=it[0].parent().height()-it[0].height(),l=d-t>0&&t-d>-(c*i.scrollRatio.y)&&(v[3]*2<v[2]||f.axis==="yx"));i.overflowed[1]&&(a=it[1].parent().width()-it[1].width(),y=g-u>0&&u-g>-(a*i.scrollRatio.x)&&(v[2]*2<v[3]||f.axis==="yx"));l||y?(kt||n.preventDefault(),ft=1):(et=1,k.addClass("mCS_touch_action"));kt&&n.preventDefault();s=f.axis==="yx"?[d-t,g-u]:f.axis==="x"?[null,g-u]:[d-t,null];b[0].idleTimer=250;i.overflowed[0]&&ot(s[0],wt,h,"y","all",!0);i.overflowed[1]&&ot(s[1],wt,h,"x",lt,!0)}}function ni(n){if(!nt(n)||e||r(n)[2]){c=0;return}c=1;n.stopImmediatePropagation();o(k);yt=w();var t=tt.offset();at=r(n)[0]-t.top;vt=r(n)[1]-t.left;rt=[];ut=[]}function ti(n){var t,u,h;if(nt(n)&&!e&&!r(n)[2]){st=0;n.stopImmediatePropagation();ft=0;et=0;ht=w();var c=tt.offset(),l=r(n)[0]-c.top,v=r(n)[1]-c.left;if(!(ht-pt>30)){a=1e3/(ht-yt);var p="mcsEaseOut",o=a<2.5,k=o?[rt[rt.length-2],ut[ut.length-2]]:[0,0];y=o?[l-k[0],v-k[1]]:[l-at,v-vt];t=[Math.abs(y[0]),Math.abs(y[1])];a=o?[Math.abs(y[0]/4),Math.abs(y[1]/4)]:[a,a];u=[Math.abs(b[0].offsetTop)-y[0]*ii(t[0]/a[0],a[0]),Math.abs(b[0].offsetLeft)-y[1]*ii(t[1]/a[1],a[1])];s=f.axis==="yx"?[u[0],u[1]]:f.axis==="x"?[null,u[1]]:[u[0],null];ct=[t[0]*4+f.scrollInertia,t[1]*4+f.scrollInertia];h=parseInt(f.contentTouchScroll)||0;s[0]=t[0]>h?s[0]:0;s[1]=t[1]>h?s[1]:0;i.overflowed[0]&&ot(s[0],ct[0],p,"y",lt,!1);i.overflowed[1]&&ot(s[1],ct[1],p,"x",lt,!1)}}}function ii(n,t){var i=[t*1.5,t*2,t/1.5,t/2];return n>90?t>4?i[0]:i[3]:n>60?t>3?i[3]:i[2]:n>30?t>8?i[1]:t>6?i[0]:t>4?t:i[2]:t>8?t:i[3]}function ot(n,t,i,r,f,e){n&&u(k,n.toString(),{dur:t,scrollEasing:i,dir:r,overwrite:f,drag:e})}var k=n(this),i=k.data(t),f=i.opt,h=t+"_"+i.idx,tt=n("#mCSB_"+i.idx),b=n("#mCSB_"+i.idx+"_container"),it=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],st,d,g,at,vt,rt=[],ut=[],yt,pt,ht,y,a,s,wt=0,ct,lt=f.axis==="yx"?"none":"all",v=[],ft,et,bt=b.find("iframe"),p=["touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,"touchmove."+h+" pointermove."+h+" MSPointerMove."+h,"touchend."+h+" pointerup."+h+" MSPointerUp."+h],kt=document.body.style.touchAction!==undefined&&document.body.style.touchAction!=="";b.bind(p[0],function(n){dt(n)}).bind(p[1],function(n){gt(n)});tt.bind(p[0],function(n){ni(n)}).bind(p[2],function(n){ti(n)});bt.length&&bt.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(p[0],function(n){dt(n);ni(n)}).bind(p[1],function(n){gt(n)}).bind(p[2],function(n){ti(n)})})})},ei=function(){function y(){return window.getSelection?window.getSelection().toString():document.selection&&document.selection.type!="Control"?document.selection.createRange().text:0}function f(n,t,i){l.type=i&&u?"stepped":"stepless";l.scrollAmount=10;ut(a,n,t,"mcsLinearOut",i?60:null)}var a=n(this),i=a.data(t),v=i.opt,l=i.sequential,s=t+"_"+i.idx,o=n("#mCSB_"+i.idx+"_container"),h=o.parent(),u;o.bind("mousedown."+s,function(){c||u||(u=1,e=!0)}).add(document).bind("mousemove."+s,function(n){if(!c&&u&&y()){var s=o.offset(),t=r(n)[0]-s.top+o[0].offsetTop,e=r(n)[1]-s.left+o[0].offsetLeft;t>0&&t<h.height()&&e>0&&e<h.width()?l.step&&f("off",null,"stepped"):(v.axis!=="x"&&i.overflowed[0]&&(t<0?f("on",38):t>h.height()&&f("on",40)),v.axis!=="y"&&i.overflowed[1]&&(e<0?f("on",37):e>h.width()&&f("on",39)))}}).bind("mouseup."+s+" dragend."+s,function(){c||(u&&(u=0,f("off",null)),e=!1)})},oi=function(){function a(t,h){var v,y;if(o(s),!si(s,t.target)){if(v=i.mouseWheel.deltaFactor!=="auto"?parseInt(i.mouseWheel.deltaFactor):p&&t.deltaFactor<100?100:t.deltaFactor||100,y=i.scrollInertia,i.axis==="x"||i.mouseWheel.axis==="x")var a="x",l=[Math.round(v*r.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],w=i.mouseWheel.scrollAmount!=="auto"?l[1]:l[0]>=e.width()?e.width()*.9:l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetLeft),b=f[1][0].offsetLeft,d=f[1].parent().width()-f[1].width(),c=i.mouseWheel.axis==="y"?t.deltaY||h:t.deltaX;else var a="y",l=[Math.round(v*r.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],w=i.mouseWheel.scrollAmount!=="auto"?l[1]:l[0]>=e.height()?e.height()*.9:l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetTop),b=f[0][0].offsetTop,d=f[0].parent().height()-f[0].height(),c=t.deltaY||h;(a!=="y"||r.overflowed[0])&&(a!=="x"||r.overflowed[1])&&((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(c=-c),i.mouseWheel.normalizeDelta&&(c=c<0?-1:1),(c>0&&b!==0||c<0&&b!==d||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!i.mouseWheel.normalizeDelta&&(w=t.deltaFactor,y=17),u(s,(k-c*w).toString(),{dir:a,dur:y}))}}if(n(this).data(t)){var s=n(this),r=s.data(t),i=r.opt,h=t+"_"+r.idx,e=n("#mCSB_"+r.idx),f=[n("#mCSB_"+r.idx+"_dragger_vertical"),n("#mCSB_"+r.idx+"_dragger_horizontal")],c=n("#mCSB_"+r.idx+"_container").find("iframe");c.length&&c.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind("mousewheel."+h,function(n,t){a(n,t)})})});e.bind("mousewheel."+h,function(n,t){a(n,t)})}},rt={},l=function(t){var u=!1,i=!1,f=null,r;if(t===undefined?i="#empty":n(t).attr("id")!==undefined&&(i=n(t).attr("id")),i!==!1&&rt[i]!==undefined)return rt[i];if(t){try{r=t.contentDocument||t.contentWindow.document;f=r.body.innerHTML}catch(e){}u=f!==null}else{try{r=top.document;f=r.body.innerHTML}catch(e){}u=f!==null}return i!==!1&&(rt[i]=u),u},lt=function(n){var t=this.find("iframe"),i;t.length&&(i=n?"auto":"none",t.css("pointer-events",i))},si=function(i,r){var u=r.nodeName.toLowerCase(),f=i.data(t).opt.mouseWheel.disableOver;return n.inArray(u,f)>-1&&!(n.inArray(u,["select","textarea"])>-1&&!n(r).is(":focus"))},hi=function(){var s=n(this),f=s.data(t),r=t+"_"+f.idx,h=n("#mCSB_"+f.idx+"_container"),l=h.parent(),a=n(".mCSB_"+f.idx+"_scrollbar ."+i[12]),c;a.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(t){e=!0;n(t.target).hasClass("mCSB_dragger")||(c=1)}).bind("touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(){e=!1}).bind("click."+r,function(t){var r,e;if(c&&(c=0,n(t.target).hasClass(i[12])||n(t.target).hasClass("mCSB_draggerRail"))){if(o(s),r=n(this),e=r.find(".mCSB_dragger"),r.parent(".mCSB_scrollTools_horizontal").length>0){if(!f.overflowed[1])return;var v="x",a=t.pageX>e.offset().left?-1:1,y=Math.abs(h[0].offsetLeft)-a*l.width()*.9}else{if(!f.overflowed[0])return;var v="y",a=t.pageY>e.offset().top?-1:1,y=Math.abs(h[0].offsetTop)-a*l.height()*.9}u(s,y.toString(),{dir:v,scrollEasing:"mcsEaseInOut"})}})},ci=function(){var i=n(this),s=i.data(t),e=s.opt,c=t+"_"+s.idx,r=n("#mCSB_"+s.idx+"_container"),h=r.parent();r.bind("focusin."+c,function(){var t=n(document.activeElement),c=r.find(".mCustomScrollBox").length,s=0;t.is(e.advanced.autoScrollOnFocus)&&(o(i),clearTimeout(i[0]._focusTimeout),i[0]._focusTimer=c?(s+17)*c:0,i[0]._focusTimeout=setTimeout(function(){var n=[f(t)[0],f(t)[1]],o=[r[0].offsetTop,r[0].offsetLeft],c=[o[0]+n[0]>=0&&o[0]+n[0]<h.height()-t.outerHeight(!1),o[1]+n[1]>=0&&o[0]+n[1]<h.width()-t.outerWidth(!1)],l=e.axis==="yx"&&!c[0]&&!c[1]?"none":"all";e.axis==="x"||c[0]||u(i,n[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s});e.axis==="y"||c[1]||u(i,n[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s})},i[0]._focusTimer))})},li=function(){var u=n(this),i=u.data(t),f=t+"_"+i.idx,r=n("#mCSB_"+i.idx+"_container").parent();r.bind("scroll."+f,function(){(r.scrollTop()!==0||r.scrollLeft()!==0)&&n(".mCSB_"+i.idx+"_scrollbar").css("visibility","hidden")})},ai=function(){var f=n(this),r=f.data(t),o=r.opt,u=r.sequential,i=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",h=n(s+">a");h.bind("contextmenu."+i,function(n){n.preventDefault()}).bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i+" mouseup."+i+" touchend."+i+" pointerup."+i+" MSPointerUp."+i+" mouseout."+i+" pointerout."+i+" MSPointerOut."+i+" click."+i,function(t){function s(n,t){u.scrollAmount=o.scrollButtons.scrollAmount;ut(f,n,t)}if(t.preventDefault(),yt(t)){var i=n(this).attr("class");u.type=o.scrollButtons.scrollType;switch(t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if(u.type==="stepped")return;e=!0;r.tweenRunning=!1;s("on",i);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if(u.type==="stepped")return;e=!1;u.dir&&s("off",i);break;case"click":if(u.type!=="stepped"||r.tweenRunning)return;s("on",i)}}})},vi=function(){function p(t){function w(n,t){(s.type=r.keyboard.scrollType,s.scrollAmount=r.keyboard.scrollAmount,s.type==="stepped"&&i.tweenRunning)||ut(e,n,t)}var c,y,p,l,v;switch(t.type){case"blur":i.tweenRunning&&s.dir&&w("off",null);break;case"keydown":case"keyup":if(c=t.keyCode?t.keyCode:t.which,y="on",r.axis!=="x"&&(c===38||c===40)||r.axis!=="y"&&(c===37||c===39)){if((c===38||c===40)&&!i.overflowed[0]||(c===37||c===39)&&!i.overflowed[1])return;t.type==="keyup"&&(y="off");n(document.activeElement).is(a)||(t.preventDefault(),t.stopImmediatePropagation(),w(y,c))}else c===33||c===34?((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),t.type==="keyup"&&(o(e),p=c===34?-1:1,r.axis==="x"||r.axis==="yx"&&i.overflowed[1]&&!i.overflowed[0]?(l="x",v=Math.abs(f[0].offsetLeft)-p*h.width()*.9):(l="y",v=Math.abs(f[0].offsetTop)-p*h.height()*.9),u(e,v.toString(),{dir:l,scrollEasing:"mcsEaseInOut"}))):(c===35||c===36)&&(n(document.activeElement).is(a)||((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),t.type==="keyup"&&(r.axis==="x"||r.axis==="yx"&&i.overflowed[1]&&!i.overflowed[0]?(l="x",v=c===35?Math.abs(h.width()-f.outerWidth(!1)):0):(l="y",v=c===35?Math.abs(h.height()-f.outerHeight(!1)):0),u(e,v.toString(),{dir:l,scrollEasing:"mcsEaseInOut"}))))}}var e=n(this),i=e.data(t),r=i.opt,s=i.sequential,c=t+"_"+i.idx,w=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),h=f.parent(),a="input,textarea,select,datalist,keygen,[contenteditable='true']",v=f.find("iframe"),y=["blur."+c+" keydown."+c+" keyup."+c];v.length&&v.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(y[0],function(n){p(n)})})});w.attr("tabindex","0").bind(y[0],function(n){p(n)})},ut=function(r,f,e,s,h){function y(n){l.snapAmount&&(c.scrollAmount=(l.snapAmount instanceof Array)?c.dir[0]==="x"?l.snapAmount[1]:l.snapAmount[0]:l.snapAmount);var i=c.type!=="stepped",f=h?h:n?i?b/1.5:k:1e3/60,e=n?i?7.5:40:2.5,t=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],o=[v.scrollRatio.y>10?10:v.scrollRatio.y,v.scrollRatio.x>10?10:v.scrollRatio.x],w=c.dir[0]==="x"?t[1]+c.dir[1]*o[1]*e:t[0]+c.dir[1]*o[0]*e,d=c.dir[0]==="x"?t[1]+c.dir[1]*parseInt(c.scrollAmount):t[0]+c.dir[1]*parseInt(c.scrollAmount),a=c.scrollAmount!=="auto"?d:w,g=s?s:n?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",nt=n?!0:!1;if(n&&f<17&&(a=c.dir[0]==="x"?t[1]:t[0]),u(r,a.toString(),{dir:c.dir[0],scrollEasing:g,dur:f,onComplete:nt}),n){c.dir=!1;return}clearTimeout(c.step);c.step=setTimeout(function(){y()},f)}function d(){clearTimeout(c.step);a(c,"step");o(r)}var v=r.data(t),l=v.opt,c=v.sequential,p=n("#mCSB_"+v.idx+"_container"),w=c.type==="stepped"?!0:!1,b=l.scrollInertia<26?26:l.scrollInertia,k=l.scrollInertia<1?17:l.scrollInertia;switch(f){case"on":if(c.dir=[e===i[16]||e===i[15]||e===39||e===37?"x":"y",e===i[13]||e===i[15]||e===38||e===37?-1:1],o(r),tt(e)&&c.type==="stepped")return;y(w);break;case"off":d();(w||v.tweenRunning&&c.dir)&&y(!0)}},ft=function(i){var u=n(this).data(t).opt,r=[];return typeof i=="function"&&(i=i()),i instanceof Array?r=i.length>1?[i[0],i[1]]:u.axis==="x"?[null,i[0]]:[i[0],null]:(r[0]=i.y?i.y:i.x||u.axis==="x"?null:i,r[1]=i.x?i.x:i.y||u.axis==="y"?null:i),typeof r[0]=="function"&&(r[0]=r[0]()),typeof r[1]=="function"&&(r[1]=r[1]()),r},at=function(i,r){var h,e;if(i!=null&&typeof i!="undefined"){var c=n(this),l=c.data(t),v=l.opt,u=n("#mCSB_"+l.idx+"_container"),o=u.parent(),y=typeof i;r||(r=v.axis==="x"?"x":"y");var p=r==="x"?u.outerWidth(!1)-o.width():u.outerHeight(!1)-o.height(),a=r==="x"?u[0].offsetLeft:u[0].offsetTop,w=r==="x"?"left":"top";switch(y){case"function":return i();case"object":return(e=i.jquery?i:n(i),!e.length)?void 0:r==="x"?f(e)[1]:f(e)[0];case"string":case"number":if(tt(i))return Math.abs(i);if(i.indexOf("%")!==-1)return Math.abs(p*parseInt(i)/100);if(i.indexOf("-=")!==-1)return Math.abs(a-parseInt(i.split("-=")[1]));if(i.indexOf("+=")!==-1)return h=a+parseInt(i.split("+=")[1]),h>=0?0:Math.abs(h);if(i.indexOf("px")!==-1&&tt(i.split("px")[0]))return Math.abs(i.split("px")[0]);if(i==="top"||i==="left")return 0;if(i==="bottom")return Math.abs(o.height()-u.outerHeight(!1));if(i==="right")return Math.abs(o.width()-u.outerWidth(!1));if(i==="first"||i==="last")return e=u.find(":"+i),r==="x"?f(e)[1]:f(e)[0];if(n(i).length)return r==="x"?f(n(i))[1]:f(n(i))[0];u.css(w,i);s.update.call(null,c[0]);return}}},et=function(r){function c(){if(clearTimeout(e[0].autoUpdate),o.parents("html").length===0){o=null;return}e[0].autoUpdate=setTimeout(function(){if(f.advanced.updateOnSelectorChange&&(u.poll.change.n=v(),u.poll.change.n!==u.poll.change.o)){u.poll.change.o=u.poll.change.n;h(3);return}if(f.advanced.updateOnContentResize){if(u.poll.size.n=o[0].scrollHeight+o[0].scrollWidth+e[0].offsetHeight+o[0].offsetHeight+o[0].offsetWidth,u.poll.size.n>u.poll.size.o+1||u.poll.size.n<u.poll.size.o-1){u.poll.size.o=u.poll.size.n;h(1);return}u.poll.size.n!==u.poll.size.o&&(u.poll.size.o=u.poll.size.n)}if(f.advanced.updateOnImageLoad&&!(f.advanced.updateOnImageLoad==="auto"&&f.axis==="y")&&(u.poll.img.n=e.find("img").length,u.poll.img.n!==u.poll.img.o)){u.poll.img.o=u.poll.img.n;e.find("img").each(function(){l(this)});return}(f.advanced.updateOnSelectorChange||f.advanced.updateOnContentResize||f.advanced.updateOnImageLoad)&&c()},f.advanced.autoUpdateTimeout)}function l(t){function u(n,t){return function(){return t.apply(n,arguments)}}function f(){this.onload=null;n(t).addClass(i[2]);h(2)}if(n(t).hasClass(i[2])){h();return}var r=new Image;r.onload=u(r,f);r.src=t.src}function v(){f.advanced.updateOnSelectorChange===!0&&(f.advanced.updateOnSelectorChange="*");var n=0,t=e.find(f.advanced.updateOnSelectorChange);return f.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){n+=this.offsetHeight+this.offsetWidth}),n}function h(n){clearTimeout(e[0].autoUpdate);s.update.call(null,o[0],n)}var o=n(this),u=o.data(t),f=u.opt,e=n("#mCSB_"+u.idx+"_container");if(r){clearTimeout(e[0].autoUpdate);a(e[0],"autoUpdate");return}c()},yi=function(n,t,i){return Math.round(n/t)*t-i},o=function(i){var r=i.data(t),u=n("#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal");u.each(function(){pi.call(this)})},u=function(i,r,u){function c(n){return f&&e.callbacks[n]&&typeof e.callbacks[n]=="function"}function ot(){return[e.callbacks.alwaysTriggerOffsets||p>=l[0]+a,e.callbacks.alwaysTriggerOffsets||p<=-v]}function y(){var n=[o[0].offsetTop,o[0].offsetLeft],t=[h[0].offsetTop,h[0].offsetLeft],r=[o.outerHeight(!1),o.outerWidth(!1)],f=[w.height(),w.width()];i[0].mcs={content:o,top:n[0],left:n[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(n[0])/(Math.abs(r[0])-f[0])),leftPct:Math.round(100*Math.abs(n[1])/(Math.abs(r[1])-f[1])),direction:u.dir}}var f=i.data(t),e=f.opt,et={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:e.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},u=n.extend(et,u),g=[u.dur,u.drag?0:u.dur],w=n("#mCSB_"+f.idx),o=n("#mCSB_"+f.idx+"_container"),b=o.parent(),nt=e.callbacks.onTotalScrollOffset?ft.call(i,e.callbacks.onTotalScrollOffset):[0,0],tt=e.callbacks.onTotalScrollBackOffset?ft.call(i,e.callbacks.onTotalScrollBackOffset):[0,0],it;if(f.trigger=u.trigger,(b.scrollTop()!==0||b.scrollLeft()!==0)&&(n(".mCSB_"+f.idx+"_scrollbar").css("visibility","visible"),b.scrollTop(0).scrollLeft(0)),r!=="_resetY"||f.contentReset.y||(c("onOverflowYNone")&&e.callbacks.onOverflowYNone.call(i[0]),f.contentReset.y=1),r!=="_resetX"||f.contentReset.x||(c("onOverflowXNone")&&e.callbacks.onOverflowXNone.call(i[0]),f.contentReset.x=1),r!=="_resetY"&&r!=="_resetX"){(f.contentReset.y||!i[0].mcs)&&f.overflowed[0]&&(c("onOverflowY")&&e.callbacks.onOverflowY.call(i[0]),f.contentReset.x=null);(f.contentReset.x||!i[0].mcs)&&f.overflowed[1]&&(c("onOverflowX")&&e.callbacks.onOverflowX.call(i[0]),f.contentReset.x=null);e.snapAmount&&(it=(e.snapAmount instanceof Array)?u.dir==="x"?e.snapAmount[1]:e.snapAmount[0]:e.snapAmount,r=yi(r,it,e.snapOffset));switch(u.dir){case"x":var h=n("#mCSB_"+f.idx+"_dragger_horizontal"),k="left",p=o[0].offsetLeft,l=[w.width()-o.outerWidth(!1),h.parent().width()-h.width()],s=[r,r===0?0:r/f.scrollRatio.x],a=nt[1],v=tt[1],rt=a>0?a/f.scrollRatio.x:0,ut=v>0?v/f.scrollRatio.x:0;break;case"y":var h=n("#mCSB_"+f.idx+"_dragger_vertical"),k="top",p=o[0].offsetTop,l=[w.height()-o.outerHeight(!1),h.parent().height()-h.height()],s=[r,r===0?0:r/f.scrollRatio.y],a=nt[0],v=tt[0],rt=a>0?a/f.scrollRatio.y:0,ut=v>0?v/f.scrollRatio.y:0}(s[1]<0||s[0]===0&&s[1]===0?s=[0,0]:s[1]>=l[1]?s=[l[0],l[1]]:s[0]=-s[0],i[0].mcs||(y(),c("onInit")&&e.callbacks.onInit.call(i[0])),clearTimeout(o[0].onCompleteTimeout),vt(h[0],k,Math.round(s[1]),g[1],u.scrollEasing),!f.tweenRunning&&(p===0&&s[0]>=0||p===l[0]&&s[0]<=l[0]))||vt(o[0],k,Math.round(s[0]),g[0],u.scrollEasing,u.overwrite,{onStart:function(){u.callbacks&&u.onStart&&!f.tweenRunning&&(c("onScrollStart")&&(y(),e.callbacks.onScrollStart.call(i[0])),f.tweenRunning=!0,d(h),f.cbOffsets=ot())},onUpdate:function(){u.callbacks&&u.onUpdate&&c("whileScrolling")&&(y(),e.callbacks.whileScrolling.call(i[0]))},onComplete:function(){if(u.callbacks&&u.onComplete){e.axis==="yx"&&clearTimeout(o[0].onCompleteTimeout);var n=o[0].idleTimer||0;o[0].onCompleteTimeout=setTimeout(function(){c("onScroll")&&(y(),e.callbacks.onScroll.call(i[0]));c("onTotalScroll")&&s[1]>=l[1]-rt&&f.cbOffsets[0]&&(y(),e.callbacks.onTotalScroll.call(i[0]));c("onTotalScrollBack")&&s[1]<=ut&&f.cbOffsets[1]&&(y(),e.callbacks.onTotalScrollBack.call(i[0]));f.tweenRunning=!1;o[0].idleTimer=0;d(h,"hide")},n)}}})}},vt=function(n,t,i,r,u,f,e){function y(){o.stop||(s||b.call(),s=w()-g,p(),s>=o.time&&(o.time=s>o.time?s+h-(s-o.time):s+h-1,o.time<s+1&&(o.time=s+1)),o.time<r?o.id=l(y):d.call())}function p(){r>0?(o.currVal=it(o.time,c,v,r,u),a[t]=Math.round(o.currVal)+"px"):a[t]=i+"px";k.call()}function nt(){h=1e3/60;o.time=s+h;l=window.requestAnimationFrame?window.requestAnimationFrame:function(n){return p(),setTimeout(n,.01)};o.id=l(y)}function tt(){o.id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(o.id):clearTimeout(o.id),o.id=null)}function it(n,t,i,r,u){switch(u){case"linear":case"mcsLinear":return i*n/r+t;case"mcsLinearOut":return n/=r,n--,i*Math.sqrt(1-n*n)+t;case"easeInOutSmooth":return(n/=r/2,n<1)?i/2*n*n+t:(n--,-i/2*(n*(n-2)-1)+t);case"easeInOutStrong":return(n/=r/2,n<1)?i/2*Math.pow(2,10*(n-1))+t:(n--,i/2*(-Math.pow(2,-10*n)+2)+t);case"easeInOut":case"mcsEaseInOut":return(n/=r/2,n<1)?i/2*n*n*n+t:(n-=2,i/2*(n*n*n+2)+t);case"easeOutSmooth":return n/=r,n--,-i*(n*n*n*n-1)+t;case"easeOutStrong":return i*(-Math.pow(2,-10*n/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var f=(n/=r)*n,e=f*n;return t+i*(.499999999999997*e*f+-2.5*f*f+5.5*e+-6.5*f+4*n)}}var v;n._mTween||(n._mTween={top:{},left:{}});var e=e||{},b=e.onStart||function(){},k=e.onUpdate||function(){},d=e.onComplete||function(){},g=w(),h,s=0,c=n.offsetTop,a=n.style,l,o=n._mTween[t];t==="left"&&(c=n.offsetLeft);v=i-c;o.stop=0;f!=="none"&&tt();nt()},w=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},pi=function(){var n=this,r,i,t;for(n._mTween||(n._mTween={top:{},left:{}}),r=["top","left"],i=0;i<r.length;i++)t=r[i],n._mTween[t].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(n._mTween[t].id):clearTimeout(n._mTween[t].id),n._mTween[t].id=null,n._mTween[t].stop=1)},a=function(n,t){try{delete n[t]}catch(i){n[t]=null}},yt=function(n){return!(n.which&&n.which!==1)},nt=function(n){var t=n.originalEvent.pointerType;return!(t&&t!=="touch"&&t!==2)},tt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},f=function(n){var t=n.parents(".mCSB_container");return[n.offset().top-t.offset().top,n.offset().left-t.offset().left]},wi=function(){function t(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null}var n=t();return n?document[n]:!1};n.fn[h]=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist");else return s.init.apply(this,arguments)};n[h]=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist");else return s.init.apply(this,arguments)};n[h].defaults=ot;window[h]=!0;n(window).bind("load",function(){n(it)[h]();n.extend(n.expr[":"],{mcsInView:n.expr[":"].mcsInView||function(t){var i=n(t),u=i.parents(".mCSB_container"),e,r;if(u.length)return e=u.parent(),r=[u[0].offsetTop,u[0].offsetLeft],r[0]+f(i)[0]>=0&&r[0]+f(i)[0]<e.height()-i.outerHeight(!1)&&r[1]+f(i)[1]>=0&&r[1]+f(i)[1]<e.width()-i.outerWidth(!1)},mcsInSight:n.expr[":"].mcsInSight||function(t,i,r){var e=n(t),o,s=e.parents(".mCSB_container"),u,h,c,l=r[3]==="exact"?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(s.length)return o=[e.outerHeight(!1),e.outerWidth(!1)],h=[s[0].offsetTop+f(e)[0],s[0].offsetLeft+f(e)[1]],u=[s.parent()[0].offsetHeight,s.parent()[0].offsetWidth],c=[o[0]<u[0]?l[0]:l[1],o[1]<u[1]?l[0]:l[1]],h[0]-u[0]*c[0][0]<0&&h[0]+o[0]-u[0]*c[0][1]>=0&&h[1]-u[1]*c[1][0]<0&&h[1]+o[1]-u[1]*c[1][1]>=0},mcsOverflow:n.expr[":"].mcsOverflow||function(i){var r=n(i).data(t);if(r)return r.overflowed[0]||r.overflowed[1]}})})})}),function(n){"use strict";function e(n){return Math.max(Math.min(n,100),0)}function l(n,t){return Math.round(n/t)*t}function o(n,t){return 100/(t-n)}function u(n){return typeof n=="number"&&!isNaN(n)&&isFinite(n)}function a(t){return n.isArray(t)?t:[t]}function h(n,t,i){n.addClass(t);setTimeout(function(){n.removeClass(t)},i)}function s(n,t){return t*100/(n[1]-n[0])}function v(n,t){return s(n,n[0]<0?t+Math.abs(n[0]):t-n[0])}function y(n,t){return t*(n[1]-n[0])/100+n[0]}function p(n,t){if(t>=n.xVal.slice(-1)[0])return 100;for(var i=1,u,f,r,e;t>=n.xVal[i];)i++;return u=n.xVal[i-1],f=n.xVal[i],r=n.xPct[i-1],e=n.xPct[i],r+v([u,f],t)/o(r,e)}function w(n,t){if(t>=100)return n.xVal.slice(-1)[0];for(var i=1,u,f,r,e;t>=n.xPct[i];)i++;return u=n.xVal[i-1],f=n.xVal[i],r=n.xPct[i-1],e=n.xPct[i],y([u,f],(t-r)*o(r,e))}function b(n,t){for(var i=1,r,u;(n.dir?100-t:t)>=n.xPct[i];)i++;return n.snap?(r=n.xPct[i-1],u=n.xPct[i],t-r>(u-r)/2)?u:r:n.xSteps[i-1]?n.xPct[i-1]+l(t-n.xPct[i-1],n.xSteps[i-1]):t}function k(n){n.preventDefault();var e=n.type.indexOf("touch")===0,f=n.type.indexOf("mouse")===0,t=n.type.indexOf("pointer")===0,i,r,u=n;return n.type.indexOf("MSPointer")===0&&(t=!0),n.originalEvent&&(n=n.originalEvent),e&&(i=n.changedTouches[0].pageX,r=n.changedTouches[0].pageY),(f||t)&&(t||window.pageXOffset!==undefined||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),i=n.clientX+window.pageXOffset,r=n.clientY+window.pageYOffset),u.points=[i,r],u.cursor=f,u}function d(n,t){if(!u(t))throw new Error("noUiSlider: 'step' is not numeric.");n.xSteps[0]=t}function g(t,i){if(typeof i!="object"||n.isArray(i))throw new Error("noUiSlider: 'range' is not an object.");if(i.min===undefined||i.max===undefined)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");n.each(i,function(i,r){var f;if(typeof r=="number"&&(r=[r]),!n.isArray(r))throw new Error("noUiSlider: 'range' contains invalid value.");if(f=i==="min"?0:i==="max"?100:parseFloat(i),!u(f)||!u(r[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");t.xPct.push(f);t.xVal.push(r[0]);f?t.xSteps.push(isNaN(r[1])?!1:r[1]):isNaN(r[1])||(t.xSteps[0]=r[1])});n.each(t.xSteps,function(n,i){if(!i)return!0;t.xSteps[n]=s([t.xVal[n],t.xVal[n+1]],i)/o(t.xPct[n],t.xPct[n+1])})}function nt(t,i){if(typeof i=="number"&&(i=[i]),!n.isArray(i)||!i.length||i.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=i.length;t.start=i}function tt(n,t){if(n.snap=t,typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");}function it(n,t){if(t==="lower"&&n.handles===1)n.connect=1;else if(t==="upper"&&n.handles===1)n.connect=2;else if(t===!0&&n.handles===2)n.connect=3;else if(t===!1)n.connect=0;else throw new Error("noUiSlider: 'connect' option doesn't match handle count.");}function rt(n,t){switch(t){case"horizontal":n.ort=0;break;case"vertical":n.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.");}}function ut(n,t){if(n.xPct.length>2)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(n.margin=s(n.xVal,t),!u(t))throw new Error("noUiSlider: 'margin' option must be numeric.");}function ft(n,t){switch(t){case"ltr":n.dir=0;break;case"rtl":n.dir=1;n.connect=[0,2,1,3][n.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.");}}function et(n,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,u=t.indexOf("extend")>=0,f=t.indexOf("drag")>=0,e=t.indexOf("fixed")>=0,i=t.indexOf("snap")>=0;n.events={tap:r||i,extend:u,drag:f,fixed:e,snap:i}}function ot(t,i,r){t.ser=[i.lower,i.upper];t.formatting=i.format;n.each(t.ser,function(t,u){if(!n.isArray(u))throw new Error("noUiSlider: 'serialization."+(t?"upper":"lower")+"' must be an array.");n.each(u,function(){if(!(this instanceof n.Link))throw new Error("noUiSlider: 'serialization."+(t?"upper":"lower")+"' can only contain Link instances.");this.setIndex(t);this.setObject(r);this.setFormatting(i.format)})});t.dir&&t.handles>1&&t.ser.reverse()}function st(t,i){var r={xPct:[],xVal:[],xSteps:[!1],margin:0},u;return u={step:{r:!1,t:d},start:{r:!0,t:nt},connect:{r:!0,t:it},direction:{r:!0,t:ft},range:{r:!0,t:g},snap:{r:!1,t:tt},orientation:{r:!1,t:rt},margin:{r:!1,t:ut},behaviour:{r:!0,t:et},serialization:{r:!0,t:ot}},t=n.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),t.serialization=n.extend({lower:[],upper:[],format:{}},t.serialization),n.each(u,function(n,u){if(t[n]===undefined){if(u.r)throw new Error("noUiSlider: '"+n+"' is required.");return!0}u.t(r,t[n],i)}),r.style=r.ort?"top":"left",r}function ht(i,r){var u=n("<div><div/><\/div>").addClass(t[2]),f=["-lower","-upper"];return i.dir&&f.reverse(),u.children().addClass(t[3]+" "+t[3]+f[r]),u}function ct(t,i){return i.el&&(i=new n.Link({target:n(i.el).clone().appendTo(t),method:i.method,format:i.formatting},!0)),i}function lt(t,i,r){var u,f=[],e=new n.Link({},!0);for(e.setFormatting(r),f.push(e),u=0;u<t.length;u++)f.push(ct(i,t[u]));return f}function at(n,t){for(var r=[],i=0;i<n.handles;i++)r[i]=lt(n.ser[i],t[i].children(),n.formatting);return r}function vt(n,i,r){switch(n){case 1:i.addClass(t[7]);r[0].addClass(t[6]);break;case 3:r[1].addClass(t[6]);case 2:r[0].addClass(t[7]);case 0:i.addClass(t[6])}}function yt(n,t){for(var r=[],i=0;i<n.handles;i++)r.push(ht(n,i).appendTo(t));return r}function pt(i,r){return r.addClass([t[0],t[8+i.dir],t[4+i.ort]].join(" ")),n("<div/>").appendTo(r).addClass(t[1])}function wt(u,o,s){function rt(){return v[["width","height"][o.ort]]()}function nt(n){for(var i=[l.val()],t=0;t<n.length;t++)l.trigger(n[t],i)}function tt(i,r,u){var f=i[0]!==c[0][0]?1:0,s=y[0]+o.margin,h=y[1]-o.margin;return(u&&c.length>1&&(r=f?Math.max(r,s):Math.min(r,h)),r<100&&(r=b(o,r)),r=e(parseFloat(r.toFixed(7))),r===y[f])?c.length===1?!1:r===s||r===h?0:!1:(i.css(o.style,r+"%"),i.is(":first-child")&&i.toggleClass(t[17],r>50),y[f]=r,o.dir&&(r=100-r),n(d[f]).each(function(){this.write(w(o,r),i.children(),l)}),!0)}function ft(n,t,i){var r=n+t[0],u=n+t[1];return i?(r<0&&(u+=Math.abs(r)),u>100&&(r-=u-100),[e(r),e(u)]):[r,u]}function ut(n,i,r){r||h(l,t[14],300);tt(n,i,!1);nt(["slide","set","change"])}function g(n,r,u,f){n=n.replace(/\s/g,i+" ")+i;return r.on(n,function(n){var i=l.attr("disabled");if(i=!(i===undefined||i===null),l.hasClass(t[14])||i)return!1;n=k(n);n.calcPoint=n.points[o.ort];u(n,f)})}function et(n,t){var i=t.handles||c,u,r=!1,e=(n.calcPoint-t.start)*100/rt(),f=i[0][0]!==c[0][0]?1:0;u=ft(e,t.positions,i.length>1);r=tt(i[0],u[f],i.length===1);i.length>1&&(r=tt(i[1],u[f?0:1],!1)||r);r&&nt(["slide"])}function ot(r){n("."+t[15]).removeClass(t[15]);r.cursor&&n("body").css("cursor","").off(i);f.off(i);l.removeClass(t[12]);nt(["set","change"])}function it(u,e){if(e.handles.length===1&&e.handles[0].children().addClass(t[15]),u.stopPropagation(),g(r.move,f,et,{start:u.calcPoint,handles:e.handles,positions:[y[0],y[c.length-1]]}),g(r.end,f,ot,null),u.cursor){n("body").css("cursor",n(u.target).css("cursor"));c.length>1&&l.addClass(t[12]);n("body").on("selectstart"+i,!1)}}function st(t){var r=t.calcPoint,i=0,u;t.stopPropagation();n.each(c,function(){i+=this.offset()[o.style]});i=r<i/2||c.length===1?0:1;r-=v.offset()[o.style];u=r*100/rt();ut(c[i],u,o.events.snap);o.events.snap&&it(t,{handles:[c[i]]})}function ht(n){var t=n.calcPoint<v.offset()[o.style],i=t?0:100;t=t?0:c.length-1;ut(c[t],i,!1)}function ct(n){var i,u;if(!n.fixed)for(i=0;i<c.length;i++)g(r.start,c[i].children(),it,{handles:[c[i]]});n.tap&&g(r.start,v,st,{handles:c});n.extend&&(l.addClass(t[16]),n.tap&&g(r.start,l,ht,{handles:c}));n.drag&&(u=v.find("."+t[7]).addClass(t[10]),n.fixed&&(u=u.add(v.children().not(u).children())),g(r.start,u,it,{handles:c}))}var l=n(u),y=[-1,-1],v,d,c;if(l.hasClass(t[0]))throw new Error("Slider was already initialized.");v=pt(o,l);c=yt(o,v);d=at(o,c);vt(o.connect,l,c);ct(o.events);u.vSet=function(){var u=Array.prototype.slice.call(arguments,0),f,v,y,w,r,e,b,i,s=a(u[0]);for(typeof u[1]=="object"?(f=u[1].set,v=u[1].link,y=u[1].update,w=u[1].animate):u[1]===!0&&(f=!0),o.dir&&o.handles>1&&s.reverse(),w&&h(l,t[14],300),e=c.length>1?3:1,s.length===1&&(e=1),r=0;r<e;r++)(i=v||d[r%2][0],i=i.getValue(s[r%2]),i!==!1)&&(i=p(o,i),o.dir&&(i=100-i),tt(c[r%2],i,!0)!==!0)&&n(d[r%2]).each(function(n){if(!n)return b=this.actual,!0;this.write(b,c[r%2].children(),l,y)});return f===!0&&nt(["set"]),this};u.vGet=function(){for(var t=[],n=0;n<o.handles;n++)t[n]=d[n][0].saved;return t.length===1?t[0]:o.dir?t.reverse():t};u.destroy=function(){return n.each(d,function(){n.each(this,function(){this.target&&this.target.off(i)})}),n(this).off(i).removeClass(t.join(" ")).empty(),s};l.val(o.start)}function bt(n){if(!this.length)throw new Error("noUiSlider: Can't initialize slider on empty selection.");var t=st(n,this);return this.each(function(){wt(this,t,n)})}function kt(t){return this.each(function(){var u=n(this).val(),i=this.destroy(),r=n.extend({},i,t);n(this).noUiSlider(r);i.start===r.start&&n(this).val(u)})}function dt(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var f=n(document),c=n.fn.val,i=".nui",r=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},t=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","noUi-extended","noUi-stacking"];n.fn.val=function(){function i(n){return n.hasClass(t[0])?dt:c}var u=arguments,r=n(this[0]);return arguments.length?this.each(function(){i(n(this)).apply(n(this),u)}):i(r).call(r)};n.noUiSlider={Link:n.Link};n.fn.noUiSlider=function(n,t){return(t?kt:bt).call(this,n)}}(window.jQuery||window.Zepto),function(n){"use strict";function r(n,t,i){if((n[t]||n[i])&&n[t]===n[i])throw new Error("(Link) '"+t+"' can't match '"+i+"'.'");}function f(t){return t instanceof n||n.zepto&&n.zepto.isZ(t)}function i(t){if(t===undefined&&(t={}),typeof t!="object")throw new Error("(Format) 'format' option must be an object.");var i={};n(e).each(function(n,r){if(t[r]===undefined)i[r]=u[n];else if(typeof t[r]==typeof u[n]){if(r==="decimals"&&(t[r]<0||t[r]>7))throw new Error("(Format) 'format.decimals' option must be between 0 and 7.");i[r]=t[r]}else throw new Error("(Format) 'format."+r+"' must be a "+typeof u[n]+".");});r(i,"mark","thousand");r(i,"prefix","negative");r(i,"prefix","negativeBefore");this.settings=i}function t(i,r){return typeof i!="object"&&n.error("(Link) Initialize with an object."),new t.prototype.init(i.target||function(){},i.method,i.format||{},r)}var e=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore","to","from"],u=[2,".","","","",function(n){return n},function(n){return n},"-","",function(n){return n},function(n){return n}];i.prototype.v=function(n){return this.settings[n]};i.prototype.to=function(n){function i(n){return n.split("").reverse().join("")}n=this.v("encoder")(n);var r=this.v("decimals"),u="",f="",t="",e="";return parseFloat(n.toFixed(r))===0&&(n="0"),n<0&&(u=this.v("negative"),f=this.v("negativeBefore")),n=Math.abs(n).toFixed(r).toString(),n=n.split("."),this.v("thousand")?(t=i(n[0]).match(/.{1,3}/g),t=i(t.join(i(this.v("thousand"))))):t=n[0],this.v("mark")&&n.length>1&&(e=this.v("mark")+n[1]),this.v("to")(f+this.v("prefix")+u+t+e+this.v("postfix"))};i.prototype.from=function(n){function i(n){return n.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var t;return n===null||n===undefined?!1:(n=this.v("from")(n),n=n.toString(),t=n.replace(new RegExp("^"+i(this.v("negativeBefore"))),""),n!==t?(n=t,t="-"):t="",n=n.replace(new RegExp("^"+i(this.v("prefix"))),""),this.v("negative")&&(t="",n=n.replace(new RegExp("^"+i(this.v("negative"))),"-")),n=n.replace(new RegExp(i(this.v("postfix"))+"$"),"").replace(new RegExp(i(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),n=this.v("decoder")(parseFloat(t+n)),isNaN(n))?!1:n};t.prototype.setTooltip=function(t,i){this.method=i||"html";this.el=n(t.replace("-tooltip-","")||"<div/>")[0]};t.prototype.setHidden=function(n){this.method="val";this.el=document.createElement("input");this.el.name=n;this.el.type="hidden"};t.prototype.setField=function(t){function r(n,t,i){return[i?n:t,i?t:n]}var i=this;this.method="val";this.target=t.on("change",function(t){i.obj.val(r(null,n(t.target).val(),i.N),{link:i,set:!0})})};t.prototype.init=function(n,t,i,r){if(this.formatting=i,this.update=!r,typeof n=="string"&&n.indexOf("-tooltip-")===0){this.setTooltip(n,t);return}if(typeof n=="string"&&n.indexOf("-")!==0){this.setHidden(n);return}if(typeof n=="function"){this.target=!1;this.method=n;return}if(f(n)){if(!t){if(n.is("input, select, textarea")){this.setField(n);return}t="html"}if(typeof t=="function"||typeof t=="string"&&n[t]){this.method=t;this.target=n;return}}throw new RangeError("(Link) Invalid Link.");};t.prototype.write=function(n,t,i,r){this.update&&r===!1||(this.actual=n,n=this.format(n),this.saved=n,typeof this.method=="function"?this.method.call(this.target[0]||i[0],n,t,i):this.target[this.method](n,t,i))};t.prototype.setFormatting=function(t){this.formatting=new i(n.extend({},t,this.formatting instanceof i?this.formatting.settings:this.formatting))};t.prototype.setObject=function(n){this.obj=n};t.prototype.setIndex=function(n){this.N=n};t.prototype.format=function(n){return this.formatting.to(n)};t.prototype.getValue=function(n){return this.formatting.from(n)};t.prototype.init.prototype=t.prototype;n.Link=t}(window.jQuery||window.Zepto);!function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(t){function y(n,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.create(n.prototype),r;for(r in u)i[r]=u[r];return i.constructor=t,t.prototype=i,t}function iu(n){n=n||{};this.defaultProtocol=n.hasOwnProperty("defaultProtocol")?n.defaultProtocol:c.defaultProtocol;this.events=n.hasOwnProperty("events")?n.events:c.events;this.format=n.hasOwnProperty("format")?n.format:c.format;this.formatHref=n.hasOwnProperty("formatHref")?n.formatHref:c.formatHref;this.nl2br=n.hasOwnProperty("nl2br")?n.nl2br:c.nl2br;this.tagName=n.hasOwnProperty("tagName")?n.tagName:c.tagName;this.target=n.hasOwnProperty("target")?n.target:c.target;this.validate=n.hasOwnProperty("validate")?n.validate:c.validate;this.ignoreTags=[];this.attributes=n.attributes||n.linkAttributes||c.attributes;this.className=n.hasOwnProperty("className")?n.className:n.linkClass||c.className;for(var i=n.hasOwnProperty("ignoreTags")?n.ignoreTags:c.ignoreTags,t=0;t<i.length;t++)this.ignoreTags.push(i[t].toUpperCase())}function ef(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1}function ru(n){return n}function of(n,t){return"url"===t?"_blank":null}function sr(){return function(n){this.j=[];this.T=n||null}}function et(n,t,i,r){for(var f=0,o=n.length,e=t,s=[],u=void 0;f<o&&(u=e.next(n[f]));)e=u,f++;if(f>=o)return[];for(;f<o-1;)u=new vi(r),s.push(u),e.on(n[f],u),e=u,f++;return u=new vi(i),s.push(u),e.on(n[o-1],u),s}function b(){return function(n){n&&(this.v=n)}}function u(n){var t=n?{v:n}:{};return y(hr,b(),t)}function sf(n){return n instanceof e||n instanceof v}var c={defaultProtocol:"http",events:null,format:ru,formatHref:ru,nl2br:!1,tagName:"a",target:of,validate:!0,ignoreTags:[],attributes:null,className:"linkified"},uu,ai,nr,hu,yu,rr,o,s,wt,nu,ff;iu.prototype={resolve:function(n){var t=n.toHref(this.defaultProtocol);return{formatted:this.get("format",n.toString(),n),formattedHref:this.get("formatHref",t,n),tagName:this.get("tagName",t,n),className:this.get("className",t,n),target:this.get("target",t,n),events:this.getObject("events",t,n),attributes:this.getObject("attributes",t,n)}},check:function(n){return this.get("validate",n.toString(),n)},get:function(t,i,r){var f=void 0,u=this[t];if(!u)return u;switch("undefined"==typeof u?"undefined":n(u)){case"function":return u(i,r.type);case"object":return f=u.hasOwnProperty(r.type)?u[r.type]:c[t],"function"==typeof f?f(i,r.type):f}return u},getObject:function(n,t,i){var r=this[n];return"function"==typeof r?r(t,i.type):r}};uu=Object.freeze({defaults:c,Options:iu,contains:ef});ai=sr();ai.prototype={defaultTransition:!1,on:function(n,t){if(n instanceof Array){for(var i=0;i<n.length;i++)this.j.push([n[i],t]);return this}return this.j.push([n,t]),this},next:function(n){for(var t=0;t<this.j.length;t++){var i=this.j[t],r=i[0],u=i[1];if(this.test(n,r))return u}return this.defaultTransition},accepts:function(){return!!this.T},test:function(n,t){return n===t},emit:function(){return this.T}};var vi=y(ai,sr(),{test:function(n,t){return n===t||t instanceof RegExp&&t.test(n)}}),fu=y(ai,sr(),{jump:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.next(new n(""));return t===this.defaultTransition?(t=new this.constructor(i),this.on(n,t)):i&&(t.T=i),t},test:function(n,t){return n instanceof t}}),hr=b();hr.prototype={toString:function(){return this.v+""}};var e=u(),ot=u("@"),bt=u(":"),k=u("."),cr=u(),p=u(),lr=u("\n"),a=u(),yi=u("+"),pi=u("#"),st=u(),ar=u("mailto:"),wi=u("?"),w=u("/"),bi=u("_"),ki=u(),v=u(),eu=u(),kt=u("{"),dt=u("["),gt=u("<"),ni=u("("),ht=u("}"),ct=u("]"),lt=u(">"),at=u(")"),di=u("&"),hf=Object.freeze({Base:hr,DOMAIN:e,AT:ot,COLON:bt,DOT:k,PUNCTUATION:cr,LOCALHOST:p,NL:lr,NUM:a,PLUS:yi,POUND:pi,QUERY:wi,PROTOCOL:st,MAILTO:ar,SLASH:w,UNDERSCORE:bi,SYM:ki,TLD:v,WS:eu,OPENBRACE:kt,OPENBRACKET:dt,OPENANGLEBRACKET:gt,OPENPAREN:ni,CLOSEBRACE:ht,CLOSEBRACKET:ct,CLOSEANGLEBRACKET:lt,CLOSEPAREN:at,AMPERSAND:di}),ou="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),vr="0123456789".split(""),gi="0123456789abcdefghijklmnopqrstuvwxyz".split(""),su=[" ","\f","\r","\t","\x0b"," "," ","᠎"],h=[],r=function(n){return new vi(n)},l=r(),yr=r(a),vt=r(e),ti=r(),pr=r(eu);for(l.on("@",r(ot)).on(".",r(k)).on("+",r(yi)).on("#",r(pi)).on("?",r(wi)).on("/",r(w)).on("_",r(bi)).on(":",r(bt)).on("{",r(kt)).on("[",r(dt)).on("<",r(gt)).on("(",r(ni)).on("}",r(ht)).on("]",r(ct)).on(">",r(lt)).on(")",r(at)).on("&",r(di)).on([",",";","!",'"',"'"],r(cr)),l.on("\n",r(lr)).on(su,pr),pr.on(su,pr),nr=0;nr<ou.length;nr++)hu=et(ou[nr],l,v,e),h.push.apply(h,hu);var cu=et("file",l,e,e),lu=et("ftp",l,e,e),au=et("http",l,e,e),vu=et("mailto",l,e,e);h.push.apply(h,cu);h.push.apply(h,lu);h.push.apply(h,au);h.push.apply(h,vu);var cf=cu.pop(),lf=lu.pop(),af=au.pop(),vf=vu.pop(),tr=r(e),ir=r(st),yf=r(ar);for(lf.on("s",tr).on(":",ir),af.on("s",tr).on(":",ir),h.push(tr),cf.on(":",ir),tr.on(":",ir),vf.on(":",yf),yu=et("localhost",l,p,e),h.push.apply(h,yu),l.on(vr,yr),yr.on("-",ti).on(vr,yr).on(gi,vt),vt.on("-",ti).on(gi,vt),rr=0;rr<h.length;rr++)h[rr].on("-",ti).on(gi,vt);ti.on("-",ti).on(vr,vt).on(gi,vt);l.defaultTransition=r(ki);var pu=function(n){for(var h,c=n.replace(/[A-Z]/g,function(n){return n.toLowerCase()}),f=n.length,e=[],t=0;t<f;){for(var r=l,o=null,u=0,s=null,i=-1;t<f&&(o=r.next(c[t]));)r=o,r.accepts()?(i=0,s=r):i>=0&&i++,u++,t++;i<0||(t-=i,u-=i,h=s.emit(),e.push(new h(n.substr(t-u,u))))}return e},pf=l,wf=Object.freeze({State:vi,TOKENS:hf,run:pu,start:pf}),nt=b();nt.prototype={type:"token",isLink:!1,toString:function(){for(var t=[],n=0;n<this.v.length;n++)t.push(this.v[n].toString());return t.join("")},toHref:function(){return this.toString()},toObject:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(n)}}};var wu=y(nt,b(),{type:"email",isLink:!0}),wr=y(nt,b(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),br=y(nt,b(),{type:"text"}),bu=y(nt,b(),{type:"nl"}),d=y(nt,b(),{type:"url",isLink:!0,toHref:function(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",r=!1,u=!1,i=this.v,t=[],n=0;i[n]instanceof st;)r=!0,t.push(i[n].toString().toLowerCase()),n++;for(;i[n]instanceof w;)u=!0,t.push(i[n].toString()),n++;for(;sf(i[n]);)t.push(i[n].toString().toLowerCase()),n++;for(;n<i.length;n++)t.push(i[n].toString());return t=t.join(""),r||u||(t=f+"://"+t),t},hasProtocol:function(){return this.v[0]instanceof st}}),bf=Object.freeze({Base:nt,MAILTOEMAIL:wu,EMAIL:wr,NL:bu,TEXT:br,URL:d}),i=function(n){return new fu(n)},ur=i(),ku=i(),du=i(),kr=i(),gu=i(),g=i(),fr=i(),ii=i(d),nf=i(),tf=i(d),f=i(d),ri=i(),ui=i(),fi=i(),ei=i(),oi=i(),tt=i(d),it=i(d),rt=i(d),ut=i(d),si=i(),hi=i(),ci=i(),li=i(),yt=i(),dr=i(),er=i(wr),rf=i(),kf=i(wr),ft=i(wu),gr=i(),pt=i(),or=i(),uf=i(),df=i(bu);ur.on(lr,df).on(st,ku).on(ar,du).on(w,kr);ku.on(w,kr);kr.on(w,gu);ur.on(v,g).on(e,g).on(p,ii).on(a,g);gu.on(v,f).on(e,f).on(a,f).on(p,f);g.on(k,fr);yt.on(k,dr);fr.on(v,ii).on(e,g).on(a,g).on(p,g);dr.on(v,er).on(e,yt).on(a,yt).on(p,yt);ii.on(k,fr);er.on(k,dr);ii.on(bt,nf).on(w,f);nf.on(a,tf);tf.on(w,f);er.on(bt,rf);rf.on(a,kf);o=[e,ot,p,a,yi,pi,st,w,v,bi,ki,di];s=[bt,k,wi,cr,ht,ct,lt,at,kt,dt,gt,ni];f.on(kt,ui).on(dt,fi).on(gt,ei).on(ni,oi);ri.on(kt,ui).on(dt,fi).on(gt,ei).on(ni,oi);ui.on(ht,f);fi.on(ct,f);ei.on(lt,f);oi.on(at,f);tt.on(ht,f);it.on(ct,f);rt.on(lt,f);ut.on(at,f);si.on(ht,f);hi.on(ct,f);ci.on(lt,f);li.on(at,f);ui.on(o,tt);fi.on(o,it);ei.on(o,rt);oi.on(o,ut);ui.on(s,si);fi.on(s,hi);ei.on(s,ci);oi.on(s,li);tt.on(o,tt);it.on(o,it);rt.on(o,rt);ut.on(o,ut);tt.on(s,tt);it.on(s,it);rt.on(s,rt);ut.on(s,ut);si.on(o,tt);hi.on(o,it);ci.on(o,rt);li.on(o,ut);si.on(s,si);hi.on(s,hi);ci.on(s,ci);li.on(s,li);f.on(o,f);ri.on(o,f);f.on(s,ri);ri.on(s,ri);du.on(v,ft).on(e,ft).on(a,ft).on(p,ft);ft.on(o,ft).on(s,gr);gr.on(o,ft).on(s,gr);wt=[e,a,yi,pi,wi,bi,ki,di,v];g.on(wt,pt).on(ot,or);ii.on(wt,pt).on(ot,or);fr.on(wt,pt);pt.on(wt,pt).on(ot,or).on(k,uf);uf.on(wt,pt);or.on(v,yt).on(e,yt).on(p,er);nu=function(n){for(var o,a,s=n.length,t=0,f=[],i=[];t<s;){for(var u=ur,h=null,c=null,e=0,l=null,r=-1;t<s&&!(h=u.next(n[t]));)i.push(n[t++]);for(;t<s&&(c=h||u.next(n[t]));)h=null,u=c,u.accepts()?(r=0,l=u):r>=0&&r++,t++,e++;if(r<0)for(o=t-e;o<t;o++)i.push(n[o]);else i.length>0&&(f.push(new br(i)),i=[]),t-=r,e-=r,a=l.emit(),f.push(new a(n.slice(t-e,t)))}return i.length>0&&f.push(new br(i)),f};ff=Object.freeze({State:fu,TOKENS:bf,run:nu,start:ur});Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)});var tu=function(n){return nu(pu(n))},gf=function(n){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=tu(n),f=[],i=0;i<u.length;i++)t=u[i],!t.isLink||r&&t.type!==r||f.push(t.toObject());return f},ne=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=tu(n);return 1===t.length&&t[0].isLink&&(!i||t[0].type===i)};t.find=gf;t.inherits=y;t.options=uu;t.parser=ff;t.scanner=wf;t.test=ne;t.tokenize=tu}(self.linkify=self.linkify||{})}();!function(n,t){var i=function(n){function u(n){this.a=n}function t(n){return tt.test(n)}function s(n){return it.test(n)}function a(n){return n.replace(rt,"\n")}function f(n,t){this.b=n;this.c=t;this.d=null;this.input=null;this.e=-1;this.f=-1;this.g=-1;this.h=-1;this.i=-1;this.j()}function e(n,t){this.k=null;this.startLine=1;this.startColumn=0;this.options=t||{};this.tokenizer=new f(this,n)}function v(n,t){var i=new e(new u(c),t);return i.tokenize(n)}function y(n){for(var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=ut.tokenize(n),u=[],s=[],e,b,a,d,g,f,v,nt,c=new ft(c),t=0;t<y.length;t++)if(e=y[t],e.type!==i)e.type===r?(b=p(e.chars,c),u.push.apply(u,b)):u.push(e);else{if(u.push(e),a=e.tagName.toUpperCase(),d="A"===a||l.contains(c.ignoreTags,a),!d)continue;g=u.length;w(a,y,++t,u);t+=u.length-g-1}for(t=0;t<u.length;t++){f=u[t];switch(f.type){case i:v="<"+f.tagName;f.attributes.length>0&&(nt=k(f.attributes),v+=" "+nt.join(" "));v+=">";s.push(v);break;case o:s.push("<\/"+f.tagName+">");break;case r:s.push(h(f.chars));break;case et:s.push("<!--"+h(f.chars)+"-->")}}return s.join("")}function p(t,u){for(var e,l,a=n.tokenize(t),f=[],c=0;c<a.length;c++)if(e=a[c],"nl"===e.type&&u.nl2br)f.push({type:i,tagName:"br",attributes:[],l:!0});else if(e.isLink&&u.check(e)){var s=u.resolve(e),b=s.formatted,k=s.formattedHref,v=s.tagName,y=s.className,p=s.target,w=s.attributes,h=[["href",k]];y&&h.push(["class",y]);p&&h.push(["target",p]);for(l in w)h.push([l,w[l]]);f.push({type:i,tagName:v,attributes:h,l:!1});f.push({type:r,chars:b});f.push({type:o,tagName:v})}else f.push({type:r,chars:e.toString()});return f}function w(n,t,r,u){for(var f,e=1;r<t.length&&e>0;)f=t[r],f.type===i&&f.tagName.toUpperCase()===n?e++:f.type===o&&f.tagName.toUpperCase()===n&&e--,u.push(f),r++;return u}function h(n){return n}function b(n){return n.replace(/"/g,"&quot;")}function k(n){for(var i=[],t=0;t<n.length;t++){var r=n[t],u=r[0],f=r[1];i.push(u+'="'+b(f)+'"')}return i}var c={m:" "},d=/^#[xX]([A-Fa-f0-9]+)$/,g=/^#([0-9]+)$/,nt=/^([A-Za-z0-9]+)$/;u.prototype.parse=function(n){if(n){var t=n.match(d);return t?"&#x"+t[1]+";":(t=n.match(g))?"&#"+t[1]+";":(t=n.match(nt),t?this.a[t[1]]||"&"+t[1]+";":void 0)}};var tt=/[\t\n\f ]/,it=/[A-Za-z]/,rt=/\r\n?/g;f.prototype={j:function(){this.d="beforeData";this.input="";this.e=0;this.f=1;this.g=0;this.h=-1;this.i=-1;this.b.j()},tokenize:function(n){this.j();this.tokenizePart(n);this.tokenizeEOF()},tokenizePart:function(n){for(this.input+=a(n);this.e<this.input.length;)this.n[this.d].call(this)},tokenizeEOF:function(){this.o()},o:function(){"data"===this.d&&(this.b.p(),this.d="beforeData")},q:function(){return this.input.charAt(this.e)},r:function(){var n=this.q();return this.e++,"\n"===n?(this.f++,this.g=0):this.g++,n},s:function(){var r=this.input.indexOf(";",this.e),n,t,i;if(r!==-1&&(n=this.input.slice(this.e,r),t=this.c.parse(n),t)){for(i=n.length;i;)this.r(),i--;return this.r(),t}},t:function(){this.h=this.f;this.i=this.g;this.b.tagOpen&&this.b.tagOpen()},n:{beforeData:function(){var n=this.q();"<"===n?(this.d="tagOpen",this.t(),this.r()):(this.d="data",this.b.u())},data:function(){var n=this.q();"<"===n?(this.b.p(),this.d="tagOpen",this.t(),this.r()):"&"===n?(this.r(),this.b.v(this.s()||"&")):(this.r(),this.b.v(n))},tagOpen:function(){var n=this.r();"!"===n?this.d="markupDeclaration":"/"===n?this.d="endTagOpen":s(n)&&(this.d="tagName",this.b.w(),this.b.x(n.toLowerCase()))},markupDeclaration:function(){var n=this.r();"-"===n&&"-"===this.input.charAt(this.e)&&(this.r(),this.d="commentStart",this.b.y())},commentStart:function(){var n=this.r();"-"===n?this.d="commentStartDash":">"===n?(this.b.z(),this.d="beforeData"):(this.b.A(n),this.d="comment")},commentStartDash:function(){var n=this.r();"-"===n?this.d="commentEnd":">"===n?(this.b.z(),this.d="beforeData"):(this.b.A("-"),this.d="comment")},comment:function(){var n=this.r();"-"===n?this.d="commentEndDash":this.b.A(n)},commentEndDash:function(){var n=this.r();"-"===n?this.d="commentEnd":(this.b.A("-"+n),this.d="comment")},commentEnd:function(){var n=this.r();">"===n?(this.b.z(),this.d="beforeData"):(this.b.A("--"+n),this.d="comment")},tagName:function(){var n=this.r();t(n)?this.d="beforeAttributeName":"/"===n?this.d="selfClosingStartTag":">"===n?(this.b.B(),this.d="beforeData"):this.b.x(n)},beforeAttributeName:function(){var n=this.q();return t(n)?void this.r():void("/"===n?(this.d="selfClosingStartTag",this.r()):">"===n?(this.r(),this.b.B(),this.d="beforeData"):(this.d="attributeName",this.b.C(),this.r(),this.b.D(n)))},attributeName:function(){var n=this.q();t(n)?(this.d="afterAttributeName",this.r()):"/"===n?(this.b.F(!1),this.b.G(),this.r(),this.d="selfClosingStartTag"):"="===n?(this.d="beforeAttributeValue",this.r()):">"===n?(this.b.F(!1),this.b.G(),this.r(),this.b.B(),this.d="beforeData"):(this.r(),this.b.D(n))},afterAttributeName:function(){var n=this.q();return t(n)?void this.r():void("/"===n?(this.b.F(!1),this.b.G(),this.r(),this.d="selfClosingStartTag"):"="===n?(this.r(),this.d="beforeAttributeValue"):">"===n?(this.b.F(!1),this.b.G(),this.r(),this.b.B(),this.d="beforeData"):(this.b.F(!1),this.b.G(),this.r(),this.d="attributeName",this.b.C(),this.b.D(n)))},beforeAttributeValue:function(){var n=this.q();t(n)?this.r():'"'===n?(this.d="attributeValueDoubleQuoted",this.b.F(!0),this.r()):"'"===n?(this.d="attributeValueSingleQuoted",this.b.F(!0),this.r()):">"===n?(this.b.F(!1),this.b.G(),this.r(),this.b.B(),this.d="beforeData"):(this.d="attributeValueUnquoted",this.b.F(!1),this.r(),this.b.H(n))},attributeValueDoubleQuoted:function(){var n=this.r();'"'===n?(this.b.G(),this.d="afterAttributeValueQuoted"):"&"===n?this.b.H(this.s('"')||"&"):this.b.H(n)},attributeValueSingleQuoted:function(){var n=this.r();"'"===n?(this.b.G(),this.d="afterAttributeValueQuoted"):"&"===n?this.b.H(this.s("'")||"&"):this.b.H(n)},attributeValueUnquoted:function(){var n=this.q();t(n)?(this.b.G(),this.r(),this.d="beforeAttributeName"):"&"===n?(this.r(),this.b.H(this.s(">")||"&")):">"===n?(this.b.G(),this.r(),this.b.B(),this.d="beforeData"):(this.r(),this.b.H(n))},afterAttributeValueQuoted:function(){var n=this.q();t(n)?(this.r(),this.d="beforeAttributeName"):"/"===n?(this.r(),this.d="selfClosingStartTag"):">"===n?(this.r(),this.b.B(),this.d="beforeData"):this.d="beforeAttributeName"},selfClosingStartTag:function(){var n=this.q();">"===n?(this.r(),this.b.I(),this.b.B(),this.d="beforeData"):this.d="beforeAttributeName"},endTagOpen:function(){var n=this.r();s(n)&&(this.d="tagName",this.b.J(),this.b.x(n.toLowerCase()))}}};e.prototype={tokenize:function(n){return this.K=[],this.tokenizer.tokenize(n),this.K},tokenizePart:function(n){return this.K=[],this.tokenizer.tokenizePart(n),this.K},tokenizeEOF:function(){return this.K=[],this.tokenizer.tokenizeEOF(),this.K[0]},j:function(){this.k=null;this.startLine=1;this.startColumn=0},L:function(){this.options.M&&(this.k.M={start:{f:this.startLine,g:this.startColumn},N:{f:this.tokenizer.f,g:this.tokenizer.g}});this.startLine=this.tokenizer.f;this.startColumn=this.tokenizer.g},u:function(){this.k={type:"Chars",chars:""};this.K.push(this.k)},v:function(n){this.k.chars+=n},p:function(){this.L()},y:function(){this.k={type:"Comment",chars:""};this.K.push(this.k)},A:function(n){this.k.chars+=n},z:function(){this.L()},w:function(){this.k={type:"StartTag",tagName:"",attributes:[],l:!1};this.K.push(this.k)},J:function(){this.k={type:"EndTag",tagName:""};this.K.push(this.k)},B:function(){this.L()},I:function(){this.k.l=!0},x:function(n){this.k.tagName+=n},C:function(){this._currentAttribute=["","",null];this.k.attributes.push(this._currentAttribute)},D:function(n){this._currentAttribute[0]+=n},F:function(n){this._currentAttribute[2]=n},H:function(n){this._currentAttribute[1]=this._currentAttribute[1]||"";this._currentAttribute[1]+=n},G:function(){}};var ut={HTML5NamedCharRefs:c,EntityParser:u,EventedTokenizer:f,Tokenizer:e,tokenize:v},l=n.options,ft=l.Options,i="StartTag",o="EndTag",r="Chars",et="Comment";return y}(t);n.linkifyHtml=i}(window,linkify),function(){(function(n){var r=this||eval("this"),t=r.document,f=r.navigator,i=r.jQuery,u=r.JSON;(function(n){"function"==typeof define&&define.amd?define(["exports","require"],n):"object"==typeof exports&&"object"==typeof module?n(module.exports||exports):n(r.ko={})})(function(e,o){function b(n,t){return null===n||typeof n in nt?n===t:!1}function tt(t,i){var r;return function(){r||(r=s.a.setTimeout(function(){r=n;t()},i))}}function it(n,t){var i;return function(){clearTimeout(i);i=s.a.setTimeout(n,t)}}function rt(n,t){t&&t!==p?"beforeChange"===t?this.Kb(n):this.Ha(n,t):this.Lb(n)}function ut(n,t){null!==t&&t.k&&t.k()}function ft(n,t){var i=this.Hc,r=i[h];r.R||(this.lb&&this.Ma[t]?(i.Pb(t,n,this.Ma[t]),this.Ma[t]=null,--this.lb):r.r[t]||i.Pb(t,n,r.s?{ia:n}:i.uc(n)))}function k(n,t,i,r){s.d[n]={init:function(n,u,f,e,o){var c,h;return s.m(function(){var l=s.a.c(u()),f=!i!=!l,e=!h;(e||t||f!==c)&&(e&&s.va.Aa()&&(h=s.a.ua(s.f.childNodes(n),!0)),f?(e||s.f.da(n,s.a.ua(h)),s.eb(r?r(o,l):o,n)):s.f.xa(n),c=f)},null,{i:n}),{controlsDescendantBindings:!0}}};s.h.ta[n]=!1;s.f.Z[n]=!0}var s="undefined"!=typeof e?e:{},nt,p,l,v,a,y,h,d,g,w;s.b=function(n,t){for(var i=n.split("."),r=s,u=0;u<i.length-1;u++)r=r[i[u]];r[i[i.length-1]]=t};s.G=function(n,t,i){n[t]=i};s.version="3.4.0";s.b("version",s.version);s.options={deferUpdates:!1,useOnlyNativeEvents:!1};s.a=function(){function o(n,t){for(var i in n)n.hasOwnProperty(i)&&t(i,n[i])}function l(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function a(n,t){return n.__proto__=t,n}function v(n,t,i,r){var u=n[t].match(c)||[];s.a.q(i.match(c),function(n){s.a.pa(u,n,r)});n[t]=u.join(" ")}var y={__proto__:[]}instanceof Array,w="function"==typeof Symbol,h={},p={};h[f&&/Firefox\/2/i.test(f.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");o(h,function(n,t){if(t.length)for(var i=0,r=t.length;i<r;i++)p[t[i]]=n});var b={propertychange:!0},e=t&&function(){for(var i=3,r=t.createElement("div"),u=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++i+"]><i><\/i><![endif]-->",u[0];);return 4<i?i:n}(),c=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},o:function(n,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},Sb:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r))return n[r];return null},La:function(n,t){var i=s.a.o(n,t);0<i?n.splice(i,1):0===i&&n.shift()},Tb:function(n){n=n||[];for(var i=[],t=0,r=n.length;t<r;t++)0>s.a.o(i,n[t])&&i.push(n[t]);return i},fb:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i],i));return r},Ka:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)t(n[i],i)&&r.push(n[i]);return r},ra:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},pa:function(n,t,i){var r=s.a.o(s.a.zb(n),t);0>r?i&&n.push(t):i||n.splice(r,1)},ka:y,extend:l,Xa:a,Ya:y?a:l,D:o,Ca:function(n,t){if(!n)return n;var r={},i;for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i],i,n));return r},ob:function(n){for(;n.firstChild;)s.removeNode(n.firstChild)},jc:function(n){n=s.a.V(n);for(var r=(n[0]&&n[0].ownerDocument||t).createElement("div"),i=0,u=n.length;i<u;i++)r.appendChild(s.$(n[i]));return r},ua:function(n,t){for(var r,i=0,f=n.length,u=[];i<f;i++)r=n[i].cloneNode(!0),u.push(t?s.$(r):r);return u},da:function(n,t){if(s.a.ob(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},qc:function(n,t){var r=n.nodeType?[n]:n;if(0<r.length){for(var f=r[0],e=f.parentNode,i=0,u=t.length;i<u;i++)e.insertBefore(t[i],f);for(i=0,u=r.length;i<u;i++)s.removeNode(r[i])}},za:function(n,t){if(n.length){for(t=8===t.nodeType&&t.parentNode||t;n.length&&n[0].parentNode!==t;)n.splice(0,1);for(;1<n.length&&n[n.length-1].parentNode!==t;)n.length--;if(1<n.length){var i=n[0],r=n[n.length-1];for(n.length=0;i!==r;)n.push(i),i=i.nextSibling;n.push(r)}}return n},sc:function(n,t){7>e?n.setAttribute("selected",t):n.selected=t},$a:function(t){return null===t||t===n?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(n,t){return n=n||"",t.length>n.length?!1:n.substring(0,t.length)===t},Mc:function(n,t){if(n===t)return!0;if(11===n.nodeType)return!1;if(t.contains)return t.contains(3===n.nodeType?n.parentNode:n);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(n)&16);for(;n&&n!=t;)n=n.parentNode;return!!n},nb:function(n){return s.a.Mc(n,n.ownerDocument.documentElement)},Qb:function(n){return!!s.a.Sb(n,s.a.nb)},A:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},Wb:function(n){return s.onError?function(){try{return n.apply(this,arguments)}catch(t){throw s.onError&&s.onError(t),t;}}:n},setTimeout:function(n,t){return setTimeout(s.a.Wb(n),t)},$b:function(n){setTimeout(function(){s.onError&&s.onError(n);throw n;},0)},p:function(n,t,r){var u=s.a.Wb(r),f,o;if(r=e&&b[t],s.options.useOnlyNativeEvents||r||!i)if(r||"function"!=typeof n.addEventListener)if("undefined"!=typeof n.attachEvent)f=function(t){u.call(n,t)},o="on"+t,n.attachEvent(o,f),s.a.F.oa(n,function(){n.detachEvent(o,f)});else throw Error("Browser doesn't support addEventListener or attachEvent");else n.addEventListener(t,u,!1);else i(n).bind(t,u)},Da:function(n,u){if(!n||!n.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===s.a.A(n)&&n.type&&"click"==u.toLowerCase()?(f=n.type,f="checkbox"==f||"radio"==f):f=!1,s.options.useOnlyNativeEvents||!i||f)if("function"==typeof t.createEvent)if("function"==typeof n.dispatchEvent)f=t.createEvent(p[u]||"HTMLEvents"),f.initEvent(u,!0,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(f);else throw Error("The supplied element doesn't support dispatchEvent");else if(f&&n.click)n.click();else if("undefined"!=typeof n.fireEvent)n.fireEvent("on"+u);else throw Error("Browser doesn't support triggering events");else i(n).trigger(u)},c:function(n){return s.H(n)?n():n},zb:function(n){return s.H(n)?n.t():n},bb:function(n,t,i){var r;t&&("object"==typeof n.classList?(r=n.classList[i?"add":"remove"],s.a.q(t.match(c),function(t){r.call(n.classList,t)})):"string"==typeof n.className.baseVal?v(n.className,"baseVal",t,i):v(n,"className",t,i))},Za:function(t,i){var r=s.a.c(i),u;(null===r||r===n)&&(r="");u=s.f.firstChild(t);!u||3!=u.nodeType||s.f.nextSibling(u)?s.f.da(t,[t.ownerDocument.createTextNode(r)]):u.data=r;s.a.Rc(t)},rc:function(n,i){if(n.name=i,7>=e)try{n.mergeAttributes(t.createElement("<input name='"+n.name+"'/>"),!1)}catch(r){}},Rc:function(n){9<=e&&(n=1==n.nodeType?n:n.parentNode,n.style&&(n.style.zoom=n.style.zoom))},Nc:function(n){if(e){var t=n.style.width;n.style.width=0;n.style.width=t}},hd:function(n,t){n=s.a.c(n);t=s.a.c(t);for(var r=[],i=n;i<=t;i++)r.push(i);return r},V:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},Yb:function(n){return w?Symbol(n):n},rd:6===e,sd:7===e,C:e,ec:function(n,t){for(var r=s.a.V(n.getElementsByTagName("input")).concat(s.a.V(n.getElementsByTagName("textarea"))),f="string"==typeof t?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;0<=i;i--)f(r[i])&&u.push(r[i]);return u},ed:function(n){return"string"==typeof n&&(n=s.a.$a(n))?u&&u.parse?u.parse(n):new Function("return "+n)():null},Eb:function(n,t,i){if(!u||!u.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return u.stringify(s.a.c(n),t,i)},fd:function(n,i,r){var c,e,h,f,u,l;r=r||{};var a=r.params||{},v=r.includeFields||this.cc,c=n;if("object"==typeof n&&"form"===s.a.A(n))for(c=n.action,e=v.length-1;0<=e;e--)for(h=s.a.ec(n,v[e]),f=h.length-1;0<=f;f--)a[h[f].name]=h[f].value;i=s.a.c(i);u=t.createElement("form");u.style.display="none";u.action=c;u.method="post";for(l in i)n=t.createElement("input"),n.type="hidden",n.name=l,n.value=s.a.Eb(s.a.c(i[l])),u.appendChild(n);o(a,function(n,i){var r=t.createElement("input");r.type="hidden";r.name=n;r.value=i;u.appendChild(r)});t.body.appendChild(u);r.submitter?r.submitter(u):u.submit();setTimeout(function(){u.parentNode.removeChild(u)},0)}}}();s.b("utils",s.a);s.b("utils.arrayForEach",s.a.q);s.b("utils.arrayFirst",s.a.Sb);s.b("utils.arrayFilter",s.a.Ka);s.b("utils.arrayGetDistinctValues",s.a.Tb);s.b("utils.arrayIndexOf",s.a.o);s.b("utils.arrayMap",s.a.fb);s.b("utils.arrayPushAll",s.a.ra);s.b("utils.arrayRemoveItem",s.a.La);s.b("utils.extend",s.a.extend);s.b("utils.fieldsIncludedWithJsonPost",s.a.cc);s.b("utils.getFormFields",s.a.ec);s.b("utils.peekObservable",s.a.zb);s.b("utils.postJson",s.a.fd);s.b("utils.parseJson",s.a.ed);s.b("utils.registerEventHandler",s.a.p);s.b("utils.stringifyJson",s.a.Eb);s.b("utils.range",s.a.hd);s.b("utils.toggleDomNodeCssClass",s.a.bb);s.b("utils.triggerEvent",s.a.Da);s.b("utils.unwrapObservable",s.a.c);s.b("utils.objectForEach",s.a.D);s.b("utils.addOrRemoveItem",s.a.pa);s.b("utils.setTextContent",s.a.Za);s.b("unwrap",s.a.c);Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i;return 1===arguments.length?function(){return t.apply(n,arguments)}:(i=Array.prototype.slice.call(arguments,1),function(){var r=i.slice(0);return r.push.apply(r,arguments),t.apply(n,r)})});s.a.e=new function(){function r(r,f){var e=r[t];if(!e||"null"===e||!i[e]){if(!f)return n;e=r[t]="ko"+u++;i[e]={}}return i[e]}var u=0,t="__ko__"+(new Date).getTime(),i={};return{get:function(t,i){var u=r(t,!1);return u===n?n:u[i]},set:function(t,i,u){(u!==n||r(t,!1)!==n)&&(r(t,!0)[i]=u)},clear:function(n){var r=n[t];return r?(delete i[r],n[t]=null,!0):!1},I:function(){return u+++t}}};s.b("utils.domData",s.a.e);s.b("utils.domData.clear",s.a.e.clear);s.a.F=new function(){function t(t,i){var r=s.a.e.get(t,u);return r===n&&i&&(r=[],s.a.e.set(t,u,r)),r}function r(n){var i=t(n,!1),u;if(i)for(i=i.slice(0),u=0;u<i.length;u++)i[u](n);if(s.a.e.clear(n),s.a.F.cleanExternalData(n),f[n.nodeType])for(i=n.firstChild;n=i;)i=n.nextSibling,8===n.nodeType&&r(n)}var u=s.a.e.I(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{oa:function(n,i){if("function"!=typeof i)throw Error("Callback must be a function");t(n,!0).push(i)},pc:function(i,r){var f=t(i,!1);f&&(s.a.La(f,r),0==f.length&&s.a.e.set(i,u,n))},$:function(n){var t,i,u;if(e[n.nodeType]&&(r(n),f[n.nodeType]))for(t=[],s.a.ra(t,n.getElementsByTagName("*")),i=0,u=t.length;i<u;i++)r(t[i]);return n},removeNode:function(n){s.$(n);n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){i&&"function"==typeof i.cleanData&&i.cleanData([n])}}};s.$=s.a.F.$;s.removeNode=s.a.F.removeNode;s.b("cleanNode",s.$);s.b("removeNode",s.removeNode);s.b("utils.domNodeDisposal",s.a.F);s.b("utils.domNodeDisposal.addDisposeCallback",s.a.F.oa);s.b("utils.domNodeDisposal.removeDisposeCallback",s.a.F.pc),function(){var h=[0,"",""],u=[1,"<table>","<\/table>"],f=[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],e=[1,"<select multiple='multiple'>","<\/select>"],c={thead:u,tbody:u,tfoot:u,tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:f,th:f,option:e,optgroup:e},o=8>=s.a.C;s.a.ma=function(n,u){var f,e;if(i){if(i.parseHTML)f=i.parseHTML(n,u)||[];else if((f=i.clean([n],u))&&f[0]){for(e=f[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{(f=u)||(f=t);var e=f.parentWindow||f.defaultView||r,v=s.a.$a(n).toLowerCase(),l=f.createElement("div"),a;for(a=(v=v.match(/^<([a-z]+)[ >]/))&&c[v[1]]||h,v=a[0],a="ignored<div>"+a[1]+n+a[2]+"<\/div>","function"==typeof e.innerShiv?l.appendChild(e.innerShiv(a)):(o&&f.appendChild(l),l.innerHTML=a,o&&l.parentNode.removeChild(l));v--;)l=l.lastChild;f=s.a.V(l.lastChild.childNodes)}return f};s.a.Cb=function(t,r){if(s.a.ob(t),r=s.a.c(r),null!==r&&r!==n)if("string"!=typeof r&&(r=r.toString()),i)i(t).html(r);else for(var f=s.a.ma(r,t.ownerDocument),u=0;u<f.length;u++)t.appendChild(f[u])}}();s.b("utils.parseHtmlFragment",s.a.ma);s.b("utils.setHtml",s.a.Cb);s.M=function(){function i(n,t){var r;if(n)if(8==n.nodeType)r=s.M.lc(n.nodeValue),null!=r&&t.push({Lc:n,cd:r});else if(1==n.nodeType)for(var r=0,u=n.childNodes,f=u.length;r<f;r++)i(u[r],t)}var t={};return{wb:function(n){if("function"!=typeof n)throw Error("You can only pass a function to ko.memoization.memoize()");var i=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[i]=n,"<!--[ko_memo:"+i+"]-->"},xc:function(i,r){var u=t[i];if(u===n)throw Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized.");try{return u.apply(null,r||[]),!0}finally{delete t[i]}},yc:function(n,t){var f=[],u,o,r,e;for(i(n,f),u=0,o=f.length;u<o;u++)r=f[u].Lc,e=[r],t&&s.a.ra(e,t),s.M.xc(f[u].cd,e),r.nodeValue="",r.parentNode&&r.parentNode.removeChild(r)},lc:function(n){return(n=n.match(/^\[ko_memo\:(.*?)\]$/))?n[1]:null}}}();s.b("memoization",s.M);s.b("memoization.memoize",s.M.wb);s.b("memoization.unmemoize",s.M.xc);s.b("memoization.parseMemoText",s.M.lc);s.b("memoization.unmemoizeDomNodeAndDescendants",s.M.yc);s.Y=function(){function f(){if(n)for(var t=n,r=0,f;i<n;)if(f=u[i++]){if(i>t){if(5e3<=++r){i=n;s.a.$b(Error("'Too much recursion' after processing "+r+" task groups."));break}t=n}try{f()}catch(e){s.a.$b(e)}}}function e(){f();i=n=u.length=0}var u=[],n=0,o=1,i=0;return{scheduler:r.MutationObserver?function(n){var i=t.createElement("div");return new MutationObserver(n).observe(i,{attributes:!0}),function(){i.classList.toggle("foo")}}(e):t&&"onreadystatechange"in t.createElement("script")?function(n){var i=t.createElement("script");i.onreadystatechange=function(){i.onreadystatechange=null;t.documentElement.removeChild(i);i=null;n()};t.documentElement.appendChild(i)}:function(n){setTimeout(n,0)},Wa:function(t){return n||s.Y.scheduler(e),u[n++]=t,o++},cancel:function(t){t-=o-n;t>=i&&t<n&&(u[t]=null)},resetForTesting:function(){var t=n-i;return i=n=u.length=0,t},md:f}}();s.b("tasks",s.Y);s.b("tasks.schedule",s.Y.Wa);s.b("tasks.runEarly",s.Y.md);s.ya={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return s.B({read:n,write:function(r){clearTimeout(i);i=s.a.setTimeout(function(){n(r)},t)}})},rateLimit:function(n,t){var i,r,u;"number"==typeof t?i=t:(i=t.timeout,r=t.method);n.cb=!1;u="notifyWhenChangesStop"==r?it:tt;n.Ta(function(n){return u(n,i)})},deferred:function(t,i){if(!0!==i)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.cb||(t.cb=!0,t.Ta(function(i){var r;return function(){s.Y.cancel(r);r=s.Y.Wa(i);t.notifySubscribers(n,"dirty")}}))},notify:function(n,t){n.equalityComparer="always"==t?null:b}};nt={undefined:1,boolean:1,number:1,string:1};s.b("extenders",s.ya);s.vc=function(n,t,i){this.ia=n;this.gb=t;this.Kc=i;this.R=!1;s.G(this,"dispose",this.k)};s.vc.prototype.k=function(){this.R=!0;this.Kc()};s.J=function(){s.a.Ya(this,l);l.rb(this)};p="change";l={rb:function(n){n.K={};n.Nb=1},X:function(n,t,i){var r=this,u;return i=i||p,u=new s.vc(r,t?n.bind(t):n,function(){s.a.La(r.K[i],u);r.Ia&&r.Ia(i)}),r.sa&&r.sa(i),r.K[i]||(r.K[i]=[]),r.K[i].push(u),u},notifySubscribers:function(n,t){if(t=t||p,t===p&&this.zc(),this.Pa(t))try{s.l.Ub();for(var u=this.K[t].slice(0),r=0,i;i=u[r];++r)i.R||i.gb(n)}finally{s.l.end()}},Na:function(){return this.Nb},Uc:function(n){return this.Na()!==n},zc:function(){++this.Nb},Ta:function(n){var t=this,e=s.H(t),r,u,i,f;t.Ha||(t.Ha=t.notifySubscribers,t.notifySubscribers=rt);f=n(function(){t.Mb=!1;e&&i===t&&(i=t());r=!1;t.tb(u,i)&&t.Ha(u=i)});t.Lb=function(n){t.Mb=r=!0;i=n;f()};t.Kb=function(n){r||(u=n,t.Ha(n,"beforeChange"))}},Pa:function(n){return this.K[n]&&this.K[n].length},Sc:function(n){if(n)return this.K[n]&&this.K[n].length||0;var t=0;return s.a.D(this.K,function(n,i){"dirty"!==n&&(t+=i.length)}),t},tb:function(n,t){return!this.equalityComparer||!this.equalityComparer(n,t)},extend:function(n){var t=this;return n&&s.a.D(n,function(n,i){var r=s.ya[n];"function"==typeof r&&(t=r(t,i)||t)}),t}};s.G(l,"subscribe",l.X);s.G(l,"extend",l.extend);s.G(l,"getSubscriptionsCount",l.Sc);s.a.ka&&s.a.Xa(l,Function.prototype);s.J.fn=l;s.hc=function(n){return null!=n&&"function"==typeof n.X&&"function"==typeof n.notifySubscribers};s.b("subscribable",s.J);s.b("isSubscribable",s.hc);s.va=s.l=function(){function t(t){r.push(n);n=t}function i(){n=r.pop()}var r=[],n,u=0;return{Ub:t,end:i,oc:function(t){if(n){if(!s.hc(t))throw Error("Only subscribable things can act as dependencies");n.gb.call(n.Gc,t,t.Cc||(t.Cc=++u))}},w:function(n,r,u){try{return t(),n.apply(r,u||[])}finally{i()}},Aa:function(){if(n)return n.m.Aa()},Sa:function(){if(n)return n.Sa}}}();s.b("computedContext",s.va);s.b("computedContext.getDependenciesCount",s.va.Aa);s.b("computedContext.isInitial",s.va.Sa);s.b("ignoreDependencies",s.qd=s.l.w);v=s.a.Yb("_latestValue");s.N=function(n){function t(){return 0<arguments.length?(t.tb(t[v],arguments[0])&&(t.ga(),t[v]=arguments[0],t.fa()),this):(s.l.oc(t),t[v])}return t[v]=n,s.a.ka||s.a.extend(t,s.J.fn),s.J.fn.rb(t),s.a.Ya(t,a),s.options.deferUpdates&&s.ya.deferred(t,!0),t};a={equalityComparer:b,t:function(){return this[v]},fa:function(){this.notifySubscribers(this[v])},ga:function(){this.notifySubscribers(this[v],"beforeChange")}};s.a.ka&&s.a.Xa(a,s.J.fn);y=s.N.gd="__ko_proto__";a[y]=s.N;s.Oa=function(t,i){return null===t||t===n||t[y]===n?!1:t[y]===i?!0:s.Oa(t[y],i)};s.H=function(n){return s.Oa(n,s.N)};s.Ba=function(n){return"function"==typeof n&&n[y]===s.N||"function"==typeof n&&n[y]===s.B&&n.Vc?!0:!1};s.b("observable",s.N);s.b("isObservable",s.H);s.b("isWriteableObservable",s.Ba);s.b("isWritableObservable",s.Ba);s.b("observable.fn",a);s.G(a,"peek",a.t);s.G(a,"valueHasMutated",a.fa);s.G(a,"valueWillMutate",a.ga);s.la=function(n){if(n=n||[],"object"!=typeof n||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=s.N(n),s.a.Ya(n,s.la.fn),n.extend({trackArrayChanges:!0})};s.la.fn={remove:function(n){for(var u,r=this.t(),i=[],f="function"!=typeof n||s.H(n)?function(t){return t===n}:n,t=0;t<r.length;t++)u=r[t],f(u)&&(0===i.length&&this.ga(),i.push(u),r.splice(t,1),t--);return i.length&&this.fa(),i},removeAll:function(t){if(t===n){var i=this.t(),r=i.slice(0);return this.ga(),i.splice(0,i.length),this.fa(),r}return t?this.remove(function(n){return 0<=s.a.o(t,n)}):[]},destroy:function(n){var i=this.t(),r="function"!=typeof n||s.H(n)?function(t){return t===n}:n,t;for(this.ga(),t=i.length-1;0<=t;t--)r(i[t])&&(i[t]._destroy=!0);this.fa()},destroyAll:function(t){return t===n?this.destroy(function(){return!0}):t?this.destroy(function(n){return 0<=s.a.o(t,n)}):[]},indexOf:function(n){var t=this();return s.a.o(t,n)},replace:function(n,t){var i=this.indexOf(n);0<=i&&(this.ga(),this.t()[i]=t,this.fa())}};s.a.ka&&s.a.Xa(s.la.fn,s.N.fn);s.a.q("pop push reverse shift sort splice unshift".split(" "),function(n){s.la.fn[n]=function(){var t=this.t(),i;return this.ga(),this.Vb(t,n,arguments),i=t[n].apply(t,arguments),this.fa(),i===t?this:i}});s.a.q(["slice"],function(n){s.la.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}});s.b("observableArray",s.la);s.ya.trackArrayChanges=function(n,t){function h(){var e,t;r||(r=!0,e=n.notifySubscribers,n.notifySubscribers=function(n,t){return t&&t!==p||++u,e.apply(this,arguments)},t=[].concat(n.t()||[]),i=null,f=n.X(function(r){if(r=[].concat(r||[]),n.Pa("arrayChange")){var f;(!i||1<u)&&(i=s.a.ib(t,r,n.hb));f=i}t=r;i=null;u=0;f&&f.length&&n.notifySubscribers(f,"arrayChange")}))}if(n.hb={},t&&"object"==typeof t&&s.a.extend(n.hb,t),n.hb.sparse=!0,!n.Vb){var r=!1,i=null,f,u=0,e=n.sa,o=n.Ia;n.sa=function(t){e&&e.call(n,t);"arrayChange"===t&&h()};n.Ia=function(t){o&&o.call(n,t);"arrayChange"!==t||n.Pa("arrayChange")||(f.k(),r=!1)};n.Vb=function(n,t,f){function c(n,t,i){return l[l.length]={status:n,value:t,index:i}}if(r&&!u){var l=[],e=n.length,h=f.length,o=0;switch(t){case"push":o=e;case"unshift":for(t=0;t<h;t++)c("added",f[t],o+t);break;case"pop":o=e-1;case"shift":e&&c("deleted",n[o],o);break;case"splice":t=Math.min(Math.max(0,0>f[0]?e+f[0]:f[0]),e);for(var e=1===h?e:Math.min(t+(f[1]||0),e),h=t+h-2,o=Math.max(e,h),a=[],v=[],y=2;t<o;++t,++y)t<e&&v.push(c("deleted",n[t],t)),t<h&&a.push(c("added",f[y],t));s.a.dc(v,a);break;default:return}i=l}}}};h=s.a.Yb("_state");s.m=s.B=function(t,i,r){function u(){if(0<arguments.length){if("function"==typeof e)e.apply(f.pb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return s.l.oc(u),(f.S||f.s&&u.Qa())&&u.aa(),f.T}if("object"==typeof t?r=t:(r=r||{},t&&(r.read=t)),"function"!=typeof r.read)throw Error("Pass a function that returns the value of the ko.computed");var e=r.write,f={T:n,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:r.read,pb:i||r.owner,i:r.disposeWhenNodeIsRemoved||r.i||null,wa:r.disposeWhen||r.wa,mb:null,r:{},L:0,bc:null};return u[h]=f,u.Vc="function"==typeof e,s.a.ka||s.a.extend(u,s.J.fn),s.J.fn.rb(u),s.a.Ya(u,c),r.pure?(f.Va=!0,f.s=!0,s.a.extend(u,et)):r.deferEvaluation&&s.a.extend(u,ot),s.options.deferUpdates&&s.ya.deferred(u,!0),f.i&&(f.Fb=!0,f.i.nodeType||(f.i=null)),f.s||r.deferEvaluation||u.aa(),f.i&&u.ba()&&s.a.F.oa(f.i,f.mb=function(){u.k()}),u};var c={equalityComparer:b,Aa:function(){return this[h].L},Pb:function(n,t,i){if(this[h].Va&&t===this)throw Error("A 'pure' computed must not be called recursively");this[h].r[n]=i;i.Ga=this[h].L++;i.na=t.Na()},Qa:function(){var n,t,i=this[h].r;for(n in i)if(i.hasOwnProperty(n)&&(t=i[n],t.ia.Uc(t.na)))return!0},bd:function(){this.Fa&&!this[h].Ra&&this.Fa()},ba:function(){return this[h].S||0<this[h].L},ld:function(){this.Mb||this.ac()},uc:function(n){if(n.cb&&!this[h].i){var t=n.X(this.bd,this,"dirty"),i=n.X(this.ld,this);return{ia:n,k:function(){t.k();i.k()}}}return n.X(this.ac,this)},ac:function(){var n=this,t=n.throttleEvaluation;t&&0<=t?(clearTimeout(this[h].bc),this[h].bc=s.a.setTimeout(function(){n.aa(!0)},t)):n.Fa?n.Fa():n.aa(!0)},aa:function(n){var t=this[h],i=t.wa;if(!t.Ra&&!t.R){if(t.i&&!s.a.nb(t.i)||i&&i()){if(!t.Fb){this.k();return}}else t.Fb=!1;t.Ra=!0;try{this.Qc(n)}finally{t.Ra=!1}t.L||this.k()}},Qc:function(t){var i=this[h],u=i.Va?n:!i.L,r={Hc:this,Ma:i.r,lb:i.L};s.l.Ub({Gc:r,gb:ft,m:this,Sa:u});i.r={};i.L=0;r=this.Pc(i,r);this.tb(i.T,r)&&(i.s||this.notifySubscribers(i.T,"beforeChange"),i.T=r,i.s?this.zc():t&&this.notifySubscribers(i.T));u&&this.notifySubscribers(i.T,"awake")},Pc:function(n,t){try{var i=n.jd;return n.pb?i.call(n.pb):i()}finally{s.l.end();t.lb&&!n.s&&s.a.D(t.Ma,ut);n.S=!1}},t:function(){var n=this[h];return(n.S&&!n.L||n.s&&this.Qa())&&this.aa(),n.T},Ta:function(n){s.J.fn.Ta.call(this,n);this.Fa=function(){this.Kb(this[h].T);this[h].S=!0;this.Lb(this)}},k:function(){var n=this[h];!n.s&&n.r&&s.a.D(n.r,function(n,t){t.k&&t.k()});n.i&&n.mb&&s.a.F.pc(n.i,n.mb);n.r=null;n.L=0;n.R=!0;n.S=!1;n.s=!1;n.i=null}},et={sa:function(n){var i=this,t=i[h],r;!t.R&&t.s&&"change"==n&&(t.s=!1,t.S||i.Qa()?(t.r=null,t.L=0,t.S=!0,i.aa()):(r=[],s.a.D(t.r,function(n,t){r[t.Ga]=n}),s.a.q(r,function(n,r){var f=t.r[n],u=i.uc(f.ia);u.Ga=r;u.na=f.na;t.r[n]=u})),t.R||i.notifySubscribers(t.T,"awake"))},Ia:function(t){var i=this[h];i.R||"change"!=t||this.Pa("change")||(s.a.D(i.r,function(n,t){t.k&&(i.r[n]={ia:t.ia,Ga:t.Ga,na:t.na},t.k())}),i.s=!0,this.notifySubscribers(n,"asleep"))},Na:function(){var n=this[h];return n.s&&(n.S||this.Qa())&&this.aa(),s.J.fn.Na.call(this)}},ot={sa:function(n){"change"!=n&&"beforeChange"!=n||this.t()}};s.a.ka&&s.a.Xa(c,s.J.fn);d=s.N.gd;s.m[d]=s.N;c[d]=s.m;s.Xc=function(n){return s.Oa(n,s.m)};s.Yc=function(n){return s.Oa(n,s.m)&&n[h]&&n[h].Va};s.b("computed",s.m);s.b("dependentObservable",s.m);s.b("isComputed",s.Xc);s.b("isPureComputed",s.Yc);s.b("computed.fn",c);s.G(c,"peek",c.t);s.G(c,"dispose",c.k);s.G(c,"isActive",c.ba);s.G(c,"getDependenciesCount",c.Aa);s.nc=function(n,t){return"function"==typeof n?s.m(n,t,{pure:!0}):(n=s.a.extend({},n),n.pure=!0,s.m(n,t))};s.b("pureComputed",s.nc),function(){function t(u,f,e){if(e=e||new i,u=f(u),"object"!=typeof u||null===u||u===n||u instanceof RegExp||u instanceof Date||u instanceof String||u instanceof Number||u instanceof Boolean)return u;var o=u instanceof Array?[]:{};return e.save(u,o),r(u,function(i){var r=f(u[i]),s;switch(typeof r){case"boolean":case"number":case"string":case"function":o[i]=r;break;case"object":case"undefined":s=e.get(r);o[i]=s!==n?s:t(r,f,e)}}),o}function r(n,t){if(n instanceof Array){for(var i=0;i<n.length;i++)t(i);"function"==typeof n.toJSON&&t("toJSON")}else for(i in n)t(i)}function i(){this.keys=[];this.Ib=[]}s.wc=function(n){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(n,function(n){for(var t=0;s.H(n)&&10>t;t++)n=n();return n})};s.toJSON=function(n,t,i){return n=s.wc(n),s.a.Eb(n,t,i)};i.prototype={save:function(n,t){var i=s.a.o(this.keys,n);0<=i?this.Ib[i]=t:(this.keys.push(n),this.Ib.push(t))},get:function(t){return t=s.a.o(this.keys,t),0<=t?this.Ib[t]:n}}}();s.b("toJS",s.wc);s.b("toJSON",s.toJSON),function(){s.j={u:function(t){switch(s.a.A(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?s.a.e.get(t,s.d.options.xb):7>=s.a.C?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?s.j.u(t.options[t.selectedIndex]):n;default:return t.value}},ha:function(t,i,r){switch(s.a.A(t)){case"option":switch(typeof i){case"string":s.a.e.set(t,s.d.options.xb,n);"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__;t.value=i;break;default:s.a.e.set(t,s.d.options.xb,i);t.__ko__hasDomDataOptionValue__=!0;t.value="number"==typeof i?i:""}break;case"select":(""===i||null===i)&&(i=n);for(var f=-1,u=0,o=t.options.length,e;u<o;++u)if(e=s.j.u(t.options[u]),e==i||""==e&&i===n){f=u;break}(r||0<=f||i===n&&1<t.size)&&(t.selectedIndex=f);break;default:(null===i||i===n)&&(i="");t.value=i}}}}();s.b("selectExtensions",s.j);s.b("selectExtensions.readValue",s.j.u);s.b("selectExtensions.writeValue",s.j.ha);s.h=function(){function n(n){var c,u,i;n=s.a.$a(n);123===n.charCodeAt(0)&&(n=n.slice(1,-1));var a=[],h=n.match(t),o,r=[],l=0;if(h)for(h.push(","),c=0;u=h[c];++c){if(i=u.charCodeAt(0),44===i){if(0>=l){a.push(o&&r.length?{key:o,value:r.join("")}:{unknown:o||r.join("")});o=l=0;r=[];continue}}else if(58===i){if(!l&&!o&&1===r.length){o=r.pop();continue}}else 47===i&&c&&1<u.length?(i=h[c-1].match(f))&&!e[i[0]]&&(n=n.substr(n.indexOf(u)+1),h=n.match(t),h.push(","),c=-1,u="/"):40===i||123===i||91===i?++l:41===i||125===i||93===i?--l:o||r.length||34!==i&&39!==i||(u=u.slice(1,-1));r.push(u)}return a}var r=["true","false","null","undefined"],u=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,t=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,e={"in":1,"return":1,"typeof":1},i={};return{ta:[],ea:i,yb:n,Ua:function(t,f){function e(n,t){var a,f;if(!l){if(f=s.getBindingHandler(n),f&&f.preprocess&&!(t=f.preprocess(t,n,e)))return;(f=i[n])&&(a=t,0<=s.a.o(r,a)?a=!1:(f=a.match(u),a=null===f?!1:f[1]?"Object("+f[1]+")"+f[2]:a),f=a);f&&o.push("'"+n+"':function(_z){"+a+"=_z}")}c&&(t="function(){return "+t+" }");h.push("'"+n+"':"+t)}f=f||{};var h=[],o=[],c=f.valueAccessors,l=f.bindingParams,a="string"==typeof t?n(t):t;return s.a.q(a,function(n){e(n.key||n.unknown,n.value)}),o.length&&e("_ko_property_writers","{"+o.join(",")+" }"),h.join(",")},ad:function(n,t){for(var i=0;i<n.length;i++)if(n[i].key==t)return!0;return!1},Ea:function(n,t,i,r,u){n&&s.H(n)?!s.Ba(n)||u&&n.t()===r||n(r):(n=t.get("_ko_property_writers"))&&n[i]&&n[i](r)}}}();s.b("expressionRewriting",s.h);s.b("expressionRewriting.bindingRewriteValidators",s.h.ta);s.b("expressionRewriting.parseObjectLiteral",s.h.yb);s.b("expressionRewriting.preProcessBindings",s.h.Ua);s.b("expressionRewriting._twoWayBindings",s.h.ea);s.b("jsonExpressionRewriting",s.h);s.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",s.h.Ua),function(){function n(n){return 8==n.nodeType&&e.test(i?n.text:n.nodeValue)}function r(n){return 8==n.nodeType&&o.test(i?n.text:n.nodeValue)}function u(t,i){for(var u=t,f=1,e=[];u=u.nextSibling;){if(r(u)&&(f--,0===f))return e;e.push(u);n(u)&&f++}if(!i)throw Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function f(n,t){var i=u(n,t);return i?0<i.length?i[i.length-1].nextSibling:n.nextSibling:null}var i=t&&"<!--test-->"===t.createComment("test").text,e=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,o=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,h={ul:!0,ol:!0};s.f={Z:{},childNodes:function(t){return n(t)?u(t):t.childNodes},xa:function(t){if(n(t)){t=s.f.childNodes(t);for(var i=0,r=t.length;i<r;i++)s.removeNode(t[i])}else s.a.ob(t)},da:function(t,i){if(n(t)){s.f.xa(t);for(var u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u)}else s.a.da(t,i)},mc:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},gc:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):s.f.mc(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||r(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return n(t)&&(t=f(t)),t.nextSibling&&r(t.nextSibling)?null:t.nextSibling},Tc:n,pd:function(n){return(n=(i?n.text:n.nodeValue).match(e))?n[1]:null},kc:function(t){var o,i,u,e;if(h[s.a.A(t)]&&(o=t.firstChild,o))do if(1===o.nodeType){if(i=o.firstChild,u=null,i)do u?u.push(i):n(i)?(e=f(i,!0),e?i=e:u=[i]):r(i)&&(u=[i]);while(i=i.nextSibling);if(i=u)for(u=o.nextSibling,e=0;e<i.length;e++)u?t.insertBefore(i[e],u):t.appendChild(i[e])}while(o=o.nextSibling)}}}();s.b("virtualElements",s.f);s.b("virtualElements.allowedBindings",s.f.Z);s.b("virtualElements.emptyNode",s.f.xa);s.b("virtualElements.insertAfter",s.f.gc);s.b("virtualElements.prepend",s.f.mc);s.b("virtualElements.setDomNodeChildren",s.f.da),function(){s.Q=function(){this.Fc={}};s.a.extend(s.Q.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return null!=n.getAttribute("data-bind")||s.g.getComponentNameForNode(n);case 8:return s.f.Tc(n);default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n):null;return s.g.Ob(i,n,t,!1)},getBindingAccessors:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n,{valueAccessors:!0}):null;return s.g.Ob(i,n,t,!0)},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return s.f.pd(n);default:return null}},parseBindingsString:function(n,t,i,r){var u,f,e,h,c;try{return u=this.Fc,f=n+(r&&r.valueAccessors||""),(e=u[f])||(c="with($context){with($data||{}){return{"+s.h.Ua(n,r)+"}}}",h=new Function("$context","$element",c),e=u[f]=h),e(t,i)}catch(o){throw o.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+o.message,o;}}});s.Q.instance=new s.Q}();s.b("bindingProvider",s.Q),function(){function v(n){return function(){return n}}function u(n){return n()}function o(n){return s.a.Ca(s.l.w(n),function(t,i){return function(){return n()[i]}})}function y(n,t,i){return"function"==typeof n?o(n.bind(null,t,i)):s.a.Ca(n,v)}function p(n,t){return o(this.getBindings.bind(this,n,t))}function h(n,t,i){var r,u=s.f.firstChild(t),f=s.Q.instance,e=f.preprocessNode;if(e){for(;r=u;)u=s.f.nextSibling(r),e.call(f,r);u=s.f.firstChild(t)}for(;r=u;)u=s.f.nextSibling(r),c(n,r,i)}function c(n,t,i){var u=!0,r=1===t.nodeType;r&&s.f.kc(t);(r&&i||s.Q.instance.nodeHasBindings(t))&&(u=l(t,null,n,i).shouldBindDescendants);u&&!a[s.a.A(t)]&&h(n,t,!r)}function w(n){var i=[],r={},t=[];return s.a.D(n,function u(f){if(!r[f]){var e=s.getBindingHandler(f);e&&(e.after&&(t.push(f),s.a.q(e.after,function(i){if(n[i]){if(-1!==s.a.o(t,i))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+t.join(", "));u(i)}}),t.length--),i.push({key:f,fc:e}));r[f]=!0}}),i}function l(t,i,r,e){var v=s.a.e.get(t,f),o,l,a,c;if(!i){if(v)throw Error("You cannot apply bindings multiple times to the same element.");s.a.e.set(t,f,!0)}if(!v&&e&&s.tc(t,r),i&&"function"!=typeof i)o=i;else{var y=s.Q.instance,b=y.getBindingAccessors||p,h=s.B(function(){return(o=i?i(r,t):b.call(y,t,r))&&r.P&&r.P(),o},null,{i:t});o&&h.ba()||(h=null)}return o&&(a=h?function(n){return function(){return u(h()[n])}}:function(n){return o[n]},c=function(){return s.a.Ca(h?h():o,u)},c.get=function(n){return o[n]&&u(a(n))},c.has=function(n){return n in o},e=w(o),s.a.q(e,function(i){var e=i.fc.init,h=i.fc.update,u=i.key;if(8===t.nodeType&&!s.f.Z[u])throw Error("The binding '"+u+"' cannot be used with virtual elements");try{"function"==typeof e&&s.l.w(function(){var i=e(t,a(u),c,r.$data,r);if(i&&i.controlsDescendantBindings){if(l!==n)throw Error("Multiple bindings ("+l+" and "+u+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");l=u}});"function"==typeof h&&s.B(function(){h(t,a(u),c,r.$data,r)},null,{i:t})}catch(f){throw f.message='Unable to process binding "'+u+": "+o[u]+'"\nMessage: '+f.message,f;}})),{shouldBindDescendants:l===n}}function t(n){return n&&n instanceof s.U?n:new s.U(n)}var a,f,e;s.d={};a={script:!0,textarea:!0,template:!0};s.getBindingHandler=function(n){return s.d[n]};s.U=function(t,i,r,u){var f=this,h="function"==typeof t&&!s.H(t),o,e=s.B(function(){var o=h?t():t,n=s.a.c(o);return i?(i.P&&i.P(),s.a.extend(f,i),e&&(f.P=e)):(f.$parents=[],f.$root=n,f.ko=s),f.$rawData=o,f.$data=n,r&&(f[r]=n),u&&u(f,i,n),f.$data},null,{wa:function(){return o&&!s.a.Qb(o)},i:!0});e.ba()&&(f.P=e,e.equalityComparer=null,o=[],e.Ac=function(t){o.push(t);s.a.F.oa(t,function(t){s.a.La(o,t);o.length||(e.k(),f.P=e=n)})})};s.U.prototype.createChildContext=function(n,t,i){return new s.U(n,this,t,function(n,t){n.$parentContext=t;n.$parent=t.$data;n.$parents=(t.$parents||[]).slice(0);n.$parents.unshift(n.$parent);i&&i(n)})};s.U.prototype.extend=function(n){return new s.U(this.P||this.$data,this,null,function(t,i){t.$rawData=i.$rawData;s.a.extend(t,"function"==typeof n?n():n)})};f=s.a.e.I();e=s.a.e.I();s.tc=function(n,t){if(2==arguments.length)s.a.e.set(n,e,t),t.P&&t.P.Ac(n);else return s.a.e.get(n,e)};s.Ja=function(n,i,r){return 1===n.nodeType&&s.f.kc(n),l(n,i,t(r),!0)};s.Dc=function(n,i,r){return r=t(r),s.Ja(n,y(i,r,n),r)};s.eb=function(n,i){1!==i.nodeType&&8!==i.nodeType||h(t(n),i,!0)};s.Rb=function(n,u){if(!i&&r.jQuery&&(i=r.jQuery),u&&1!==u.nodeType&&8!==u.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");u=u||r.document.body;c(t(n),u,!0)};s.kb=function(t){switch(t.nodeType){case 1:case 8:var i=s.tc(t);if(i)return i;if(t.parentNode)return s.kb(t.parentNode)}return n};s.Jc=function(t){return(t=s.kb(t))?t.$data:n};s.b("bindingHandlers",s.d);s.b("applyBindings",s.Rb);s.b("applyBindingsToDescendants",s.eb);s.b("applyBindingAccessorsToNode",s.Ja);s.b("applyBindingsToNode",s.Dc);s.b("contextFor",s.kb);s.b("dataFor",s.Jc)}(),function(n){function u(t,u){var e=i.hasOwnProperty(t)?i[t]:n,o;e?e.X(u):(e=i[t]=new s.J,e.X(u),f(t,function(n,u){var f=!(!u||!u.synchronous);r[t]={definition:n,Zc:f};delete i[t];o||f?e.notifySubscribers(n):s.Y.Wa(function(){e.notifySubscribers(n)})}),o=!0)}function f(n,i){t("getConfig",[n],function(r){r?t("loadComponent",[n,r],function(n){i(n,r)}):i(null,null)})}function t(i,r,u,f){var e,o,h;if(f||(f=s.g.loaders.slice(0)),e=f.shift(),e)if(o=e[i],o){if(h=!1,o.apply(e,r.concat(function(n){h?u(null):null!==n?u(n):t(i,r,u,f)}))!==n&&(h=!0,!e.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else t(i,r,u,f);else u(null)}var i={},r={};s.g={get:function(t,i){var f=r.hasOwnProperty(t)?r[t]:n;f?f.Zc?s.l.w(function(){i(f.definition)}):s.Y.Wa(function(){i(f.definition)}):u(t,i)},Xb:function(n){delete r[n]},Jb:t};s.g.loaders=[];s.b("components",s.g);s.b("components.get",s.g.get);s.b("components.clearCachedDefinition",s.g.Xb)}(),function(){function l(n,t,r,f){function e(){0==--c&&f(o)}var o={},c=2,h=r.template;r=r.viewModel;h?u(t,h,function(t){s.g.Jb("loadTemplate",[n,t],function(n){o.template=n;e()})}):e();r?u(t,r,function(t){s.g.Jb("loadViewModel",[n,t],function(n){o[i]=n;e()})}):e()}function e(n,t,r){if("function"==typeof t)r(function(n){return new t(n)});else if("function"==typeof t[i])r(t[i]);else if("instance"in t){var u=t.instance;r(function(){return u})}else"viewModel"in t?e(n,t.viewModel,r):n("Unknown viewModel value: "+t)}function h(n){switch(s.a.A(n)){case"script":return s.a.ma(n.text);case"textarea":return s.a.ma(n.value);case"template":if(c(n.content))return s.a.ua(n.content.childNodes)}return s.a.ua(n.childNodes)}function c(n){return r.DocumentFragment?n instanceof DocumentFragment:n&&11===n.nodeType}function u(n,t,i){"string"==typeof t.require?o||r.require?(o||r.require)([t.require],i):n("Uses require, but no AMD loader is present"):i(t)}function f(n){return function(t){throw Error("Component '"+n+"': "+t);}}var n={},i;s.g.register=function(t,i){if(!i)throw Error("Invalid configuration for "+t);if(s.g.ub(t))throw Error("Component "+t+" is already registered");n[t]=i};s.g.ub=function(t){return n.hasOwnProperty(t)};s.g.od=function(t){delete n[t];s.g.Xb(t)};s.g.Zb={getConfig:function(t,i){i(n.hasOwnProperty(t)?n[t]:null)},loadComponent:function(n,t,i){var r=f(n);u(r,t,function(t){l(n,r,t,i)})},loadTemplate:function(n,i,u){if(n=f(n),"string"==typeof i)u(s.a.ma(i));else if(i instanceof Array)u(i);else if(c(i))u(s.a.V(i.childNodes));else if(i.element)if(i=i.element,r.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)u(h(i));else if("string"==typeof i){var e=t.getElementById(i);e?u(h(e)):n("Cannot find element with ID "+i)}else n("Unknown element type: "+i);else n("Unknown template value: "+i)},loadViewModel:function(n,t,i){e(f(n),t,i)}};i="createViewModel";s.b("components.register",s.g.register);s.b("components.isRegistered",s.g.ub);s.b("components.unregister",s.g.od);s.b("components.defaultLoader",s.g.Zb);s.g.loaders.push(s.g.Zb);s.g.Bc=n}(),function(){function n(n,t){var r=n.getAttribute("params");if(r){var r=i.parseBindingsString(r,t,n,{valueAccessors:!0,bindingParams:!0}),r=s.a.Ca(r,function(t){return s.m(t,null,{i:n})}),u=s.a.Ca(r,function(t){var i=t.t();return t.ba()?s.m({read:function(){return s.a.c(t())},write:s.Ba(i)&&function(n){t()(n)},i:n}):i});return u.hasOwnProperty("$raw")||(u.$raw=r),u}return{$raw:{}}}s.g.getComponentNameForNode=function(n){var t=s.a.A(n);if(s.g.ub(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+n||8>=s.a.C&&n.tagName===t))return t};s.g.Ob=function(t,i,r,u){var f,e;if(1===i.nodeType&&(f=s.g.getComponentNameForNode(i),f)){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');e={name:f,params:n(i,r)};t.component=u?function(){return e}:e}return t};var i=new s.Q;9>s.a.C&&(s.g.register=function(n){return function(i){return t.createElement(i),n.apply(this,arguments)}}(s.g.register),t.createDocumentFragment=function(n){return function(){var i=n(),r=s.g.Bc,t;for(t in r)r.hasOwnProperty(t)&&i.createElement(t);return i}}(t.createDocumentFragment))}(),function(n){function t(n,t,i){if(t=t.template,!t)throw Error("Component '"+n+"' has no template");n=s.a.ua(t);s.f.da(i,n)}function i(n,t,i,r){var u=n.createViewModel;return u?u.call(n,r,{element:t,templateNodes:i}):r}var r=0;s.d.component={init:function(u,f,e,o,h){function a(){var n=c&&c.dispose;"function"==typeof n&&n.call(c);l=c=null}var c,l,v=s.a.V(s.f.childNodes(u));return s.a.F.oa(u,a),s.m(function(){var o=s.a.c(f()),e,y,p;if("string"==typeof o?e=o:(e=s.a.c(o.name),y=s.a.c(o.params)),!e)throw Error("No component name specified");p=l=++r;s.g.get(e,function(r){if(l===p){if(a(),!r)throw Error("Unknown component '"+e+"'");t(e,r,u);var f=i(r,u,v,y);r=h.createChildContext(f,n,function(n){n.$component=f;n.$componentTemplateNodes=v});c=f;s.eb(r,u)}})},null,{i:u}),{controlsDescendantBindings:!0}}};s.f.Z.component=!0}();g={"class":"className","for":"htmlFor"};s.d.attr={update:function(t,i){var r=s.a.c(i())||{};s.a.D(r,function(i,r){r=s.a.c(r);var u=!1===r||null===r||r===n;u&&t.removeAttribute(i);8>=s.a.C&&i in g?(i=g[i],u?t.removeAttribute(i):t[i]=r):u||t.setAttribute(i,r.toString());"name"===i&&s.a.rc(t,u?"":r.toString())})}},function(){s.d.checked={after:["value","attr"],init:function(t,i,r){function l(){var l=t.checked,o=y?f():l,n,h;s.va.Sa()||e&&!l||(n=s.l.w(i),u?(h=a?n.t():n,c!==o?(l&&(s.a.pa(h,o,!0),s.a.pa(h,c,!1)),c=o):s.a.pa(h,o,l),a&&s.Ba(n)&&n(h)):s.h.Ea(n,r,"checked",o,!0))}function v(){var n=s.a.c(i());t.checked=u?0<=s.a.o(n,f()):h?n:f()===n}var f=s.nc(function(){return r.has("checkedValue")?s.a.c(r.get("checkedValue")):r.has("value")?s.a.c(r.get("value")):t.value}),h="checkbox"==t.type,e="radio"==t.type;if(h||e){var o=i(),u=h&&s.a.c(o)instanceof Array,a=!(u&&o.push&&o.splice),c=u?f():n,y=e||u;e&&!t.name&&s.d.uniqueName.init(t,function(){return!0});s.m(l,null,{i:t});s.a.p(t,"click",l);s.m(v,null,{i:t});o=n}}};s.h.ea.checked=!0;s.d.checkedValue={update:function(n,t){n.value=s.a.c(t())}}}();s.d.css={update:function(n,t){var i=s.a.c(t());null!==i&&"object"==typeof i?s.a.D(i,function(t,i){i=s.a.c(i);s.a.bb(n,t,i)}):(i=s.a.$a(String(i||"")),s.a.bb(n,n.__ko__cssValue,!1),n.__ko__cssValue=i,s.a.bb(n,i,!0))}};s.d.enable={update:function(n,t){var i=s.a.c(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}};s.d.disable={update:function(n,t){s.d.enable.update(n,function(){return!s.a.c(t())})}};s.d.event={init:function(n,t,i,r,u){var f=t()||{};s.a.D(f,function(f){"string"==typeof f&&s.a.p(n,f,function(n){var o,h=t()[f],e;if(h){try{e=s.a.V(arguments);r=u.$data;e.unshift(r);o=h.apply(r,e)}finally{!0!==o&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}!1===i.get(f+"Bubble")&&(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}};s.d.foreach={ic:function(n){return function(){var i=n(),t=s.a.zb(i);return!t||"number"==typeof t.length?{foreach:i,templateEngine:s.W.sb}:(s.a.c(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:s.W.sb})}},init:function(n,t){return s.d.template.init(n,s.d.foreach.ic(t))},update:function(n,t,i,r,u){return s.d.template.update(n,s.d.foreach.ic(t),i,r,u)}};s.h.ta.foreach=!1;s.f.Z.foreach=!0;s.d.hasfocus={init:function(n,t,i){function r(r){var u,f;if(n.__ko_hasfocusUpdating=!0,u=n.ownerDocument,"activeElement"in u){try{f=u.activeElement}catch(e){f=u.body}r=f===n}u=t();s.h.Ea(u,i,"hasfocus",r,!0);n.__ko_hasfocusLastValue=r;n.__ko_hasfocusUpdating=!1}var u=r.bind(null,!0),f=r.bind(null,!1);s.a.p(n,"focus",u);s.a.p(n,"focusin",u);s.a.p(n,"blur",f);s.a.p(n,"focusout",f)},update:function(n,t){var i=!!s.a.c(t());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===i||(i?n.focus():n.blur(),!i&&n.__ko_hasfocusLastValue&&n.ownerDocument.body.focus(),s.l.w(s.a.Da,null,[n,i?"focusin":"focusout"]))}};s.h.ea.hasfocus=!0;s.d.hasFocus=s.d.hasfocus;s.h.ea.hasFocus=!0;s.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.Cb(n,t())}};k("if");k("ifnot",!1,!0);k("with",!0,!1,function(n,t){return n.createChildContext(t)});w={};s.d.options={init:function(n){if("select"!==s.a.A(n))throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(t,i,r){function a(){return s.a.Ka(t.options,function(n){return n.selected})}function v(n,t,i){var r=typeof t;return"function"==r?t(n):"string"==r?n[t]:i}function y(n,i){if(o&&e)s.j.ha(t,s.a.c(r.get("value")),!0);else if(f.length){var u=0<=s.a.o(f,s.j.u(i[0]));s.a.sc(i[0],u);o&&!u&&s.l.w(s.a.Da,null,[t,"change"])}}var h=t.multiple,c=0!=t.length&&h?t.scrollTop:null,u=s.a.c(i()),e=r.get("valueAllowUnset")&&r.has("value"),p=r.get("optionsIncludeDestroyed"),l,f,o;i={};f=[];e||(h?f=s.a.fb(a(),s.j.u):0<=t.selectedIndex&&f.push(s.j.u(t.options[t.selectedIndex])));u&&("undefined"==typeof u.length&&(u=[u]),l=s.a.Ka(u,function(t){return p||t===n||null===t||!s.a.c(t._destroy)}),r.has("optionsCaption")&&(u=s.a.c(r.get("optionsCaption")),null!==u&&u!==n&&l.unshift(w)));o=!1;i.beforeRemove=function(n){t.removeChild(n)};u=y;r.has("optionsAfterRender")&&"function"==typeof r.get("optionsAfterRender")&&(u=function(t,i){y(0,i);s.l.w(r.get("optionsAfterRender"),null,[i[0],t!==w?t:n])});s.a.Bb(t,l,function(i,u,h){return h.length&&(f=!e&&h[0].selected?[s.j.u(h[0])]:[],o=!0),u=t.ownerDocument.createElement("option"),i===w?(s.a.Za(u,r.get("optionsCaption")),s.j.ha(u,n)):(h=v(i,r.get("optionsValue"),i),s.j.ha(u,s.a.c(h)),i=v(i,r.get("optionsText"),h),s.a.Za(u,i)),[u]},i,u);s.l.w(function(){e?s.j.ha(t,s.a.c(r.get("value")),!0):(h?f.length&&a().length<f.length:f.length&&0<=t.selectedIndex?s.j.u(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex)&&s.a.Da(t,"change")});s.a.Nc(t);c&&20<Math.abs(c-t.scrollTop)&&(t.scrollTop=c)}};s.d.options.xb=s.a.e.I();s.d.selectedOptions={after:["options","foreach"],init:function(n,t,i){s.a.p(n,"change",function(){var u=t(),r=[];s.a.q(n.getElementsByTagName("option"),function(n){n.selected&&r.push(s.j.u(n))});s.h.Ea(u,i,"selectedOptions",r)})},update:function(n,t){if("select"!=s.a.A(n))throw Error("values binding applies only to SELECT elements");var i=s.a.c(t()),r=n.scrollTop;i&&"number"==typeof i.length&&s.a.q(n.getElementsByTagName("option"),function(n){var t=0<=s.a.o(i,s.j.u(n));n.selected!=t&&s.a.sc(n,t)});n.scrollTop=r}};s.h.ea.selectedOptions=!0;s.d.style={update:function(t,i){var r=s.a.c(i()||{});s.a.D(r,function(i,r){r=s.a.c(r);(null===r||r===n||!1===r)&&(r="");t.style[i]=r})}};s.d.submit={init:function(n,t,i,r,u){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");s.a.p(n,"submit",function(i){var r,f=t();try{r=f.call(u.$data,n)}finally{!0!==r&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}};s.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.Za(n,t())}};s.f.Z.text=!0,function(){if(r&&r.navigator)var t=function(n){if(n)return parseFloat(n[1])},e=r.opera&&r.opera.version&&parseInt(r.opera.version()),i=r.navigator.userAgent,o=t(i.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),h=t(i.match(/Firefox\/([^ ]*)/));if(10>s.a.C)var u=s.a.e.I(),f=s.a.e.I(),c=function(n){var t=this.activeElement;(t=t&&s.a.e.get(t,f))&&t(n)},l=function(n,t){var i=n.ownerDocument;s.a.e.get(i,u)||(s.a.e.set(i,u,!0),s.a.p(i,"selectionchange",c));s.a.e.set(n,f,t)};s.d.textInput={init:function(t,i,r){function u(n,i){s.a.p(t,n,i)}function p(){var r=s.a.c(i());(null===r||r===n)&&(r="");v!==n&&r===v?s.a.setTimeout(p,4):t.value!==r&&(y=r,t.value=r)}function c(){a||(v=t.value,a=s.a.setTimeout(f,4))}function f(){clearTimeout(a);v=a=n;var u=t.value;y!==u&&(y=u,s.h.Ea(i(),r,"textInput",u))}var y=t.value,a,v,w=9==s.a.C?c:f;10>s.a.C?(u("propertychange",function(n){"value"===n.propertyName&&w(n)}),8==s.a.C&&(u("keyup",f),u("keydown",f)),8<=s.a.C&&(l(t,w),u("dragend",c))):(u("input",f),5>o&&"textarea"===s.a.A(t)?(u("keydown",c),u("paste",c),u("cut",c)):11>e?u("keydown",c):4>h&&(u("DOMAutoComplete",f),u("dragdrop",f),u("drop",f)));u("change",f);s.m(p,null,{i:t})}};s.h.ea.textInput=!0;s.d.textinput={preprocess:function(n,t,i){i("textInput",n)}}}();s.d.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++s.d.uniqueName.Ic;s.a.rc(n,i)}}};s.d.uniqueName.Ic=0;s.d.value={after:["options","foreach"],init:function(n,t,i){var o,h;if("input"!=n.tagName.toLowerCase()||"checkbox"!=n.type&&"radio"!=n.type){var r=["change"],u=i.get("valueUpdate"),f=!1,e=null;u&&("string"==typeof u&&(u=[u]),s.a.ra(r,u),r=s.a.Tb(r));o=function(){e=null;f=!1;var r=t(),u=s.j.u(n);s.h.Ea(r,i,"value",u)};!s.a.C||"input"!=n.tagName.toLowerCase()||"text"!=n.type||"off"==n.autocomplete||n.form&&"off"==n.form.autocomplete||-1!=s.a.o(r,"propertychange")||(s.a.p(n,"propertychange",function(){f=!0}),s.a.p(n,"focus",function(){f=!1}),s.a.p(n,"blur",function(){f&&o()}));s.a.q(r,function(t){var i=o;s.a.nd(t,"after")&&(i=function(){e=s.j.u(n);s.a.setTimeout(o,0)},t=t.substring(5));s.a.p(n,t,i)});h=function(){var r=s.a.c(t()),u=s.j.u(n),f;null!==e&&r===e?s.a.setTimeout(h,0):r!==u&&("select"===s.a.A(n)?(f=i.get("valueAllowUnset"),u=function(){s.j.ha(n,r,f)},u(),f||r===s.j.u(n)?s.a.setTimeout(u,0):s.l.w(s.a.Da,null,[n,"change"])):s.j.ha(n,r))};s.m(h,null,{i:n})}else s.Ja(n,{checkedValue:t})},update:function(){}};s.h.ea.value=!0;s.d.visible={update:function(n,t){var i=s.a.c(t()),r="none"!=n.style.display;i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}},function(n){s.d[n]={init:function(t,i,r,u,f){return s.d.event.init.call(this,t,function(){var t={};return t[n]=i(),t},r,u,f)}}}("click");s.O=function(){};s.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};s.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};s.O.prototype.makeTemplateSource=function(n,i){if("string"==typeof n){i=i||t;var r=i.getElementById(n);if(!r)throw Error("Cannot find template with ID "+n);return new s.v.n(r)}if(1==n.nodeType||8==n.nodeType)return new s.v.qa(n);throw Error("Unknown template type: "+n);};s.O.prototype.renderTemplate=function(n,t,i,r){return n=this.makeTemplateSource(n,r),this.renderTemplateSource(n,t,i,r)};s.O.prototype.isTemplateRewritten=function(n,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(n,t).data("isRewritten")};s.O.prototype.rewriteTemplate=function(n,t,i){n=this.makeTemplateSource(n,i);t=t(n.text());n.text(t);n.data("isRewritten",!0)};s.b("templateEngine",s.O);s.Gb=function(){function n(n,t,i,r){var o,f,u,e;for(n=s.h.yb(n),o=s.h.ta,f=0;f<n.length;f++)if(u=n[f].key,o.hasOwnProperty(u))if(e=o[u],"function"==typeof e){if(u=e(n[f].value))throw Error(u);}else if(!e)throw Error("This template engine does not support the '"+u+"' binding within its templates");return i="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s.h.Ua(n,{valueAccessors:!0})+" } })()},'"+i.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(i)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return s.Gb.dd(n,t)},i)},dd:function(r,u){return r.replace(t,function(t,i,r,f,e){return n(e,i,r,u)}).replace(i,function(t,i){return n(i,"<!-- ko -->","#comment",u)})},Ec:function(n,t){return s.M.wb(function(i,r){var u=i.nextSibling;u&&u.nodeName.toLowerCase()===t&&s.Ja(u,n,r)})}}}();s.b("__tr_ambtns",s.Gb.Ec),function(){var i,t;s.v={};s.v.n=function(n){if(this.n=n){var t=s.a.A(n);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&n.content&&11===n.content.nodeType?3:4}};s.v.n.prototype.text=function(){var n=1===this.ab?"text":2===this.ab?"value":"innerHTML",t;if(0==arguments.length)return this.n[n];t=arguments[0];"innerHTML"===n?s.a.Cb(this.n,t):this.n[n]=t};i=s.a.e.I()+"_";s.v.n.prototype.data=function(n){if(1===arguments.length)return s.a.e.get(this.n,i+n);s.a.e.set(this.n,i+n,arguments[1])};t=s.a.e.I();s.v.n.prototype.nodes=function(){var i=this.n;if(0==arguments.length)return(s.a.e.get(i,t)||{}).jb||(3===this.ab?i.content:4===this.ab?i:n);s.a.e.set(i,t,{jb:arguments[0]})};s.v.qa=function(n){this.n=n};s.v.qa.prototype=new s.v.n;s.v.qa.prototype.text=function(){if(0==arguments.length){var i=s.a.e.get(this.n,t)||{};return i.Hb===n&&i.jb&&(i.Hb=i.jb.innerHTML),i.Hb}s.a.e.set(this.n,t,{Hb:arguments[0]})};s.b("templateSources",s.v);s.b("templateSources.domElement",s.v.n);s.b("templateSources.anonymousTemplate",s.v.qa)}(),function(){function t(n,t,i){var r;for(t=s.f.nextSibling(t);n&&(r=n)!==t;)n=s.f.nextSibling(r),i(r,n)}function f(n,i){if(n.length){var r=n[0],u=n[n.length-1],f=r.parentNode,e=s.Q.instance,o=e.preprocessNode;if(o){if(t(r,u,function(n,t){var f=n.previousSibling,i=o.call(e,n);i&&(n===r&&(r=i[0]||t),n===u&&(u=i[i.length-1]||f))}),n.length=0,!r)return;r===u?n.push(r):(n.push(r,u),s.a.za(n,f))}t(r,u,function(n){1!==n.nodeType&&8!==n.nodeType||s.Rb(i,n)});t(r,u,function(n){1!==n.nodeType&&8!==n.nodeType||s.M.yc(n,[i])});s.a.za(n,f)}}function i(n){return n.nodeType?n:0<n.length?n[0]:null}function e(n,t,u,e,o){o=o||{};var h=(n&&i(n)||u||{}).ownerDocument,c=o.templateEngine||r;if(s.Gb.Oc(u,c,h),u=c.renderTemplate(u,e,o,h),"number"!=typeof u.length||0<u.length&&"number"!=typeof u[0].nodeType)throw Error("Template engine must return an array of DOM nodes");h=!1;switch(t){case"replaceChildren":s.f.da(n,u);h=!0;break;case"replaceNode":s.a.qc(n,u);h=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t);}return h&&(f(u,e),o.afterRender&&s.l.w(o.afterRender,null,[u,e.$data])),u}function o(n,t,i){return s.H(n)?n():"function"==typeof n?n(t,i):n}var r,u;s.Db=function(t){if(t!=n&&!(t instanceof s.O))throw Error("templateEngine must inherit from ko.templateEngine");r=t};s.Ab=function(t,u,f,h,c){if(f=f||{},(f.templateEngine||r)==n)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",h){var l=i(h);return s.B(function(){var n=u&&u instanceof s.U?u:new s.U(s.a.c(u)),r=o(t,n.$data,n),n=e(h,c,r,n,f);"replaceNode"==c&&(h=n,l=i(h))},null,{wa:function(){return!l||!s.a.nb(l)},i:l&&"replaceNode"==c?l.parentNode:l})}return s.M.wb(function(n){s.Ab(t,u,f,n,"replaceNode")})};s.kd=function(t,i,r,u,h){function l(n,t){f(t,c);r.afterRender&&r.afterRender(t,n);c=null}function a(n,i){c=h.createChildContext(n,r.as,function(n){n.$index=i});var u=o(t,n,c);return e(null,"ignoreTargetNode",u,c,r)}var c;return s.B(function(){var t=s.a.c(i)||[];"undefined"==typeof t.length&&(t=[t]);t=s.a.Ka(t,function(t){return r.includeDestroyed||t===n||null===t||!s.a.c(t._destroy)});s.l.w(s.a.Bb,null,[u,t,a,r,l])},null,{i:u})};u=s.a.e.I();s.d.template={init:function(n,t){var i=s.a.c(t());if("string"==typeof i||i.name)s.f.xa(n);else{if("nodes"in i){if(i=i.nodes||[],s.H(i))throw Error('The "nodes" option must be a plain, non-observable array.');}else i=s.f.childNodes(n);i=s.a.jc(i);new s.v.qa(n).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,i,r,f,e){var h=i(),o;i=s.a.c(h);r=!0;f=null;"string"==typeof i?i={}:(h=i.name,"if"in i&&(r=s.a.c(i["if"])),r&&"ifnot"in i&&(r=!s.a.c(i.ifnot)),o=s.a.c(i.data));"foreach"in i?f=s.kd(h||t,r&&i.foreach||[],i,t,e):r?(e="data"in i?e.createChildContext(o,i.as):e,f=s.Ab(h||t,e,i,t)):s.f.xa(t);e=f;(o=s.a.e.get(t,u))&&"function"==typeof o.k&&o.k();s.a.e.set(t,u,e&&e.ba()?e:n)}};s.h.ta.template=function(n){return n=s.h.yb(n),1==n.length&&n[0].unknown||s.h.ad(n,"name")?null:"This template engine does not support anonymous templates nested within its templates"};s.f.Z.template=!0}();s.b("setTemplateEngine",s.Db);s.b("renderTemplate",s.Ab);s.a.dc=function(n,t,i){if(n.length&&t.length)for(var o,r,f,e,u=o=0;(!i||u<i)&&(f=n[o]);++o){for(r=0;e=t[r];++r)if(f.value===e.value){f.moved=e.index;e.moved=f.index;t.splice(r,1);u=r=0;break}u+=r}};s.a.ib=function(){function n(n,t,i,r,u){for(var o=Math.min,l=Math.max,a=[],c=n.length,f,h=t.length,v=h-c||1,w=c+h+1,y,p,b,e=0;e<=c;e++)for(p=y,a.push(y=[]),b=o(h,e+v),f=l(0,e-1);f<=b;f++)y[f]=f?e?n[e-1]===t[f-1]?p[f-1]:o(p[f]||w,y[f-1]||w)+1:f+1:e+1;for(o=[],l=[],v=[],e=c,f=h;e||f;)h=a[e][f]-1,f&&h===a[e][f-1]?l.push(o[o.length]={status:i,value:t[--f],index:f}):e&&h===a[e-1][f]?v.push(o[o.length]={status:r,value:n[--e],index:e}):(--f,--e,u.sparse||o.push({status:"retained",value:t[f]}));return s.a.dc(v,l,!u.dontLimitMoves&&10*c),o.reverse()}return function(t,i,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],i=i||[],t.length<i.length?n(t,i,"added","deleted",r):n(i,t,"deleted","added",r)}}();s.b("utils.compareArrays",s.a.ib),function(){function r(t,i,r,u,f){var e=[],o=s.B(function(){var n=i(r,f,s.a.za(e,t))||[];0<e.length&&(s.a.qc(e,n),u&&s.l.w(u,null,[r,n,f]));e.length=0;s.a.ra(e,n)},null,{i:t,wa:function(){return!s.a.Qb(e)}});return{ca:e,B:o.ba()?o:n}}var t=s.a.e.I(),i=s.a.e.I();s.a.Bb=function(u,f,e,o,h){function ut(n,t){c=nt[t];tt!==t&&(rt[n]=c);c.qb(tt++);s.a.za(c.ca,u);b.push(c);k.push(c)}function p(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&s.a.q(t[i].ca,function(r){n(r,i,t[i].ja)})}var l,y,ft;f=f||[];o=o||{};var y=s.a.e.get(u,t)===n,nt=s.a.e.get(u,t)||[],w=s.a.fb(nt,function(n){return n.ja}),a=s.a.ib(w,f,o.dontLimitMoves),b=[],v=0,tt=0,it=[],k=[];f=[];for(var rt=[],w=[],c,l=0,d,g;d=a[l];l++)switch(g=d.moved,d.status){case"deleted":g===n&&(c=nt[v],c.B&&(c.B.k(),c.B=n),s.a.za(c.ca,u).length&&(o.beforeRemove&&(b.push(c),k.push(c),c.ja===i?c=null:f[l]=c),c&&it.push.apply(it,c.ca)));v++;break;case"retained":ut(l,v++);break;case"added":g!==n?ut(l,g):(c={ja:d.value,qb:s.N(tt++)},b.push(c),k.push(c),y||(w[l]=c))}for(s.a.e.set(u,t,b),p(o.beforeMove,rt),s.a.q(it,o.beforeRemove?s.$:s.removeNode),l=0,y=s.f.firstChild(u);c=k[l];l++){for(c.ca||s.a.extend(c,r(u,e,c.ja,h,c.qb)),v=0;a=c.ca[v];y=a.nextSibling,ft=a,v++)a!==y&&s.f.gc(u,a,ft);!c.Wc&&h&&(h(c.ja,c.ca,c.qb),c.Wc=!0)}for(p(o.beforeRemove,f),l=0;l<f.length;++l)f[l]&&(f[l].ja=i);p(o.afterMove,rt);p(o.afterAdd,w)}}();s.b("utils.setDomNodeChildrenFromArrayMapping",s.a.Bb);s.W=function(){this.allowTemplateRewriting=!1};s.W.prototype=new s.O;s.W.prototype.renderTemplateSource=function(n,t,i,r){return(t=(9>s.a.C?0:n.nodes)?n.nodes():null)?s.a.V(t.cloneNode(!0).childNodes):(n=n.text(),s.a.ma(n,r))};s.W.sb=new s.W;s.Db(s.W.sb);s.b("nativeTemplateEngine",s.W),function(){s.vb=function(){var n=this.$c=function(){if(!i||!i.tmpl)return 0;try{if(0<=i.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(n){}return 1}();this.renderTemplateSource=function(r,u,f,e){if(e=e||t,f=f||{},2>n)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var o=r.data("precompiled");return o||(o=r.text()||"",o=i.template(null,"{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}"),r.data("precompiled",o)),r=[u.$data],u=i.extend({koBindingContext:u},f.templateOptions),u=i.tmpl(o,r,u),u.appendTo(e.createElement("div")),i.fragments={},u};this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"};this.addTemplate=function(n,i){t.write("<script type='text/html' id='"+n+"'>"+i+"<\/script>")};0<n&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};s.vb.prototype=new s.O;var n=new s.vb;0<n.$c&&s.Db(n);s.b("jqueryTmplTemplateEngine",s.vb)}()})})()}();var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},BotFactory=function(){function n(){}return n.create=function(n){if(n==5){var t=new TreeVariablesManager;return BotTreeManager.Instance(t)}return n==4?BotInbentaManager.Instance:null},n}(),BotManager=function(){function n(){this.room=Core.Helpers.getTokenRoom()}return n.prototype.init=function(n,t){this.isOverflow=n;this.license=t;this.disableChatInputAtStart&&$o.inactivity.disableChatInputUI();$o.utils&&$o.utils.initBotAction?$o.utils.initBotAction(this.mustLaunchBot()):this.mustLaunchBot()?this.startAsync():this.botLaunchedActions()},n.prototype.connectOverflowAsync=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return[4,this.getStartDataAsync()];case 1:return n=t.sent(),$.connection.hubInterface.server.connectBotFromOverflow(n,JSON.stringify(this.initialContext)),$o.core.globalVariables.startedBotOffline=!0,[2]}})})},n.prototype.startConnectedAsync=function(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return $.connection.hubInterface.server.initBotConversation(n,JSON.stringify(this.initialContext)),[2]})})},n.prototype.getActionsOfflineAsync=function(n){return __awaiter(this,void 0,void 0,function(){var r,u,f,t,i,e;return __generator(this,function(o){switch(o.label){case 0:return(r=this.validateStart(n),!r)?[3,6]:[4,this.getInteractionsToExecute(n)];case 1:u=o.sent();f=function(n){var i,t;return __generator(this,function(r){switch(r.label){case 0:return(i=Interactions.BaseManager.objectAdapter(n,Interactions.Targets.Backend),!(i.Method=="sendMessage"))?[3,2]:($.connection.hubInterface.client.receiveMessage(i.Param,i.Delay),[4,new Promise(function(n){return setTimeout(n,i.delay)})]);case 1:r.sent();r.label=2;case 2:return(i.Method=="sendAnalyticsEvent"&&$.connection.hubInterface.client.receiveAnalyticsEvent(i.Param),i.Method=="sendInputValidation"&&$.connection.hubInterface.client.receiveInputValidation(i.Param),n.method=="sendRunAsyncScript"&&$.connection.hubInterface.client.receiveRunAsyncScript(n.Param),t=Interactions.BaseManager.objectAdapter(n,Interactions.Targets.Frontend),!(t.method=="sendChoice"))?[3,4]:($.connection.hubInterface.client.receiveChoice(t.param,t.delay),[4,new Promise(function(n){return setTimeout(n,t.delay)})]);case 3:r.sent();r.label=4;case 4:return(t.method=="sendSideBubble"&&$.connection.hubInterface.client.receiveSideBubble(t.param),!(t.method=="sendDelay"))?[3,6]:[4,$o.delayAction.process(t.param,!1)];case 5:r.sent();r.label=6;case 6:return(t.method=="sendError")?[4,$o.botErrors.process(t.param)]:[3,8];case 7:r.sent();r.label=8;case 8:return[2]}})};t=0;i=u;o.label=2;case 2:return(t<i.length)?(e=i[t],[5,f(e)]):[3,5];case 3:o.sent();o.label=4;case 4:return t++,[3,2];case 5:o.label=6;case 6:return[2]}})})},n.prototype.startAsync=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return[4,this.getStartDataAsync()];case 1:return n=t.sent(),this.isOverflow?this.getActionsOfflineAsync(n):this.startConnectedAsync(n),[2]}})})},n.prototype.mustLaunchBot=function(){return $o.core.globalVariables.enterType!=$o.core.enterType.REOPEN&&$o.core.globalVariables.enterType!=$o.core.enterType.CHECKOUT?!0:!1},n.prototype.getInteractionsToExecute=function(n){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:return t=Interactions.BaseManager.objectAdapter(n,Interactions.Targets.Backend),[4,$.post(""+$o.settings.botServer+this.type+"/GetFirstActionsToExecute?",{room:Core.Helpers.getTokenRoom(),tokenVisitor:$o.core.globalVariables.myToken,domainId:$o.core.globalVariables.domainId,botName:$o.core.globalVariables.agentName,data:t,jsonContextVars:JSON.stringify(this.initialContext)})];case 1:return i=r.sent(),[2,i]}})})},n}(),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},BotInbentaManager=function(n){function t(){var t=n.call(this)||this;return t.startMessage="sys-welcome",t.type="Inbenta",t.initialContext={},t.disableChatInputAtStart=!1,t}return __extends(t,n),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),t.prototype.getStartDataAsync=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return($o.utils&&$o.utils.getInitialData)?[4,$o.utils.getInitialData()]:[3,2];case 1:return n=t.sent(),[3,3];case 2:n={startNode:{nodeId:null,treeKey:null},license:null,welcomeMessage:this.startMessage,room:this.room};t.label=3;case 3:return this.startData=n,[2,new Promise(function(t){t(n)})]}})})},t.prototype.validateStart=function(){return!0},t.prototype.botLaunchedActions=function(){return null},t}(BotManager),__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},BotTreeManager=function(n){function t(t){var i=n.call(this)||this;return i.type="Tree",i.initialContext={},i.disableChatInputAtStart=!0,i.variablesManager=t,i}return __extends(t,n),t.Instance=function(n){return this._instance||(this._instance=new this(n))},t.prototype.botLaunchedActions=function(){this.isOverflow||(this.initialContext=this.variablesManager.recoverInitialContext())},t.prototype.validateStart=function(n){return n.startNode.treeKey===null?!1:!0},t.prototype.getStartDataAsync=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n;return __generator(this,function(r){switch(r.label){case 0:return(this.startData&&this.startData.hasOwnProperty("startNode")&&this.startData.startNode.hasOwnProperty("treeKey")&&this.startData.startNode!=null)?[2,this.startData]:[3,1];case 1:return($o.utils&&$o.utils.getInitialData)?[4,$o.utils.getInitialData()]:[3,3];case 2:return t=r.sent(),this.startData=t,this.setInitialContext($o.utils.botContextVars),[2,t];case 3:return n={},[4,this.getInitialNodeInfo()];case 4:return i=(n.startNode=r.sent(),n.license=this.license,n.welcomeMessage=null,n.room=this.room,n),this.startData=i,[2,i]}})})},t.prototype.getInitialTreeAsync=function(){return __awaiter(this,void 0,void 0,function(){var s,t,i,r,f,e,u,o,n,h;return __generator(this,function(c){switch(c.label){case 0:return $o.core.globalVariables.treePreviewId?[4,this.getContextVarsForPreview()]:[3,2];case 1:return s=c.sent(),this.setInitialContext(s),[2,$o.core.globalVariables.treePreviewId];case 2:return[4,this.getActiveTrees()];case 3:if(t=c.sent(),t=Interactions.BaseManager.objectAdapter(t,Interactions.Targets.Frontend),this.activeTreesList=t.treesList,this.setInitialContext(t.botContextVars),this.activeTreesList.length){for(i=null,r=0,f=this.activeTreesList;r<f.length;r++)if(n=f[r],n.defaultTree===!0){i=n;break}if(i!==null){if(e=$o.core.globalVariables.locale.split("-")[0],e.length)for(u=0,o=this.activeTreesList;u<o.length;u++)if(n=o[u],h=n.language.toLowerCase(),i.name==n.name&&e.indexOf(h)>-1)return[2,n.key];return[2,i.key]}return[2,null]}return[2,null];case 4:return[2]}})})},t.prototype.setInitialContext=function(n){n&&Object.keys(n).length>0&&(this.initialContext=this.variablesManager.setInitialContext(n))},t.prototype.getActiveTrees=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return[4,$.post("/Visitor/GetActiveTrees?tokenSession="+Core.Helpers.getTokenRoom())];case 1:return n=t.sent(),[2,n]}})})},t.prototype.getContextVarsForPreview=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return[4,$.post("/Visitor/GetDomainContextVars?domainId="+parseInt($o.core.globalVariables.domainId))];case 1:return n=t.sent(),[2,n]}})})},t.prototype.getInitialNodeInfo=function(){return __awaiter(this,void 0,void 0,function(){var n,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.getInitialTreeAsync()];case 1:return n=i.sent(),t={nodeId:null,treeKey:n},[2,t]}})})},t}(BotManager),TreePreview=function(){function n(){}return n.preparePreview=function(){$o.core.globalVariables.agentsConnected="True";$o.variablesVisitor.domain=this.getDomainIdForPreview();$o.core.globalVariables.enabledDepartments=!1;$o.enterData.allowedDepartmentsId=null},n.getDomainIdForPreview=function(){var n=$("#server-environment").val();switch(n){case"https://webteste2ebackoffice.oct8ne.com/":return 295;case"https://webtestbackoffice.oct8ne.com/":return 294;case"https://backoffice-eu.oct8ne.com/":return 1892;case"https://backoffice.oct8ne.com/":return 19870;case"https://stagingbackoffice.oct8ne.com/":return 16;case"http://localhost:4700/":return 14293;default:return 0}},n}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},TreeVariablesManager=function(){function n(){this.endPoint=$o.settings.botServer+"visitor/variables?room="+Core.Helpers.getTokenRoom();window.addEventListener("message",this.receiveRequestFromApi.bind(this))}return n.prototype.updateAsync=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,fetch(this.endPoint,{headers:{"Content-Type":"application/json"},method:"post",body:decodeURIComponent(n)})];case 1:if(t=i.sent(),!t.ok)throw new Error(t.statusText);return[2]}})})},n.prototype.getAsync=function(){return __awaiter(this,void 0,void 0,function(){var n,t,i;return __generator(this,function(r){switch(r.label){case 0:return[4,fetch(this.endPoint)];case 1:if(n=r.sent(),!n.ok)throw new Error(n.statusText);return i=(t=console).log,[4,n.json()];case 2:return i.apply(t,[r.sent()]),[2]}})})},n.prototype.setInitialContext=function(n){return $o.storage.local.set("oct8ne-bot-context",JSON.stringify(n)),this.parseInitialContext(n)},n.prototype.recoverInitialContext=function(){var t=$o.storage.local.get("oct8ne-bot-context"),n;return t?(n=this.parseInitialContext(JSON.parse(t)),this.updateAsync(JSON.stringify(n)),n):{}},n.prototype.parseInitialContext=function(initialContext){for(var parsedContext={},_i=0,_a=Object.entries(initialContext);_i<_a.length;_i++){var _b=_a[_i],key=_b[0],value=_b[1];try{parsedContext[key]=eval(value)}catch(e){}}return parsedContext},n.prototype.receiveRequestFromApi=function(n){if(n.data&&typeof n.data=="string"&&n.data){var t=n.data.split(","),i=t[0];i===actions.GETTREEVARS?this.getAsync():i===actions.UPDATETREEVARS&&this.updateAsync(t[1])}},n}(),actions;(function(n){n.UPDATETREEVARS="UPDATETREEVARS";n.GETTREEVARS="GETTREEVARS"})(actions||(actions={}));advancedSearchViewModel=function(){var n=this;n.results=ko.observableArray([]);n.totalResults=ko.observable(0);n.add=function(t){var i="",r;t.Price!="0.00"&&t.PrevPrice==t.Price&&(i=$o.carousel.searchPriceLayouts.normal,i=i.replace("[0]",t.Price));t.Price=="0.00"||t.Price==null?i="<p>"+culture.coviewer.ViewDetails+"<\/p>":t.PrevPrice!=""&&t.PrevPrice!=t.Price&&(i=$o.carousel.searchPriceLayouts.sale,i=i.replace("[1]",t.Price),i=i.replace("[0]",t.PrevPrice));r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),productURL:ko.observable(t.ProductURL),title:ko.observable(t.Title),price:ko.observable(t.Price),prevPrice:ko.observable(t.PrevPrice),stock:ko.observable(t.Stock),priceLayout:i};n.results.push(r)};n.emptySearchResults=function(){n.results([])};n.getProduct=function(t){var r=!1,i=ko.utils.arrayFirst(n.results(),function(n){return n.internalId()==t});return i&&(r={InternalId:i.internalId(),Thumbnail:i.thumbnail(),Title:i.title(),ProductUrl:i.productURL()}),r}};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.fullProducts={searchProduct:function(n){var t=!1;return $.each($o.fullProducts.collection,function(i,r){r.InternalId==n&&(t=r)}),t},addProductToCollection:function(n){var t=$o.fullProducts.searchProduct(n.InternalId);t||($o.fullProducts.collection.push(n),$o.fullProducts.addProductsToLocalStorage(n))},addProductsToLocalStorage:function(){var n=new Date,t={collection:$o.fullProducts.collection,expiresAt:n.setMinutes(n.getMinutes()+60)};$o.utils&&$o.utils.disableProductsCaches||$o.storage.local.set($o.core.localStorageTypes.PRODUCTSCOLLECTION,JSON.stringify(t))},recoverProductsFromLocalStorage:function(){var n=$o.storage.local.get($o.core.localStorageTypes.PRODUCTSCOLLECTION);if(n){var i=new Date,t=JSON.parse(n),r=t.expiresAt;i.getTime()<r?$o.fullProducts.collection=t.collection:$o.storage.local.set($o.core.localStorageTypes.PRODUCTSCOLLECTION,$o.core.localStorageActions.REMOVE)}},collection:[]}}(window);lastSearchViewModel=function(){var n=this;n.results=ko.observableArray([]);n.term=ko.observable("");n.id=ko.observable("");n.totalResults=ko.observable(0);n.isActive=ko.observable(!0);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i="",t.Price!="0.00"&&t.PrevPrice==t.Price&&(i=$o.carousel.searchPriceLayouts.normal,i=$o.core.globalVariables.apiVersion=="2.1"?i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.Price):i.replace("[0]",t.Price)),t.Price=="0.00"||t.Price==null?i=' <p class="bold custom-search-product-price CVTxt3" style="font-size:9px">'+culture.coviewer.ViewDetails+"<\/p>":t.PrevPrice!=""&&t.PrevPrice!=t.Price&&(i=$o.carousel.searchPriceLayouts.sale,$o.core.globalVariables.apiVersion=="2.1"?(i=i.replace("[1]",$o.core.globalVariables.currencyVisitor+t.Price),i=i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.PrevPrice)):(i=i.replace("[1]",t.Price),i=i.replace("[0]",t.PrevPrice))),r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),productURL:ko.observable(t.ProductURL),title:ko.observable(t.Title),price:ko.observable(t.Price),prevPrice:ko.observable(t.PrevPrice),currency:ko.observable(t.Currency),linkText:culture.coviewer.Show+" "+t.Title,priceLayout:i},n.results.push(r))};n.emptySearchResults=function(){n.results([])};n.copyResultsArrayToPreviousSearch=function(){ko.utils.arrayForEach(n.results(),function(n){previousSearchVM.results.push(n)});n.emptySearchResults()};n.getProduct=function(t){var r=!1,i=ko.utils.arrayFirst(n.results(),function(n){return n.internalId()==t});return i&&(r={InternalId:i.internalId(),Thumbnail:i.thumbnail(),Title:i.title(),ProductUrl:i.productURL()}),r};n.setActive=function(){n.isActive(!0);previousSearchVM.isActive(!1)};n.productPageFrame=function(n){$o.agentTools.showProductPageFrame(n())}};mycartViewModel=function(){var n=this;n.nodes=ko.observableArray([]);n.isActive=ko.observable(!1);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t.InternalId}),i||($o.log(t),r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),title:ko.observable(t.Title),list:"MYCART"},n.nodes.push(r)))};n.emptyList=function(){n.nodes([])};n.setCarouselWidth=function(){var t;t=$o.core.globalVariables.device!="mobile"?84*n.nodes().length:50*n.nodes().length;$o.core.globalVariables.userType=="V"&&(t=t+150);t=t+"px";viewedVM.carouselsWidth(t);$o.core.globalVariables.device!="mobile"&&$("#mCSB_1_container").css({width:t});$("#oct8ne-nodes").mCustomScrollbar("update")};n.deleteProduct=function(t){var i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t});n.nodes.remove(i)};n.getProduct=function(t){var i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t});return i?i:!1};n.setActiveTab=function(){window.mylistVM.isActive(!1);window.viewedVM.isActive(!1);n.isActive(!0);n.setCarouselWidth();$o.carousel.setCurrentNodeActive($o.core.globalVariables.internalId)};n.accessToCheckout=function(){n.nodes().length>0&&($o.core.isSignalRConnected()&&$o.hubsOut.sendVisitorCheckout($o.core.globalVariables.otherToken),$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT),$o.saveRecord.checkoutB(),parent.postMessage("GOTOCHECKOUT","*"))};n.accessToCheckoutMobile=function(){n.nodes().length>0&&($o.core.isSignalRConnected()?($o.hubsOut.sendVisitorCheckout(),$("#minimize-iframe").trigger("click"),$(".menu-down").hide(),setTimeout(function(){parent.postMessage("GOTOCHECKOUT","*")},500)):(parent.postMessage("GOTOCHECKOUT","*"),$("#minimize-iframe").trigger("click"),$(".menu-down").hide()),$o.saveRecord.checkoutB())}};mylistViewModel=function(){var n=this;n.nodes=ko.observableArray([]);n.isActive=ko.observable(!1);n.isLogged=ko.observable(!1);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t.InternalId}),i||(r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),title:ko.observable(t.Title)},n.nodes.push(r)))};n.setCarouselWidth=function(){var t;t=$o.core.globalVariables.device!="mobile"?84*n.nodes().length:50*n.nodes().length;n.isLogged()==!1&&$o.core.globalVariables.userType=="V"&&(t=t+235);t=t+"px";viewedVM.carouselsWidth(t);$o.core.globalVariables.device!="mobile"&&$("#mCSB_1_container").css({width:t});$("#oct8ne-nodes").mCustomScrollbar("update")};n.getProduct=function(t){var i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t});return i?i:!1};n.setActiveTab=function(){window.mycartVM.isActive(!1);window.viewedVM.isActive(!1);n.isActive(!0);n.setCarouselWidth();$o.carousel.setCurrentNodeActive($o.core.globalVariables.internalId)}};previousSearchViewModel=function(){var n=this;n.results=ko.observableArray([]);n.term=ko.observable("");n.isActive=ko.observable(!1);n.id=ko.observable("");n.totalResults=ko.observable(0);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i="",t.Price!="0.00"&&t.PrevPrice==t.Price&&(i=$o.carousel.searchPriceLayouts.normal,i=$o.core.globalVariables.apiVersion=="2.1"?i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.Price):i.replace("[0]",t.Price)),t.Price=="0.00"||t.Price==null?i=' <p class="bold custom-search-product-price CVTxt3" style="font-size:9px">'+culture.coviewer.ViewDetails+"<\/p>":t.PrevPrice!=""&&t.PrevPrice!=t.Price&&(i=$o.carousel.searchPriceLayouts.sale,$o.core.globalVariables.apiVersion=="2.1"?(i=i.replace("[1]",$o.core.globalVariables.currencyVisitor+t.Price),i=i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.PrevPrice)):(i=i.replace("[1]",t.Price),i=i.replace("[0]",t.PrevPrice))),r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),productURL:ko.observable(t.ProductURL),title:ko.observable(t.Title),price:ko.observable(t.Price),prevPrice:ko.observable(t.PrevPrice),currency:ko.observable(t.Currency),linkText:culture.coviewer.Show+" "+t.Title,priceLayout:i},n.results.push(r))};n.emptySearchResults=function(){n.results([])};n.getProduct=function(t){var r=!1,i=ko.utils.arrayFirst(n.results(),function(n){return n.internalId()==t});return i&&(r={InternalId:i.internalId(),Thumbnail:i.thumbnail(),Title:i.title(),ProductUrl:i.productURL()}),r};n.setActive=function(){n.isActive(!0);lastSearchVM.isActive(!1)};n.productPageFrame=function(n){$o.agentTools.showProductPageFrame(n())}};searchViewModel=function(){var n=this;n.results=ko.observableArray([]);n.totalResults=ko.observable(0);n.isActiveForAgent=ko.observable(!0);n.displaySearchSection=ko.observable(!0);n.loadingDefaultCats=ko.observable(!1);n.isEmptyGrid=ko.observable(!0);n.displayFilterResults=ko.observable(!1);n.availableDefaultFilters=ko.observableArray([]);n.availableFilters=ko.observableArray([]);n.appliedFilters=ko.observableArray([]);n.currentFilter=ko.observableArray([]);n.filterAppliedsCount=ko.observable(0);n.multiSelectFilter=ko.pureComputed(function(){return $o.core.globalVariables.apiVersion=="2.5"?!0:!1},n);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i="",t.Price!="0.00"&&t.PrevPrice==t.Price&&(i=$o.carousel.searchPriceLayouts.normal,i=$o.core.globalVariables.apiVersion=="2.1"?i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.Price):i.replace("[0]",t.Price)),t.Price=="0.00"||t.Price==null?i=' <p class="bold custom-search-product-price CVTxt3" style="font-size:9px">'+culture.coviewer.ViewDetails+"<\/p>":t.PrevPrice!=""&&t.PrevPrice!=t.Price&&(i=$o.carousel.searchPriceLayouts.sale,$o.core.globalVariables.apiVersion=="2.1"?(i=i.replace("[1]",$o.core.globalVariables.currencyVisitor+t.Price),i=i.replace("[0]",$o.core.globalVariables.currencyVisitor+t.PrevPrice)):(i=i.replace("[1]",t.Price),i=i.replace("[0]",t.PrevPrice))),r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),productURL:ko.observable(t.ProductURL),title:ko.observable(t.Title),price:ko.observable(t.Price),prevPrice:ko.observable(t.PrevPrice),currency:ko.observable($o.core.globalVariables.currencyVisitor),linkText:culture.coviewer.Show+" "+t.Title,priceLayout:i,outOfStock:t.OutOfStock,outOfStockStyle:t.OutOfStockStyle,stock:ko.observable(t.Stock)},n.results.push(r))};n.emptySearchResults=function(){n.results([])};n.getProduct=function(t){var r=!1,i=ko.utils.arrayFirst(n.results(),function(n){return n.internalId()==t});return i&&(r={InternalId:i.internalId(),Thumbnail:i.thumbnail(),Title:i.title(),ProductUrl:i.productURL()}),r};n.productPageFrame=function(n){$o.agentTools.showProductPageFrame(n())};n.displayAgentSearches=function(){n.displaySearchSection(!0);$o.agentInfoVisitorVM.isActive(!1)};n.displayInfoVisitor=function(){n.displaySearchSection(!1);$o.agentInfoVisitorVM.isActive(!0)};n.showAvailableFilters=function(){if(n.displayFilterResults()){n.displayFilterResults(!1);return}n.isEmptyGrid()&&searchVM.filterAppliedsCount()===0?n.multiSelectFilter()?n.showDefaultCategories():n.displayFilterResults(!0):n.displayFilterResults(!0)};n.showDefaultCategories=function(){n.availableFilters([]);n.appliedFilters([]);n.loadingDefaultCats(!0);var t=$o.platform.domain+$o.platform.prefixUrlPlatform+"getCategories",i=$o.utils&&$o.utils.changeCacheType?$o.utils.changeCacheType():!0;$o.utils&&$o.utils.changeUrlRequest&&(t=$o.utils.changeUrlRequest(t));$.ajax({url:$o.platform.getUrlForAjax(t),dataType:"jsonp",method:"GET",cache:i,jsonpCallback:"oct8neJSONPresponseC",success:function(t){t.length?(n.availableDefaultFilters(t),n.displayFilterResults(!0),$(".empty-search-agent").hide()):console.log("No hay nodes");n.loadingDefaultCats(!1)}})};n.pickFilter=function(t){t=parseInt(t);n.setFilter(t,"category",!0)};n.printFiltersBySearch=function(t,i){n.availableDefaultFilters([]);n.availableFilters(t.available);n.appliedFilters(t.applied);n.returnFiltersApplied();i&&n.setFiltersFromRecover(t.applied)};n.setFilter=function(t,i,r){var f,u,e;n.multiSelectFilter()||n.currentFilter([]);f={};f[i]=[t];u=!0;e=0;n.currentFilter().length>0&&n.currentFilter().forEach(function(r){if(r.hasOwnProperty(i)){if($.inArray(t,r[i])>=0){var f=r[i].indexOf(t);r[i].splice(f,1);r[i].length===0&&n.currentFilter().splice(e,1);u=!1;n.currentFilter(n.currentFilter());return}r[i].push(t);u=!1;n.currentFilter(n.currentFilter());return}e++});u&&n.currentFilter.push(f);r&&n.applyFilters()};n.applyFilters=function(){var t="";n.currentFilter().forEach(function(n){var i=JSON.stringify(n);i=i.replace(/:/g,"=").replace("[","").replace("]","").replace(/{/g,"").replace(/}/g,"").replace(/"/g,"");t=t+"&"+i});$o.filters.appliedFilters=t;$o.search.resetSearch();$o.search.doSearch($o.search.searchTerm,$o.filters.appliedFilters,!1,"true");n.displayFilterResults(!1);n.returnFiltersApplied()};n.resetFilters=function(){$o.filters.appliedFilters="";n.currentFilter([]);$o.search.resetSearch();$o.search.doSearch($o.search.searchTerm,$o.filters.appliedFilters,!1,"true");n.displayFilterResults(!1);n.returnFiltersApplied()};n.resetOneFilter=function(t,i){var r=0;n.currentFilter().forEach(function(u){if(u.hasOwnProperty(t)&&$.inArray(i,u[t])>=0){var f=u[t].indexOf(i);u[t].splice(f,1);u[t].length===0&&n.currentFilter().splice(r,1);n.currentFilter(n.currentFilter())}r++});n.applyFilters()};n.setFiltersFromRecover=function(t){t.forEach(function(t){n.setFilter(t.value,t.param,!1)});var i="";n.currentFilter().forEach(function(n){var t=JSON.stringify(n);t=t.replace(/:/g,"=").replace("[","").replace("]","").replace(/{/g,"").replace(/}/g,"").replace(/"/g,"");i=i+"&"+t});$o.filters.appliedFilters=i;n.returnFiltersApplied()};n.returnFiltersApplied=function(){var t=0;n.currentFilter().forEach(function(n){for(var i in n)t=t+n[i].length});n.filterAppliedsCount(t)}};viewedViewModel=function(){var n=this;n.carouselsWidth=ko.observable("0");n.nodes=ko.observableArray([]);n.isActive=ko.observable(!0);n.add=function(t){var i,r;$o.core.globalVariables.showCoviewer!="False"&&(i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t.InternalId}),i||(r={internalId:ko.observable(t.InternalId),thumbnail:ko.observable(t.Thumbnail),title:ko.observable(t.Title)},n.nodes.push(r),n.setCarouselWidth()))};n.setCarouselWidth=function(){var t;t=$o.core.globalVariables.device!="mobile"?84*n.nodes().length:50*n.nodes().length;t=t+"px";n.carouselsWidth(t);$o.core.globalVariables.device!="mobile"&&$("#mCSB_1_container").css({width:t});$("#oct8ne-nodes").mCustomScrollbar("update")};n.getProduct=function(t){var r=!1,i=ko.utils.arrayFirst(n.nodes(),function(n){return n.internalId()==t});return i&&(r={InternalId:i.internalId(),Thumbnail:i.thumbnail(),Title:i.title()}),r};n.setActiveTab=function(){window.mycartVM.isActive(!1);window.mylistVM.isActive(!1);n.isActive(!0);n.setCarouselWidth();$o.carousel.setCurrentNodeActive($o.core.globalVariables.internalId)}};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.canva={init:function(){$o.canva.events();$o.canva.holder.object=$("#oct8ne-holder");$o.canva.holder.left=0;$o.canva.holder.top=0;$o.canva.target.object=$("#oct8ne-helper img");$o.canva.holder.helper=$("#oct8ne-helper");$o.canva.holder.helper.click(function(n){if(!n.isPropagationStopped()&&$o.drag.enablePointing&&!$o.pencil.isDrawing)switch($o.tools.context){case $o.tools.type.PIN:$o.pin.sendPin(n);break;case $o.tools.type.NOTE:$o.note.createNote(n);break;case $o.tools.type.POINT:$o.drag.sendPoint(n)}$o.drag.enablePointing=!0})},showAlertAddToCartInAgent:function(n,t){$o.canva.showAlertAddToCartInAgentUI(n,t)},showAlertAddToMyListInAgent:function(n,t){$o.canva.showAlertAddToMyListInAgentUI(n,t)},update:function(n,t){$o.canva.updateUI(n,t)},showImageOnCanva:function(n,t,i,r,u){$o.canva.showImageOnCanvaUI(n,t,i,r,u)},validatePosition:function(n,t,i){$o.canva.validatePosition(n,t,i)},getCoords:function(n){return{absleft:parseInt(Math.abs($o.canva.holder.helper.offset().left-n.pageX))/$o.canva.target.object.width(),abstop:parseInt(Math.abs($o.canva.holder.helper.offset().top-n.pageY))/$o.canva.target.object.height()}},getCoviewerRelativeCoords:function(n){return{relLeft:parseInt(Math.abs($o.canva.holder.object.offset().left-n.pageX))/$o.canva.holder.object.width(),relTop:parseInt(Math.abs($o.canva.holder.object.offset().top-n.pageY))/$o.canva.holder.object.height()}},holder:{width:0,height:0,top:0,left:0,object:null,helper:null},target:{width:0,height:0,top:0,left:0,object:null,original:{width:0,height:0,top:0,left:0}},imageFromAgent:!1}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.carousel={init:function(){$o.carousel.events();$o.carousel.parsePriceLayout()},parsePriceLayout:function(){var n=$.isEmptyObject($o.settings.priceLayout)?$o.carousel.defaultPriceSettings:$o.settings.priceLayout;$o.carousel.createCoviewerPriceLayout(n.coviewerTemplate);$o.search.createSearchPriceLayout(n.searchTemplate)},sendIdToCarousel:function(n,t,i){var r=window.searchVM.getProduct(n);$o.carousel.addProductInfoToList(r,t);i==$o.carousel.actions.VIEWINCANVA&&$o.carousel.sentProductToCanva(n)},sendProductToCarousel:function(n,t,i,r){$o.carousel.addProductInfoToList(n,t);i==$o.carousel.actions.VIEWINCANVA&&($o.fullProducts.addProductToCollection(n),$o.carousel.sentProductToCanva(n.InternalId,r))},addProductInfoToList:function(n,t,i){var r=!1;switch(t){case $o.carousel.lists.VIEWED:case $o.carousel.lists.TBAR:r=viewedVM.getProduct(n.InternalId);r||(viewedVM.add(n),viewedVM.isActive()||viewedVM.setActiveTab());break;case $o.carousel.lists.MYCART:r=mycartVM.getProduct(n.InternalId);r||mycartVM.add(n);break;case $o.carousel.lists.MYLIST:r=mylistVM.getProduct(n.InternalId);r||mylistVM.add(n);break;case"NOCA":mycartVM.deleteProduct(n.InternalId)}i&&!r&&(n.URLMedia=n.Thumbnail,$o.carousel.prepareInteraction(n,t))},prepareInteraction:function(n,t){n.ListType=t||$o.carousel.lists.VIEWED;n.Type="J";n.Room=$o.core.globalVariables.room;n.SentBy=$o.core.globalVariables.userType;n.FromAgentSearch=$o.search.productFromSearch;n.Id=$o.tools.generateRandomId();$o.search.productFromSearch=!1;$o.core.isSignalRConnected()&&$o.hubsOut.sendNode(n);n.ListType==$o.carousel.lists.VIEWED&&n.InternalId.indexOf("Oct8ne")==-1?$o.saveRecord.viewedItem(n.InternalId,n.Title,n.URLMedia,n.FromAgentSearch,n.Id):n.ListType==$o.carousel.lists.VIEWED&&n.InternalId.indexOf("Oct8neUpload")>-1?$o.saveRecord.uploadItem(n.InternalId,n.Title,n.URLMedia,n.Id):n.ListType==$o.carousel.lists.VIEWED&&n.InternalId.indexOf("Oct8neCatalog")>-1?$o.saveRecord.catalogItem(n.InternalId,n.Title,n.URLMedia,!0,n.Id):n.ListType==$o.carousel.lists.MYCART?$o.saveRecord.myCartItem(n.InternalId,n.Title,n.URLMedia,n.AddedTo,n.Id):n.ListType==$o.carousel.lists.MYLIST&&$o.saveRecord.myListItem(n.InternalId,n.Title,n.URLMedia,n.AddedTo,n.Id)},sentProductToCanva:function(n,t,i){$o.sideBubbles.hide();$o.core.userType==="V"&&$o.carousel.sendProductToAnalytics("V");$o.core.globalVariables.userType=="V"&&$o.visitorSearch.hideCoviewerTutorial();var r=$o.fullProducts.searchProduct(n);r?($o.carousel.fillCanvaInfo(r,i),i&&i!=0&&$o.carousel.goImageN(i+1,"","RECOVER"),$o.carousel.setCurrentNodeActive(n),$o.core.globalVariables.userType=="V"&&n.indexOf("Oct8ne")==-1&&$o.carousel.sendNewProductToTrackingBar(r),t||$o.carousel.prepareInteraction(r,null)):($o.carousel.loadingProduct(),n.indexOf("Oct8neCatalog")!=-1?$o.catalog.searchCatalogItem(n,t):$o.platform.getFullProductInfo(n,"",t))},sendNewProductToTrackingBar:function(n){var t={id:n.InternalId,thumbnail:n.Thumbnail};parent.postMessage("ADDPRODUCTTOLIST,"+JSON.stringify(t),"*")},sendProductToAnalytics:function(n){var t=n==="A"?"Agent":"Visitor";viewedVM.nodes().length&&$o.variablesVisitor.status==="Attending"&&!$o.carousel.sentProductsToAnalytics&&$o.chat.chatsInConversation>3&&(parent.postMessage("SENDANALYTICSEVENT,GAViewedProduct,"+t+" clicked","*"),$o.carousel.sentProductsToAnalytics=!0)},resetImage:function(){$o.carousel.changeImage($o.carousel.currentImage,"recover")},getProductFromUpload:function(n,t,i){var u=i=="V"?culture.coviewer.UplaodCustomer:culture.coviewer.UploadAgent,f={Id:1,FileName:t,Format:"IMG",Source:1,Scope:1,Type:"I",Token:""},r=[];return r[0]=f,{InternalId:n,Title:culture.coviewer.ItemUploaded+" "+u,Description:"",Price:"",Medias:r,RouteTo:"",URLMedia:t,Thumbnail:t}},clickPrevImage:function(){if($o.carousel.currentImage>1){var n=--$o.carousel.currentImage;$o.carousel.carouselInterface==$o.carousel.carouselInterfaces.NUMBERS&&$o.carousel.createImageNumbers();$o.carousel.updateCarouselArrows(n);$o.carousel.changeImage(n)}},clickNextImage:function(){if($o.carousel.currentImage<$o.carousel.images.length){var n=++$o.carousel.currentImage;$o.carousel.updateCarouselArrows(n);$o.carousel.changeImage(n)}},goImageN:function(n,t,i){$o.carousel.currentImage==n||t||($o.carousel.currentImage=n,$o.carousel.updateCarouselArrows(n),$o.carousel.changeImage(n,i))},updateCarouselArrows:function(n){$o.carousel.updateArrowsCarousel(n)},changeImage:function(n,t){$o.carousel.loadingImage();var i=$o.carousel.sendToCanva($o.carousel.images[n-1].FileName,$o.carousel.images[n-1].Id,$o.carousel.images[n-1].Type);i.Index=n;$o.core.isSignalRConnected()&&$o.hubsOut.sendImage(i);t||$o.saveRecord.image($o.carousel.currentImage,$o.carousel.images[n-1].FileName)},add:function(n,t){$o.carousel.fillCanvaInfo(n,t)},setCurrentNodeActive:function(n,t){$o.carousel.setCurrentNodeActiveUI(n,t)},sendToCanva:function(n,t,i,r){var u={InternalId:$o.core.globalVariables.internalId,URLMedia:n,RouteTo:t,Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:i=="V"?i:"I"};return $o.canva.update(u,r),u},images:{},infoLayoutFirstTime:!1,currentImage:1,carouselInterface:"",carouselInterfaces:{BULLETS:"BULLETS",NUMBERS:"NUMBERS"},actions:{VIEWINCANVA:"VIEWINCANVA"},lists:{VIEWED:"VIEWED",MYCART:"MYCART",MYLIST:"MYLIST",TBAR:"TBAR",LASTSEARCH:"LASTSEARCH",PREVIOUSSEARCH:"PREVIOUSSEARCH"},sentProductsToAnalytics:!1,defaultPriceSettings:{coviewerTemplate:{normalPrice:{line1:{textTemplate:"[0]",inlineStyle:"line-height:43px;font-size:2em"},line2:{textTemplate:"",inlineStyle:""}},salePrice:{line1:{textTemplate:"[0]",inlineStyle:"font-size:1.33em; text-decoration:line-through;"},line2:{textTemplate:"[1]",inlineStyle:"font-size:1.33em ;line-height: 20px;"},saleIcon:!0}},searchTemplate:{normalPrice:{line1:{textTemplate:"[0]",inlineStyle:"font-size:11px; font-weight:700"},line2:{textTemplate:"",inlineStyle:""}},salePrice:{line1:{textTemplate:"[1]",inlineStyle:"font-size:12px,font-weight:700"},line2:{textTemplate:"[0]",inlineStyle:"font-size:10px ; text-decoration:line-through;font-style:italic"}}}},searchPriceLayouts:{normal:"",sale:""}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.catalog={searchCatalogItem:function(n,t){var r=[n],i=$o.core.userType==="V"?$o.settings.catalogServer:$o.core.globalVariables.catalogServer;$.ajax({type:"POST",url:i+"Resources/GetCatalogItem",contentType:"application/json; charset=utf-8",data:JSON.stringify({InternalId:n,License:$o.settings.license}),dataType:"json",success:function(i){var r={InternalId:i.InternalId,Title:i.Title,Description:i.Description,Thumbnail:i.Thumbnail,URLMedia:i.Thumbnail,Medias:i.Medias,PrevPrice:i.Price,Price:i.Price,BuyURL:"",HasOptions:!1,RouteTo:i.ProductUrl};$o.fullProducts.addProductToCollection(r);$o.carousel.sentProductToCanva(n,t)}})},getProductsByUrls:function(n){if($o.utils&&$o.utils.addDomainInUrlProducts&&(n=$o.utils.addDomainInUrlProducts(n)),$o.settings.allowTrackingProductsLite&&n){var t=$o.core.userType=="V"?$o.core.globalVariables.myToken:$o.core.globalVariables.visitorToken;$.get($o.settings.catalogServer+"Tracking/Products",{license:$o.settings.license,stringUrls:JSON.stringify(n)},function(n){$.each(n,function(t){var i={InternalId:n[t].InternalId,Title:n[t].Title,Description:n[t].Description,Thumbnail:n[t].Thumbnail,URLMedia:n[t].Thumbnail,Medias:n[t].Medias,PrevPrice:n[t].Price,Price:n[t].Price,BuyURL:"",HasOptions:!1,RouteTo:n[t].ProductUrl};$o.carousel.addProductInfoToList(i,$o.carousel.lists.VIEWED);$o.fullProducts.addProductToCollection(i);$o.carousel.sentProductToCanva(i.InternalId,null,0)})})}}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.core={init:function(){$o.core.getHiddenInputs();$o.core.globalVariables.timeOffset=$o.core.getTimeOffset();($o.core.globalVariables.baseUrl.indexOf("testwebicp.es/urban")!==-1||$o.core.globalVariables.baseUrl.indexOf("urbandecay.es")!==-1)&&($o.core.globalVariables.platform="prestashop",$o.core.globalVariables.clientUtils="NULL");$o.core.globalVariables.baseUrl.indexOf("drim.pt")!==-1&&($o.core.globalVariables.platform="vtex");$o.core.globalVariables.baseUrl.indexOf("musimundo")!==-1&&($o.core.globalVariables.platform="musimundo");$o.core.checkAdapterAndUtils()},checkAdapterAndUtils:function(){$o.core.mustLoadPlatformUtils()?$o.core.loadUtilsFile($o.core.utilsTypes.PLATFORM):$o.core.mustLoadClientUtils()?$o.core.loadUtilsFile($o.core.utilsTypes.CLIENT):$o.core.globalVariables.platform!=="NONE"&&$o.core.globalVariables.edition>0?$o.core.loadAdapter():($o.core.postMessageListenerWhenNoAdapter(),$o.core.loadFunctions())},loadFunctions:function(){var n,t;$o.core.userType=$o.core.globalVariables.userType;n=$o.core.globalVariables.enterType;$o.canva.holder.object=$("#oct8ne-holder");t={device:Core.Helpers.isDevice(),type:Core.Helpers.getUserType()};Interactions.init(t);window.searchVM=new searchViewModel;window.viewedVM=new viewedViewModel;window.mycartVM=new mycartViewModel;window.mylistVM=new mylistViewModel;$o.core.youtubeViewModel=new YouTubeViewer("youtubevideoplayer");$o.core.viewModel={youtube:$o.core.youtubeViewModel,search:window.searchVM,viewed:window.viewedVM,mycart:window.mycartVM,mylist:window.mylistVM};$o.core.userType==="V"?($o.visitorSearch.init(),$o.core.globalVariables.conferenceProvider&&window.location.href.indexOf("https")===0?$o.visitorStart.checkVisitorCapabilities():$o.visitorStart.doStart(n)):($o.core.globalVariables.supervisorMode!="false"&&$o.core.globalVariables.supervisorMode!="undefined"&&$o.core.globalVariables.supervisorMode!==""&&$o.supervisorMode.init($o.supervisorMode.roles.SUPERVISOR),$o.core.agentsConnected=!0,$o.agentSearch.init(),$o.core.globalVariables.translatorLicense.length&&$o.translateAgent.init(),$o.recoverRecords.getRecords($o.core.globalVariables.visitorToken,$o.core.globalVariables.tokenSession),window.agentCatalogVM=new agentCatalogViewModel,$o.agentInfoVisitorVM=new $o.agentInfoVisitorViewModel,ko.applyBindings($o.core.viewModel),$o.agentTools.getCommonPhrases(),$o.hubsOut.newViewerCreated($o.core.globalVariables.otherToken),$(".oct8ne-nodes").removeAttr("style"),$o.fullProducts.recoverProductsFromLocalStorage());$("#oct8ne-chat-room").css("visibility","visible")},mustLoadPlatformUtils:function(){return($o.core.globalVariables.platform==="prestashop"||$o.core.globalVariables.platform==="wordpress"||$o.core.globalVariables.platform==="vtex"||$o.core.globalVariables.platform==="shopify"||$o.core.globalVariables.platform==="vtexio")&&!$o.core.platformUtilsLoaded?!0:!1},mustLoadClientUtils:function(){return $o.core.globalVariables.clientUtils.length&&$o.core.globalVariables.clientUtils!=="NULL"&&$o.core.globalVariables.clientUtils!=="undefined"&&!$o.core.clientUtilsLoaded?!0:!1},loadUtilsFile:function(n){var t;n===$o.core.utilsTypes.PLATFORM?t="api/source/js/utils/platforms/"+$o.core.globalVariables.platform.toLowerCase()+".js?":n===$o.core.utilsTypes.CLIENT&&(t="api/source/js/utils/clients/"+$o.core.globalVariables.clientUtils+".js?");$.ajax({type:"GET",url:$o.core.globalVariables.cdnUrl+t+$o.core.getDateForCaching(),success:function(){n===$o.core.utilsTypes.PLATFORM?$o.core.platformUtilsLoaded=!0:n===$o.core.utilsTypes.CLIENT&&($o.core.clientUtilsLoaded=!0);$o.core.checkAdapterAndUtils()},error:function(){$o.core.errorHandler($o.core.typeHandleError.UTILS)},dataType:"script",cache:!0})},loadAdapter:function(){var n,t=null,i="api/source/js/cms/";$o.core.globalVariables.edition<$o.core.editions.PRO?(t=$o.core.adapters.LITE,($o.core.globalVariables.apiVersion=="2.4"||$o.core.globalVariables.apiVersion=="2.5")&&($o.core.globalVariables.apiVersion="2.3"),n=i+"lite/adapter-lite-"+$o.core.globalVariables.apiVersion+".min.js?"):(t=$o.core.adapters.PRO,n=$o.core.globalVariables.apiVersion=="2.5"?i+"pro/adapter-2.4.js?":i+"pro/adapter-"+$o.core.globalVariables.apiVersion+".min.js?");$o.core.globalVariables.baseUrl.indexOf("idherma")>-1&&(n="api/source/js/utils/clients/idherma.js?");$.ajax({type:"GET",url:$o.core.globalVariables.cdnUrl+n+$o.core.getDateForCaching(),success:function(){$o.core.adapterLoaded=t;$o.platform.init();$o.core.loadFunctions()},error:function(){$o.core.errorHandler($o.core.typeHandleError.ADAPTER)},dataType:"script",cache:!0})},errorHandler:function(n){n===$o.core.typeHandleError.UTILS?(++$o.core.getClientFileRetries,$o.core.getClientFileRetries<$o.core.getFilesMaxRetries?$o.core.checkAdapterAndUtils():($o.core.platformUtilsLoaded=!0,$o.core.clientUtilsLoaded=!0,$o.core.checkAdapterAndUtils(),$o.core.displayErrorInViewer(n))):(++$o.core.getAdapterFileRetries,$o.core.getAdapterFileRetries<$o.core.getFilesMaxRetries?$o.core.checkAdapterAndUtils():($o.recoverRecords.startingRecoverViewer=!1,$o.core.loadFunctions(),$o.core.displayErrorInViewer(n)))},displayErrorInViewer:function(n){var i="Error "+n+": not loaded correctly --- Domain:"+$o.core.globalVariables.baseUrl+"--- UserType:"+$o.core.globalVariables.userType,t="<p>Error "+n+": not loaded correctly<\/p>";$(".error-type").append(t);$("#server-overload").show()},postMessageListenerWhenNoAdapter:function(){function n(n){var i=n.data.split(","),t=i[0],r;t==="RESIZETOCHAT"&&($o.iframes.currentIframeStatus==$o.iframes.iframeStatus.SEARCH||$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.VIEWER||$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.MINIMIZED)&&($o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT,"","clickOnPage"),$("#all-wrapper").show());t=="MINIMIZEORCLOSEMOBILE"&&$("#close-iframe-visitor").trigger("click");t==="HIDESUBMENU"&&$(".chat-menu-options").is(":visible")&&$(".chat-menu-options").hide();t==="RETURNPARAMETERS"&&(r=n.data.split("RETURNPARAMETERS,"),$o.visitorStart.getVisitorStartData(JSON.parse(r[1])));t==="MAXIMIZEMOBILERESKYT"&&$("#minimized-widget").trigger("click");t==="RESIZEFROMAPI"&&($o.core.globalVariables.device==="desktop"?$o.iframes.changeStatusIframe(i[1]):$("#minimized-widget").trigger("click"));t==="SENDCHATTOIFRAME"&&$o.canned.sendCanned($o.canned.type.TRIGGER,decodeURIComponent(i[1]));t==="VIDEOINITFROMEMBED"&&$o.visitorStart.videoInitFromEmbed();t==="HIDEMEBYNEWTAB"&&$o.visitorStart.hideMeByNewTab()}window.addEventListener?addEventListener("message",n,!1):attachEvent("onmessage",n)},getHiddenInputs:function(){var n=$("#user-type").val(),t=n==="V"?$("#base-url").val():$("#url-domain").val();$o.core.globalVariables={mySkype:$("#my-skype").val(),myPhone:$("#my-phone").val(),urlDomain:$("#url-domain").val(),baseUrl:$("#base-url").val(),tokenSession:$("#token-session").val(),visitorToken:$("#token-visitor").val(),myToken:$("#my-token").val(),showCoviewer:$("#show-coviewer").val(),allowPreviousChat:$("#allow-previous-chat").val(),agentLanguage:$("#agent-language").val(),forceTags:$("#force-tags").val()==="true"?!0:!1,visitorEmail:$("#visitor-email").val(),myShopId:$("#my-shop-id").val(),enterType:$("#enter-type").val(),recoverSession:$("#token-session").val(),loginUrl:$("#login-url").val(),device:$("#device").val(),apiVersion:$("#api-version").val(),cartRedirecionForced:$("#cart-redirection-forced").val(),enabledDepartments:$("#enabled-departments").val(),chromeExtensionId:$("#chrome-ss-extension-id").val(),isTypingWithText:$("#is-typing-text").val(),finishedVisitorStart:!1,startedBotOffline:!1,platform:$("#platform").val(),myName:$("#my-name").val(),myEmail:$("#my-email").val(),otherName:$("#other-name").val(),userType:n,urlMedia:$("#url-media").val(),internalId:$("#internal-id").val(),protocolHttp:$("#protocol-http").val(),currencyVisitor:t.indexOf("berakamall")>-1?"₦":$("#currency-visitor").val()?$("#currency-visitor").val():"$",locale:$("#locale").val(),visitorProtocolPage:$("#visitor-protocol-page").val(),agentsConnected:$("#agents-connected").val(),edition:parseInt($("#edition").val()),showSearch:$("#show-search").val(),conferenceProvider:$("#conference-provider").val(),translatorLicense:$("#translator-license").val(),catalogServer:$("#catalog-server").val(),clientUtils:$("#client-utils").val(),cdnUrl:$("#cdn-url").val(),uploadUrl:$("#upload-url").val(),inviteLinkAssignedAgent:$o.core.isNormalInteger($("#invite-link-assigned-agent").val())?parseInt($("#invite-link-assigned-agent").val()):null,inviteLinkExclusiveAgent:$("#invite-link-exclusive-agent").val()==="True"?!0:!1,visitorsOverflow:$("#visitors-overflow").val()==="True"?!0:!1,sessionSummaryId:$("#session-summary-id").val(),supervisorMode:$("#supervisor-mode").val(),domainId:$("#domain-id").val(),sessionFinalized:!1,room:n==="V"?$("#token-room").val():$("#other-token").val(),roomForLastOperations:n==="V"?$("#token-room").val():$("#other-token").val()}},placeHolderIE:function(){$("[placeholder]").focus(function(){var n=$(this);n.val()===n.attr("placeholder")&&(n.val(""),n.removeClass("placeholder"))}).blur(function(){var n=$(this);(n.val()===""||n.val()===n.attr("placeholder"))&&(n.addClass("placeholder"),n.val(n.attr("placeholder")))}).blur().parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var n=$(this);n.val()===n.attr("placeholder")&&n.val("")})})},centerImage:function(n,t,i){i=i||t;var r,u;(n.naturalWidth>$o.core.maxImageSize||n.naturalHeight>$o.core.maxImageSize)&&(n.src="api/img/core/no-thumb-resources.png");n.removeAttribute("style");n.naturalWidth>n.naturalHeight?(n.style.width=t+"px",n.style.height="auto"):n.naturalWidth<n.naturalHeight?(n.style.height=i+"px",r=n.naturalWidth*i/n.naturalHeight,u=(r-t)/2,n.style.marginLeft=-u+"px"):(n.style.width=t+"px",r=n.naturalHeight*t/n.naturalWidth,u=(r-i)/2,n.style.marginTop=-u+"px")},getDateForCaching:function(){return Math.round((new Date).getTime()/144e5)},isNormalInteger:function(n){var t=Math.floor(Number(n));return String(t)===n&&t>=0},isSignalRConnected:function(){var n=$o.core.globalVariables.userType==="V"&&$.connection.hub.state!==$.signalR.connectionState.disconnected||$o.core.globalVariables.userType==="A";return $o.core.agentsConnected&&n?!0:!1},visitorIsGone:function(){$o.core.globalVariables.isGone=!0;$(".header-coviewer").addClass("title-visitor-is-gone");$("#visitor-is-gone-title").show();$("#title-page").hide();$("#tools-agent ul").addClass("viewer-visitor-is-gone");$("#common-phrases").addClass("viewer-visitor-is-gone");$(".chat-send").addClass("viewer-visitor-is-gone");$("#coviewer-wrapper").addClass("viewer-visitor-is-gone");$("#search-wrapper").addClass("viewer-visitor-is-gone");$("#chat-tool").trigger("click")},getTimeOffset:function(){return(new Date).getTimezoneOffset()},agentsConnected:"",userType:"",platform:"",enterType:{SEARCHCATALOG:"SEARCHCATALOG",REOPEN:"REOPEN",CHECKOUT:"CHECKOUT",RECOVERSESSION:"RECOVERSESSION",TALKEXPERT:"TALKEXPERT",TALKEXPERTBAR:"TALKEXPERTBAR",REOPENFROMLOGIN:"REOPENFROMLOGIN",LOGINPAGE:"LOGINPAGE",LIVECHAT:"LIVECHAT",SCHEDULE:"SCHEDULE",PINCODE:"PINCODE",SEARCHBOX:"SEARCHBOX",TRACKINGBAR:"TRACKINGBAR",PRODUCTPAGE:"PRODUCTPAGE",AUTOOPEN:"AUTOOPEN",TRIGGER:"TRIGGER",VIPAREA:"VIPAREA",POPUP:"POPUP",TREEPREVIEW:"TREEPREVIEW"},conferenceVars:{STARTING:"STARTING",END:"END",ACCEPT:"ACCEPT",ENDED:"ENDED",STARTED:"STARTED",SCREENSHARED:"SCREENSHARED",STARTINGCAM:"STARTINGCAM",ENDCAM:"ENDCAM"},hasBeenWaiting:!1,youtubeViewModel:null,editions:{FREE:0,LITE:1,PRO:2,ENTERPRISE:3},adapters:{ANY:0,CATALOG:1,LITE:2,PRO:3},adapterLoaded:"",clientUtilsLoaded:!1,platformUtilsChecked:!1,utilsTypes:{PLATFORM:"PLATFORM",CLIENT:"CLIENT"},typeHandleError:{ADAPTER:"ADAPTER",UTILS:"UTILS"},maxImageSize:8e3,getClientFileRetries:0,getAdapterFileRetries:0,getFilesMaxRetries:3,localStorageTypes:{INACTIVITYAGENT:"oct8ne-inactivity-agent",INACTIVITYVISITOR:"oct8ne-inactivity-visitor",SEARCHCACHE:"oct8ne-search-cache",PRODUCTSCOLLECTION:"oct8ne-products-collection",PENDINGLIST:"oct8ne-pending-list",JUSTLOOKINGBUTTON:"oct8ne-just-looking-button",JUSTLOOKINGOPTION:"oct8ne-just-looking-option",SOUND:"oct8ne-sound",CALL:"oct8ne-call",OTCURRENTSESSION:"ot-current-session",OTCURRENTTOKEN:"ot-current-token",HIDENEWTUTORIAL:"oct8ne-hide-tutorial",LASTDISPLAY:"oct8ne-last-display",COVIEWERZOOM:"oct8ne-coviewer-zoom-size-key"},localStorageActions:{REMOVE:"REMOVELOCALSTORAGEVALUE"}};oct8ne.log=function(n,t){oct8ne.enableLog&&console[t||"log"](n)};oct8ne.enableLog=document.cookie.indexOf("oct8ne-log")>-1?!0:!1}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.drag={init:function(){$o.drag.events()},sendPoint:function(n){++$o.drag.pointId;var t=$o.canva.getCoords(n),i=$o.canva.getCoviewerRelativeCoords(n),r={MarkId:$o.drag.pointId+$o.core.userType,Coords:{PosX:t.absleft,PosY:t.abstop},InternalId:$o.core.globalVariables.internalId,URLMedia:$o.core.globalVariables.urlMedia,Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:"O",CoordsCoviewer:{PosX:i.relLeft,PosY:i.relTop},CoordsImage:{PosX:parseFloat($o.canva.holder.helper.css("left")),PosY:parseFloat($o.canva.holder.helper.css("top"))},ProductInternalID:$o.core.globalVariables.internalId,ImageUrl:$o.core.globalVariables.urlMedia,ZoomLevel:$o.zoom.level,SizeImage:{Width:$o.canva.holder.helper.width(),Height:$o.canva.holder.helper.height()},SizeCoviewer:{Width:$("#oct8ne-holder").width(),Height:$("#oct8ne-holder").height()}};$o.drag.addPoint(r);$o.core.isSignalRConnected()&&$o.hubsOut.sendPoint(r)},addPoint:function(n,t){$o.drag.addPointUI(n,t)},changeDrag:function(n,t){$o.core.isSignalRConnected()&&!t&&$o.hubsOut.addInteraction(n);var i={top:n.Coords.PosY,left:n.Coords.PosX};$o.drag.parametersHaveProportionalCoords(n)&&(i=$o.drag.calculateAbsolutePosition(n.CoordsProportionals));$o.canva.target.top=i.top;$o.canva.target.left=i.left;$o.canva.holder.helper.animate({left:i.left,top:i.top},300)},parametersHaveProportionalCoords:function(n){return n.hasOwnProperty("CoordsProportionals")&&n.CoordsProportionals!=null&&n.CoordsProportionals.hasOwnProperty("PosX")&&n.CoordsProportionals.hasOwnProperty("PosY")?!0:!1},calculateAbsolutePosition:function(n){var t={width:$o.canva.holder.helper.width(),height:$o.canva.holder.helper.height()},i={left:$o.canva.holder.object.width()-t.width,top:$o.canva.holder.object.height()-t.height};return{left:i.left*n.PosX,top:i.top*n.PosY}},object:null,pointId:0,enablePointing:!0}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.filters={init:function(){$o.filters.events()},appliedFilters:""}}(window),function(n){var i=function(){function i(){}return i.isDevice=function(){return $o.core.globalVariables.device==="mobile"?!0:!1},i.getTokenRoom=function(){return $o.core.globalVariables.room},i.getSessionSummaryId=function(){return n.Helpers.getUserType()===t.Agent?$o.core.globalVariables.sessionSummaryId:$o.variablesVisitor.sessionSummaryId},i.getUserType=function(){return $o.core.globalVariables.userType===t.Agent?"A":"V"},i.generateId=function(){return $o.tools.generateRandomId()},i.getTime=function(){return $o.speak.getMessageTime()},i.getMyName=function(){return $o.core.globalVariables.myName},i.getCurrentInternalId=function(){return $o.core.globalVariables.internalId},i.getCurrentImageUrl=function(){return $o.core.globalVariables.urlMedia},i.isRealTimeConnected=function(){var n=$o.core.globalVariables.userType==="V"&&$.connection.hub.state!==$.signalR.connectionState.disconnected||$o.core.globalVariables.userType==="A";return $o.core.agentsConnected&&n?!0:!1},i}(),t;n.Helpers=i,function(n){n.Visitor="V";n.Agent="A"}(t=n.UserTypes||(n.UserTypes={}))}(Core||(Core={}));window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.note={init:function(){}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.pencil={init:function(){$("#draw-button").click(function(){$o.pencil.isDrawing?($("#color-picker").removeClass("show-picker"),$(this).removeClass("is-drawing").removeAttr("style"),$o.pencil.drawing.stop(),$o.pencil.isDrawing=!1,$o.pencil.drawing.setColor($o.pencil.pencilColor)):($("#color-picker").addClass("show-picker"),setTimeout(function(){$("#color-picker").hasClass("show-picker")&&$("#color-picker").removeClass("show-picker")},5e3),$("#draw-button").addClass("is-drawing"),$("#draw-button").attr("style","color:"+$o.pencil.pencilColor+" !important"),$("#pencil-me").css({color:$o.pencil.pencilColor}),$o.pencil.drawing.start(),$o.pencil.isDrawing=!0)});$("#color-picker").on("click","li",function(){$o.pencil.pencilColor=$(this).css("color");$("#draw-button").attr("style","color:"+$o.pencil.pencilColor+" !important");$("#pencil-me").css({color:$o.pencil.pencilColor});$o.pencil.drawing.setColor($o.pencil.pencilColor);$("#color-picker").removeClass("show-picker")});var n=$o.core.globalVariables.userType=="A"?"agent":"visitor";$o.pencil.pencilColor=n=="agent"?"green":"red";$o.pencil.drawing=new Oct8ne.Drawings.DrawingUi(document.getElementById("oct8ne-helper"),document.getElementById("localCanvas"),document.getElementById("remoteCanvas"),n,0);$o.pencil.drawing.setColor($o.pencil.pencilColor);$o.pencil.drawing.onLocalSegmentAdded=function(n,t,i,r,u,f){if($o.core.isSignalRConnected()){var e={Room:$o.core.globalVariables.room,Data:JSON.stringify({userId:n,resourceId:t,points:i,color:r,isPermanent:u,segmentId:f,helperWidth:$("#oct8ne-helper").width(),helperHeight:$("#oct8ne-helper").height()})};$o.hubsOut.sendDrawing(e)}}},receiveDrawing:function(n){var t=JSON.parse(n.Data),i=$("#oct8ne-helper").width()/t.helperWidth,r=$("#oct8ne-helper").height()/t.helperHeight;$.each(t.points,function(n){t.points[n]=t.points[n]%2?t.points[n]*i:t.points[n]*r});$o.pencil.drawing.addRemoteDrawingSegment(t.userId,t.resourceId,t.points,t.color,t.isPermanent,t.segmentId);$("#pencil-me").css({color:$o.pencil.pencilColor});$o.core.globalVariables.userType=="V"?($("#pencil-agent").css({color:t.color}),$("#pencil-agent").children().length==0&&$("#pencil-agent").append("<p class='avatar-agent'><\/p>"),$("#pencil-agent p").css({background:"url('"+$o.visitorStart.avatarAgent+"') center center / cover"})):$("#pencil-visitor").css({color:t.color})},changeCanvaImage:function(n){$o.pencil.drawing.isDrawing=!1;$o.pencil.drawing.updateCanvasDimensions(!0);$o.pencil.drawing.setCurrentResourceId(n+""+$o.carousel.currentImage);$o.pencil.drawing.clearAll()},drawing:!1,isDrawing:!1,pencilColor:""}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.pin={init:function(){$o.pin.object=$("#pin-tool");$o.pin.events()},sendPin:function(n){++$o.tools.undoActions;var i=$o.canva.getCoords(n),t={Coords:{PosX:i.absleft,PosY:i.abstop},Room:$o.core.globalVariables.room,InternalId:$o.core.globalVariables.internalId,Scope:$o.carousel.currentImage,SentBy:$o.core.userType,Type:"P",Id:$o.tools.generateRandomId()};$o.pin.addPin(t);$o.core.isSignalRConnected()&&$o.hubsOut.sendPin(t);$o.saveRecord.pin(t.Id,$o.carousel.currentImage,t.Coords.PosX,t.Coords.PosY)},addPin:function(n,t){t||$o.pin.pinsHistory.push(n);var i={left:n.Coords.PosX*$o.canva.target.object.width(),top:n.Coords.PosY*$o.canva.target.object.height()};n.SentBy==$o.core.globalVariables.userType||t?$o.pin.addPinUI(n,i):$o.pin.mousePinUI(n,i);$o.tools.change($o.tools.type.POINT)},recoverPins:function(n,t,i){var u=$o.pin.pinsHistory,r,f;if(u)for(key in u)r=u[key],r.InternalId==t&&r.Scope==i&&(f={SentBy:r.SentBy,Coords:r.Coords,Type:r.Type,Id:r.Id},$o.core?$o.pin.addPin(f,"RECOVER"):sendInteractionToIframe(f,n))},object:null,pinsHistory:[]}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.saveRecord={goToSave:function(n,t,i){return new Promise(function(r){$o.core.globalVariables.userType=="V"&&($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:$o.variablesVisitor.status}]),$o.variablesVisitor.nowInteractionAFK=new Date,$o.variablesVisitor.lastInteractionAFK?$o.variablesVisitor.nowInteractionAFK-$o.variablesVisitor.lastInteractionAFK>$o.variablesVisitor.referenceTimeAFK?($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""},]),$("#lay-AFK .afk-content-advice").text(culture.coviewer.AdviceAFK1).show(),$("#lay-AFK").show(),$("#chat-input").blur(),$.connection.hub.state!=$.signalR.connectionState.disconnected&&$.connection.hub.stop()):($o.variablesVisitor.lastInteractionAFK=$o.variablesVisitor.nowInteractionAFK,$o.variablesVisitor.nowInteractionAFK=!1,$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.lastInteractionAFK,value:$o.variablesVisitor.lastInteractionAFK}])):($o.variablesVisitor.lastInteractionAFK=$o.variablesVisitor.nowInteractionAFK,$o.variablesVisitor.nowInteractionAFK=!1,$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.lastInteractionAFK,value:$o.variablesVisitor.lastInteractionAFK}])));$o.saveRecord.save(n,t,i).then(function(n){r(n)})})},save:function(n,t,i){return new Promise(function(r){$.each(n,function(t){n[t].Fields=JSON.stringify(n[t].Fields);!n[t].ProductId&&$o.core.globalVariables.internalId&&$o.core.globalVariables.internalId.length&&(n[t].ProductId=$o.core.globalVariables.internalId)});var e=$o.core.globalVariables.userType=="V"?$o.core.globalVariables.myToken:$o.core.globalVariables.visitorToken,u=$o.core.globalVariables.userType=="V"?$o.core.globalVariables.room:$o.core.globalVariables.tokenSession,f=$o.core.globalVariables.userType=="V"?$o.variablesVisitor.sessionSummaryId:$o.core.globalVariables.sessionSummaryId;t&&(u=t);i&&(f=i);$.ajax({type:"POST",url:"/Data/SaveInteractions",data:{sessionSummaryId:f,tokenSession:u,tokenVisitor:e,jsonListData:JSON.stringify(n)},async:!0}).done(function(){r(!0)}).fail(function(){r(!1)});setTimeout(function(){r(!1)},15e3)})},query:function(n,t){var i=[{SentBy:$o.core.globalVariables.userType,Type:"Query",RecoverType:$o.core.globalVariables.userType=="V"?1:2,Fields:{Type:t,Term:n}}];$o.saveRecord.goToSave(i)},linkSession:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"LinkSession",RecoverType:1,Fields:n}];$o.saveRecord.goToSave(t)},translation:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"Translation",RecoverType:1,Fields:{License:n.License,Status:n.Status,AgentLanguage:n.AgentLanguage,VisitorLanguage:n.VisitorLanguage}}];$o.saveRecord.goToSave(t)},checkTranslation:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"CheckTranslation",RecoverType:2,Fields:{Status:n}}];$o.saveRecord.goToSave(t)},trackItem:function(n){var t=[];$.each(n,function(i){var r={SentBy:$o.core.globalVariables.userType,Type:"TrackItem",ProductId:n[i].InternalId,RecoverType:1,Fields:{InternalId:n[i].InternalId,Thumbnail:n[i].Thumbnail}};t.push(r)});$o.saveRecord.goToSave(t)},viewedItem:function(n,t,i,r,u){var f=[{SentBy:$o.core.globalVariables.userType,Type:"ViewedItem",RecoverType:1,ProductId:n,Fields:{Title:t,Thumbnail:i,FromAgentSearch:r,Id:u}}];$o.saveRecord.goToSave(f)},myListItem:function(n,t,i,r,u){var f=[{SentBy:$o.core.globalVariables.userType,Type:"MyListItem",RecoverType:1,ProductId:n,Fields:{Title:t,Thumbnail:i,AddedFrom:r,Id:u}}];$o.saveRecord.goToSave(f)},myCartItem:function(n,t,i,r,u){var f=[{SentBy:$o.core.globalVariables.userType,Type:"MyCartItem",ProductId:n,RecoverType:1,Fields:{Title:t,Thumbnail:i,AddedFrom:r,Id:u}}];$o.saveRecord.goToSave(f)},deleteCartItem:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"DeleteCartItem",ProductId:n,RecoverType:1}];$o.saveRecord.goToSave(t)},uploadItem:function(n,t,i,r){var u=[{ProductId:n,SentBy:$o.core.globalVariables.userType,RecoverType:1,Type:"UploadItem",Fields:{Title:t,Thumbnail:i,Id:r}}];$o.saveRecord.goToSave(u)},catalogItem:function(n,t,i,r,u){var f=[{SentBy:$o.core.globalVariables.userType,Type:"CatalogItem",ProductId:n,RecoverType:1,Fields:{Title:t,Thumbnail:i,FromAgentSearch:r,Id:u}}];$o.saveRecord.goToSave(f)},image:function(n,t){var i=[{SentBy:$o.core.globalVariables.userType,Type:"Image",RecoverType:1,Fields:{Scope:n,Url:t}}];$o.saveRecord.goToSave(i)},zoom:function(n,t,i,r,u){var f=[{SentBy:$o.core.globalVariables.userType,Type:"Zoom",RecoverType:1,Fields:{Scope:n,Url:t,Level:i,CoordX:r,CoordY:u}}];$o.saveRecord.goToSave(f)},pin:function(n,t,i,r){var u=[{SentBy:$o.core.globalVariables.userType,RecoverType:1,Type:"Pin",Fields:{Id:n,Scope:t,CoordX:i,CoordY:r}}];$o.saveRecord.goToSave(u)},undo:function(n){var t=[{SentBy:"A",RecoverType:1,Type:"Undo",Fields:{Id:n}}];$o.saveRecord.goToSave(t)},chat:function(n,t,i,r,u){var f=[{SentBy:r,Type:"Chat",RecoverType:1,Fields:{Content:n,Name:t,Id:i,DenyVisitorTyping:u}}];return new Promise(function(n){$o.saveRecord.goToSave(f).then(function(t){n(t)})})},canned:function(n,t,i){var r=[{SentBy:"A",Type:"Canned",RecoverType:1,Fields:{Content:n,Id:i,SubType:t,Name:$o.core.globalVariables.otherName}}];$o.saveRecord.goToSave(r)},gdpr:function(n,t,i){var r=[{SentBy:"A",Type:"Gdpr",RecoverType:1,Fields:{Content:n,Id:i,SubType:t,Name:$o.core.globalVariables.otherName}}];$o.saveRecord.goToSave(r)},supervisorMessage:function(n,t,i){var r=[{SentBy:"A",Type:"SupervisorMessage",RecoverType:2,Fields:{Content:n,Id:i,Role:$o.supervisorMode.role,Name:$o.core.globalVariables.myName}}];$o.saveRecord.goToSave(r)},cannedResponse:function(n,t){var i=[{SentBy:$o.core.globalVariables.userType,Type:"CannedResponse",RecoverType:1,Fields:{Id:n,Response:t}}];$o.saveRecord.goToSave(i)},inactivity:function(n){var t=[{SentBy:$o.core.globalVariables.userType,RecoverType:1,Type:"Inactivity",Fields:{Message:n}}];$o.saveRecord.goToSave(t)},inactivityServer:function(){var n=[{SentBy:$o.core.globalVariables.userType,RecoverType:4,Type:"InactivityServer"}];$o.saveRecord.goToSave(n)},statusVisitor:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"StatusVisitor",RecoverType:n=="Attending"?3:4,Fields:{Status:n}}];$o.saveRecord.goToSave(t)},statusViewer:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"StatusViewer",RecoverType:4,Fields:{Status:n}}];$o.saveRecord.goToSave(t)},justLookingB:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"JustLookingB"}];$o.saveRecord.goToSave(n)},loginB:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"LoginB"}];$o.saveRecord.goToSave(n)},checkoutB:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"CheckoutB"}];$o.saveRecord.goToSave(n)},myCartB:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"MyCartB"}];$o.saveRecord.goToSave(n)},titleB:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"TitleB"}];$o.saveRecord.goToSave(n)},closeViewerB:function(){var n=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"CloseViewerB"}];$o.saveRecord.goToSave(n)},closeByMenuB:function(){var n=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"CloseByMenuB"}];$o.saveRecord.goToSave(n)},closeViewerBySurveyB:function(){var n=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"CloseViewerBySurveyB"}];$o.saveRecord.goToSave(n)},getSummaryB:function(){var n=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"GetSummaryB"}];$o.saveRecord.goToSave(n)},showSummary:function(){var n=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"ShowSummary"}];$o.saveRecord.goToSave(n)},sendSummary:function(n){var t=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"SendSummary",Fields:{Email:n}}];$o.saveRecord.goToSave(t)},rate:function(n,t){var i=[{RecoverType:4,SentBy:$o.core.globalVariables.userType,Type:"Rate",Fields:{Action:n,NameAgent:t}}];$o.saveRecord.goToSave(i)},pageClick:function(){var n=[{SentBy:$o.core.globalVariables.userType,RecoverType:4,Type:"PageClick"},{SentBy:$o.core.globalVariables.userType,RecoverType:2,Type:"StatusViewer",Fields:{Status:"CHAT"}}];$o.saveRecord.goToSave(n)},transfer:function(n,t,i,r){var u=[{SentBy:"A",Type:"Transfer",RecoverType:3,Fields:{OldAgent:n,NewAgent:t,Message:i,Type:r}}];$o.saveRecord.goToSave(u)},endSessionB:function(){var n=[{RecoverType:3,SentBy:$o.core.globalVariables.userType,Type:"EndSessionB"}];$o.saveRecord.goToSave(n)},memo:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"Memo",RecoverType:2,Fields:{Content:n}}];$o.saveRecord.goToSave(t)},form:function(n,t,i){var r=[{SentBy:n==="INITFORM"?"A":$o.core.globalVariables.userType,Type:"Form",RecoverType:1,Fields:{SubType:n,Id:t,Content:i}}];$o.saveRecord.goToSave(r)},formOrder:function(n,t,i){var r=[{SentBy:"A",Type:"Form",RecoverType:1,Fields:{SubType:n,Id:t,Content:i}}];$o.saveRecord.goToSave(r)},formResponse:function(n,t,i,r){var u=[{SentBy:$o.core.globalVariables.userType,Type:"FormResponse",RecoverType:1,Fields:{Id:n,Response:t}}];$o.saveRecord.goToSave(u,i,r)},agentOut:function(n,t){var i=[{SentBy:$o.core.globalVariables.userType,Type:"AgentOut",RecoverType:4,Fields:{Name:n,MessageType:t}}];$o.saveRecord.goToSave(i)},conference:function(n,t,i,r){var u=[{SentBy:$o.core.globalVariables.userType,Type:"Conference",RecoverType:n,Fields:{Action:t,Type:i}}];r&&(u[0].Fields.Duration=r);$o.saveRecord.goToSave(u)},documentLink:function(n,t){var i=[{SentBy:$o.core.globalVariables.userType,Type:"DocumentLink",RecoverType:1,Fields:{Extension:n,Url:t}}];$o.saveRecord.goToSave(i)},contextInfo:function(n){var t=[{SentBy:$o.core.globalVariables.userType,Type:"ContextInfo",RecoverType:2,Fields:n}];$o.saveRecord.goToSave(t)},openNewTab:function(){return[{SentBy:$o.core.globalVariables.userType,Type:"OpenNewTab",RecoverType:4,Fields:{Action:"ClosedBecaouseNewTab"}}]}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.search={init:function(){$o.search.events()},resetSearch:function(){$o.search.itsANewSearch=!0;$o.search.setSearchIndex($o.search.searchIndexActions.RESET);$o.search.nodesDeleteList();$o.search.sortedBy="relevance";$o.search.direction="desc";$o.search.setDefaultSortChoiceUI();searchVM.appliedFilters([])},doSearch:function(n,t,i,r){var e="&orderby="+$o.search.sortedBy,o="&dir="+$o.search.direction,f,u,l;t||$("#filter-button > span").hide().text("");var s=$(".sort-filter li:nth-child(1)").text().split(" "),h=$(".sort-filter li:nth-child(2)").text().split(" "),c=$(".sort-filter li:nth-child(3)").text().split(" ");$o.search.sortedBy=="relevance"?$(".sorted-by").text(" "+c[c.length-1].toLowerCase()):$o.search.sortedBy=="price"?$(".sorted-by").text(" "+h[h.length-1].toLowerCase()):$o.search.sortedBy=="name"?$(".sorted-by").text(" "+s[s.length-1].toLowerCase()):$(".sorted-by").text(" "+$o.search.sortedBy);$o.core.globalVariables.userType=="V"&&($o.search.searchTerm=$o.chat.disableScripts(n));$o.search.setSearchLayoutUI();f={Body:t!=undefined?n+t+e+o:n+e+o,Room:$o.core.globalVariables.room,SentBy:"V",Type:"Q"};u=!1;$o.core.globalVariables.userType=="V"&&!i&&$o.search.itsANewSearch&&$o.core.isSignalRConnected()&&$o.hubsOut.sendSearchTerm(f,r);l=$o.search.allResultsReturned?$o.search.allResultsReturned():!1;$o.search.itsANewSearch?(!$o.search.itsANewSearch||i||$o.search.isSearching||$o.saveRecord.query(f.Body,"Query"),$o.search.loadingSearchUI(),u=!0):l||($o.search.loadingMoreProductsUI(),u=!0);u&&($("#error-search").hide(),$o.search.isSearching=!0,$o.search.getSearchData(n,t,i),$o.search.setSearchIndex($o.search.searchIndexActions.ADD))},add:function(n,t,i){$("#filters-panel,#sort-results-panel").hide();$o.core.globalVariables.userType=="V"&&$o.visitorSearch.hideSearchTutorial();$o.search.itsANewSearch==!0&&(window.searchVM.totalResults(t),$o.search.totalResults=t);$o.search.removeLoadingProductsUI();$o.search.setTotalItemsUI(t);n.length?($.each(n,function(t){window.searchVM.add(n[t])}),$o.core.userType!="V"||$o.search.newSearch!=!0||$o.enterData.idProduct!=""||$o.core.globalVariables.enterType==$o.core.enterType.RECOVERSESSION||$o.core.globalVariables.internalId||i||setTimeout(function(){$o.search.clickFirstProductUI()},1e3),$o.search.newSearch=!1,$o.search.hideNoProducts()):($o.core.userType!="V"||$o.enterData.productsViewed==""||i||$o.platform.getProductSummary($o.enterData.productsViewed),$o.search.showNoProducts(),window.searchVM.isEmptyGrid(!0));$o.search.isSearching=!1},nodesDeleteList:function(){window.searchVM.emptySearchResults()},searchNodeInSearchVM:function(n){return window.searchVM.searchNode(n)},addNodeToMyList:function(n){var t=viewedVM.getProduct(n),i;$o.search.addNodeToMyListUI();$o.carousel.addProductInfoToList(t,$o.carousel.lists.MYLIST);i=$o.fullProducts.searchProduct(t.InternalId);$o.carousel.prepareInteraction(i,$o.carousel.lists.MYLIST)},addNodeToCart:function(n){$o.search.addNodeToCartUI();$o.carousel.addProductInfoToList(n,$o.carousel.lists.MYCART)},size:10,sortedBy:"relevance",direction:"desc",totalResults:0,itsANewSearch:!0,newSearch:!0,openSeeDescription:!1,searchDirections:{ASC:"asc",DESC:"desc"},searchTerm:"",searchModes:{RESULTS:"RESULTS",CATEGORY:"CATEGORY",CATALOG:"CATALOG"},searchMode:"",searchIndexActions:{RESET:"RESET",ADD:"ADD"},isSearching:!1,sendingProductToCanva:!1,productFromSearch:!1}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.tools={init:function(){$o.tools.events()},change:function(n){$o.canva.holder.helper.removeClass();$o.tools.context=n;switch(n){case $o.tools.type.PIN:$o.tools.addClassAddingPin();break;case $o.tools.type.POINT:$o.tools.addClassPointing()}},generateRandomId:function(){for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},undoPin:function(){var n=$.grep($o.pin.pinsHistory,function(n){return n.InternalId==$o.core.globalVariables.internalId&&n.Scope==$o.carousel.currentImage}),t;n=n[n.length-1];n&&($o.tools.deletePin(n.Id),t={Room:$o.core.globalVariables.room,Id:n.Id,Type:"U"},$o.core.isSignalRConnected()&&$o.hubsOut.sendUndo(t),$o.saveRecord.undo(n.Id))},deletePin:function(n){var t=$.map($o.pin.pinsHistory,function(t,i){if(t.Id==n)return i});$o.pin.pinsHistory.splice(t[0],1);$("#"+n).remove()},randomCursorPosition:function(){var n=Math.floor(Math.random()*10+1),t=Math.floor(Math.random()*10+1);return n=n<5?-50:320,t=t<5?-50:540,{top:n,left:t}},context:"DRAG",lastContext:"",undoActions:0,type:{ZOOM:"ZOOM",DRAG:"DRAG",PIN:"PIN",POINT:"POINT",MARK:"MARK",ANY:"ANY"},object:null,button:{zoom:null,pin:null,point:null,note:null,mark:null}}}(window);YouTubeViewer.prototype.setup=function(n){oct8ne.log("Cargamos script youtube");var t=this;$.ajax({type:"GET",url:"//www.youtube.com/iframe_api",success:function(){t.loaded=!0;n&&setTimeout(function(){n()},200)},error:function(){oct8ne.log("Error carga script youtube");++t.retries;t.retries<3?t.setup(n):console.log("Youtube has not been loaded!")},dataType:"script",cache:!0})};YouTubeViewer.prototype.onVisibleResourceChanged=function(n,t,i){this.load(i)};YouTubeViewer.prototype.clear=function(){this.player&&(this.videoDuration(0),this.disableTimer(),this.player.stopVideo(),this.player.clearVideo())};YouTubeViewer.prototype.resizeWindow=function(n,t,i,r){var f=$("#"+this.viewerContainerId),e=$("#"+this.viewerContainerId+"-controls"),o=r-80,u=r*1.77-120,s=(i-u)/2;return{width:"100%"}};YouTubeViewer.prototype.load=function(n){var i=this,t;this.isPlaying(!1);this.videoPlayerIsReady(!1);this.firstLoad=!0;this.actionNameReceivedBeforeLoading=null;this.actionTimeReceivedBeforeLoading=null;this.videoDuration(0);this.disableTimer();var r=$("#"+this.viewerContainerId),u=r.height(),f=r.width();this.resizeWindow(0,0,f,u);t="";n.indexOf("youtu.be")!=-1?t=n.substring(n.lastIndexOf("/")+1):(t=n.split("=")[1],t=t.split("&")[0]);this.player&&(this.player.destroy(),this.player=null);this.player?(this.clear(),this.isMutedBeforeStart=this.player.isMuted(),this.player.mute(),this.player.loadVideoById({videoId:t}),this.startAutocheckingOfVideoPlayer()):this.player=new YT.Player(this.viewerContainerId,{height:u,width:f,playerVars:{autoplay:1,controls:0,rel:0},videoId:t,progressBar:!1,events:{onReady:function(){Log("Video player is ready");i.isMutedBeforeStart=i.player.isMuted();i.player.mute();i.startAutocheckingOfVideoPlayer()},onStateChange:function(n){return i.onPlayerStateChange(n)},onError:function(n){var t;switch(n.data){case 100:t=culture.coviewer.VideoNotFound;break;case 101:case 150:t=culture.coviewer.VideoNotExternal;break;default:t=culture.coviewer.VideoError+n.data+"."}Ui.DialogBox.error(t);Log("Youtube player ERROR "+n.data+": "+t)}}})};YouTubeViewer.prototype.processAction=function(n,t){var i=this,r,u;this.firstLoad&&(this.actionNameReceivedBeforeLoading=n,this.actionTimeReceivedBeforeLoading=t,this.actionBeforeLoadingReceivedAtMilliseconds=(new Date).getTime());this.pauseTimer&&(clearTimeout(this.pauseTimer),this.pauseTimer=0);switch(n){case"play":this.isPlaying(!0);this.player.seekTo(t);this.player.playVideo();this.updateUiWithVideoPosition(t);this.enableTimer();break;case"pause":this.disableTimer();r=this.player.getCurrentTime();u=(t-r)*1e3;r<t&&this.isPlaying()&&u<=4e3?this.pauseTimer=setTimeout(function(){i.player.pauseVideo();i.pauseTimer=0;i.isPlaying(!1)},u):(this.player.pauseVideo(),this.player.seekTo(t),this.updateUiWithVideoPosition(t),this.isPlaying(!1))}};YouTubeViewer.prototype.playClicked=function(){if(!this.isPlaying()&&!((new Date).getTime()-this.lastClickTime<this.delayBetweenClicks)&&this.videoPlayerIsReady()!=!1){this.lastClickTime=(new Date).getTime();this.isPlaying(!0);var n=this.player.getCurrentTime();this.onAction("play",n);this.player.playVideo();this.enableTimer()}};YouTubeViewer.prototype.pauseClicked=function(){if(this.isPlaying()&&!((new Date).getTime()-this.lastClickTime<this.delayBetweenClicks)){this.lastClickTime=(new Date).getTime();this.isPlaying(!1);var n=this.player.getCurrentTime();this.onAction("pause",n);this.player.pauseVideo();this.disableTimer()}};YouTubeViewer.prototype.speakerClicked=function(){this.isMuted(!this.isMuted());this.isMuted()?this.player.mute():this.player.unMute()};YouTubeViewer.prototype.initializePlayerStatusAndControls=function(){var t,n,r,i;Log("Initializing player and controls");this.stopAutocheckingOfVideoPlayer();this.actionNameReceivedBeforeLoading?(Log("Applying last command received during buffering: "+this.actionNameReceivedBeforeLoading+" "+this.actionTimeReceivedBeforeLoading),t=this.actionNameReceivedBeforeLoading,n=this.actionTimeReceivedBeforeLoading):(t="pause",n=0,Log("Pausing video at 0:00 after buffering"));t=="pause"?(this.prevStatus=YT.PlayerState.PAUSED,this.player.pauseVideo(),this.player.seekTo(n),this.disableTimer()):t=="play"&&(r=Math.round(((new Date).getTime()-this.actionBeforeLoadingReceivedAtMilliseconds)/1e3),this.prevStatus=YT.PlayerState.PLAYING,this.player.seekTo(n+r),this.player.playVideo(),this.enableTimer());i=Math.floor(this.player.getDuration());this.videoDuration(i);this.setSliderMax(i);this.updateUiWithVideoPosition(n);this.videoPlayerIsReady(!0);this.isMutedBeforeStart?this.player.mute():this.player.unMute()};YouTubeViewer.prototype.startAutocheckingOfVideoPlayer=function(){var t=this,n;this.stopAutocheckingOfVideoPlayer();n=this;setTimeout(function(){n.firstLoad&&(Log("Starting player status polling..."),n.autocheckingTimer=setInterval(function(){var i=n.player.getPlayerState&&n.player.getPlayerState();i===YT.PlayerState.PLAYING&&n.firstLoad&&(Log("Forcing player and controls initialization"),n.stopAutocheckingOfVideoPlayer.bind(n),t.firstLoad=!1,n.initializePlayerStatusAndControls())},1e3))},5e3)};YouTubeViewer.prototype.stopAutocheckingOfVideoPlayer=function(){this.autocheckingTimer&&(clearInterval(this.autocheckingTimer),this.autocheckingTimer=0)};YouTubeViewer.prototype.onPlayerStateChange=function(n){this.videoStopped=!1;Log(n.data);switch(n.data){case YT.PlayerState.PLAYING:this.firstLoad?(Log("First PLAY of video"),this.stopAutocheckingOfVideoPlayer(),this.firstLoad=!1,this.initializePlayerStatusAndControls()):(Log("Video PLAYING > isPlaying()="+this.isPlaying()+" and prevStatus=="+this.getStatusDescription(this.prevStatus)),this.isPlaying()||this.prevStatus!=YT.PlayerState.PAUSED&&this.prevStatus!=YT.PlayerState.ENDED||this.playClicked(),this.prevStatus=n.data);break;case YT.PlayerState.PAUSED:if(this.player.getCurrentTime()>=this.videoDuration()){this.prevStatus=n.data;Log("Video PAUSED before video END");return}Log("Video PAUSED > isPlaying()="+this.isPlaying()+" and prevStatus=="+this.getStatusDescription(this.prevStatus));this.isPlaying()&&this.prevStatus==YT.PlayerState.PLAYING&&this.pauseClicked();this.prevStatus=n.data;break;case YT.PlayerState.ENDED:Log("Video ENDED");this.videoStopped=!0;this.isPlaying(!1);this.updateUiWithVideoPosition(this.player.getCurrentTime());this.disableTimer();this.prevStatus=n.data;break;default:var t=this.getStatusDescription(n.data);Log("Video player status changed to "+t+"(previous state was "+this.getStatusDescription(this.prevStatus)+")")}};YouTubeViewer.prototype.getStatusDescription=function(n){var t=n;switch(n){case YT.PlayerState.PLAYING:t="Playing";break;case YT.PlayerState.BUFFERING:t="Buffering";break;case YT.PlayerState.PAUSED:t="Paused";break;case YT.PlayerState.ENDED:t="Ended";break;case YT.PlayerState.UNSTARTED:t="Unstarted"}return t};YouTubeViewer.prototype.enableTimer=function(){var n=this,t;this.positionTimer&&(t=this.player.getCurrentTime(),this.currentPosition(t),this.disableTimer());this.positionTimer=setInterval(function(){n.updateUiWithVideoPosition(n.player.getCurrentTime())},1e3)};YouTubeViewer.prototype.disableTimer=function(){this.positionTimer&&(clearInterval(this.positionTimer),this.positionTimer=0)};YouTubeViewer.prototype.updateUiWithVideoPosition=function(n){this.currentPosition(n);this.sliderControl.val(n)};YouTubeViewer.prototype.initializeSlider=function(){var n=this,i=!0,t=this.sliderControl=$("#youtubevideoplayer-controls .slider");if(t.noUiSlider){t.noUiSlider({start:0,connect:"lower",orientation:"horizontal",range:{min:0,max:100}});t.on("slide",function(){i&&(i=!1,n.disableTimer());n.currentPosition(t.val())});t.on("set",function(){i=!0;var r=t.val();if(n.updateUiWithVideoPosition(r),n.isPlaying()&&r<n.videoDuration()){n.player.seekTo(r);n.enableTimer();n.onAction("play",r)}else{n.onAction("pause",r);n.player.seekTo(r);n.videoStopped&&(n.videoStopped=!1,n.isPlaying(!0),n.enableTimer(),Log("Playing after sliding on an ended video"))}})}};YouTubeViewer.prototype.setSliderMax=function(n){this.sliderControl.noUiSlider&&this.sliderControl.noUiSlider({start:0,range:{min:0,max:n}},!0)};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.canned={init:function(){},sendCanned:function(n,t){var i={Body:{Original:t?t.replace(/\\n/g,"").replace(/&#39;/g,"'"):"",Translated:!1},Room:$o.core.globalVariables.room,Category:"CANNED",Type:n,Id:$o.tools.generateRandomId(),SentBy:n==$o.canned.type.TRIGGER||$o.canned.type.INACTIVITYVISITOR1||$o.canned.type.INACTIVITYVISITOR2||$o.canned.type.INACTIVITYVISITOR3?"A":$o.core.globalVariables.userType};$o.canned.createCanned(i);$o.core.isSignalRConnected()&&$o.hubsOut.sendMessage(i);$o.saveRecord.canned(i.Body,i.Type,i.Id);$o.utils&&$o.utils.sendCannedCallback&&$o.utils.sendCannedCallback(n)},sendGdpr:function(n){var t={Body:{Original:n?n.replace(/\\n/g,"").replace(/&#39;/g,"'"):"",Translated:!1},Room:$o.core.globalVariables.room,Category:"GDPR",Type:"GDPR",Id:$o.tools.generateRandomId(),SentBy:$o.core.globalVariables.userType};$o.core.agentsConnected&&($o.canned.createGdpr(t),$o.saveRecord.gdpr(t.Body,t.Type,t.Id));$o.core.isSignalRConnected()&&$o.hubsOut.sendMessage(t)},createCanned:function(n,t){if(n.Type===$o.canned.type.TRIGGER&&n.Body&&n.Body.hasOwnProperty("Original")&&n.Body.Original==="")return!1;if(n.Body&&n.Body.hasOwnProperty("Original")||(n.Body={Original:n.Body,Translated:!1}),$o.speak.messages.push(new $o.speak.canned({body:n.Body.Original,tokens:n.Tokens,sentBy:n.SentBy,name:n.Type==$o.canned.type.TRIGGER&&$o.core.userType=="V"?$o.core.globalVariables.otherName:n.Name?n.Name:$o.core.globalVariables.myName,id:n.Id,time:n.Time?n.Time:$o.speak.getMessageTime(),type:n.Type,response:t?"[responsed]":!1})),n.Type==$o.canned.type.WELCOME){var i=$o.storage.local.get($o.core.localStorageTypes.JUSTLOOKINGBUTTON);i&&$("#welcome-just-looking").parent().show()}n.Type=="DISCONNECT"&&$o.core.visitorIsGone();$o.scroll.moveChatToBottom()},createCannedTriggerMessage:function(n){$o.speak.messages.push(new $o.speak.canned({body:n,time:$o.speak.getMessageTime(),type:$o.canned.type.TRIGGERMESSAGE}));$o.scroll.moveChatToBottom()},createGdpr:function(n,t){n.Body&&n.Body.hasOwnProperty("Original")||(n.Body={Original:n.Body,Translated:!1});$o.speak.messages.push(new $o.speak.gdpr({body:n.Body.Original,tokens:n.Tokens,sentBy:n.SentBy,name:$o.core.globalVariables.otherName,id:n.Id,time:n.Time?n.Time:$o.speak.getMessageTime(),type:n.Type,response:!1}));t||$o.scroll.moveChatToBottom()},sendCannedResponse:function(n,t){var i={Id:n,Response:t,Category:"CANNEDRESPONSE",Room:$o.core.globalVariables.room,SentBy:$o.core.globalVariables.userType};$o.canned.updateCannedWithResponse(i);i.Response=JSON.stringify(i.Response);$o.saveRecord.cannedResponse(i.Id,i.Response)},updateCannedWithResponse:function(n){var t=ko.utils.arrayFilter($o.speak.messages(),function(t){return t.id==n.Id});t[0].response(n.Response)},type:{AGENTAVAILABLE:"AGENTAVAILABLE",AGENTSBUSY:"AGENTSBUSY",AGENTSDISCONNECT:"AGENTSDISCONNECT",CHECKOUT:"CHECKOUT",INACTIVITYVISITOR1:"INACTIVITY1",INACTIVITYVISITOR2:"INACTIVITY2",INACTIVITYVISITOR3:"INACTIVITY3",NOMOREAGENTS:"NOMOREAGENTS",OVERBOOKING:"OVERBOOKING",RECONNECTSESSION:"RECONNECTSESSION",RECONNECTSESSIONEMAIL:"RSE",SENDSESSION:"SENDSESSION",TRANSFER:"TRANSFER",TRANSFERFROMLOGOUT:"TRANSFERFROMLOGOUT",TRIGGER:"TRIGGER",VIPMESSAGE:"VIPMESSAGE",GDPR:"GDPR",WELCOME:"WELCOME",TRIGGERIMAGE:"TRIGGERIMAGE",INITSHARING:"INITSHARING",EXTENSIONADVICE:"EXTENSIONADVICE"}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.chat={init:function(){$o.chat.events()},displayIsTyping:function(n,t,i){$o.core.globalVariables.userType==="V"&&$o.core.globalVariables.isTypingWithText==="True"?$o.chat.displayIsTypingWithText(n,t,i):$o.chat.displayIsTypingWithoutText(t)},displayIsTypingWithText:function(n,t,i){var r,u;if(t===1?n="true":t===0&&(n="false"),i===32||t===1||t===0)if(r={Body:{Original:n,Translated:!1},Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:"T"},$o.core.isSignalRConnected())u=$o.variablesVisitor.status,u==="Attending"&&$o.hubsOut.sendWriting(r);else{$o.core.globalVariables.visitorsOverflow||$o.chat.displayOfflineStatus();return}},displayIsTypingWithoutText:function(n){var t,i,r;if(($o.core.globalVariables.userType=="A"&&!$o.agentTools.isAgentChatActive||$o.core.globalVariables.userType=="V")&&(n>0&&!$o.chat.isTyping?t=!0:n==0&&$o.chat.isTyping&&(t=!1),t!=null||t!=undefined))if(i={Body:{Original:t?"true":"false",Translated:!1},Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:"T"},$o.core.isSignalRConnected())$o.core.globalVariables.userType=="V"?(r=$o.variablesVisitor.status,r=="Attending"&&($o.hubsOut.sendWriting(i),$o.chat.isTyping=t)):($o.hubsOut.sendWriting(i),$o.chat.isTyping=t);else{$o.core.globalVariables.visitorsOverflow||$o.chat.displayOfflineStatus();return}},pressEnterOnSearchInput:function(n){$o.core.globalVariables.userType!=="V"||$o.core.isSignalRConnected()?$o.chat.prepareSend(n):$o.visitorStart.restartConnection(n,!0)},prepareSend:function(n){var t=!1,i;n=$o.chat.disableScripts(n);$o.core.globalVariables.userType=="V"&&(!$o.core.hasBeenWaiting||$o.core.globalVariables.visitorsOverflow)&&(i=$o.variablesVisitor.status,i!="Attending"&&($o.chat.messagesBeforeWaiting.push(n),$o.chat.startedChangeToWaiting||($o.chat.startedChangeToWaiting=!0,$o.visitorSearch.changeToWaitingStatus(n)),t=!0));t||(n.length>=1&&(n=$o.chat.disableScripts(n),n=n.replace(/\\n/g,"<br/>"),$o.core.globalVariables.userType=="A"?$o.translateAgent.doReview?$o.translateAgent.waitingForReview?$o.translate.startTranslation(n,$o.translate.messageTypes.CHAT):($o.translateAgent.reviewedMessage.translated=n,$o.translateAgent.waitingForReview=!1,$o.chat.send($o.translateAgent.reviewedMessage)):$o.translate.startTranslation(n,$o.translate.messageTypes.CHAT):$o.translate.startTranslation(n,$o.translate.messageTypes.CHAT)),$o.chat.isTyping=!1,$o.chat.hideJustLookingMessage())},sendMessagesBeforeConnected:function(){$.each($o.chat.messagesBeforeWaiting,function(n){$o.translate.startTranslation($o.chat.messagesBeforeWaiting[n],$o.translate.messageTypes.CHAT)});$o.chat.messagesBeforeWaiting=[]},send:function(n){var t={Body:{Original:n.original.replace(/\\n/g,"").replace(/&#39;/g,"'").trim(),Translated:n.translated.length?n.translated.replace(/\\n/g,"").replace(/&#39;/g,"'").trim():!1},Name:$o.core.globalVariables.myName,Room:$o.core.globalVariables.room,Category:"CHAT",Id:$o.tools.generateRandomId(),SentBy:$o.core.globalVariables.userType};$o.core.globalVariables.userType=="V"&&$.connection.hub.state==$.signalR.connectionState.disconnected&&$o.core.globalVariables.enterType!==$o.core.enterType.TREEPREVIEW?$o.chat.displayOfflineStatus():($o.core.globalVariables.userType=="A"&&$o.translateAgent.doReview&&($(".review-translation").hide(),$("#chat-input , .chat-input-emoji").removeClass("reviewing"),$(".chat-send").html(culture.coviewer.TranslateButton),$o.translateAgent.waitingForReview=!0),$o.chat.updateMessage(t),$o.saveRecord.chat(t.Body,t.Name,t.Id,t.SentBy,!1).then(function(){$o.core.agentsConnected&&$o.hubsOut.sendMessage(t)}))},sendTriggerAsChat:function(n){var t={Body:n.replace(/\\n/g,"").replace(/&#39;/g,"'"),Name:$o.core.globalVariables.otherName,Room:$o.core.globalVariables.room,Category:"CHAT",Id:$o.tools.generateRandomId(),SentBy:"A"};$o.chat.updateMessage(t);$o.saveRecord.chat(t.Body,t.Name,t.Id,t.SentBy,!1)},updateMessage:function(n,t){var u=!1,i,r,f;t==="recoverfromV"&&(u=!0,t=!1);$o.chat.toogleDenyVisitorTyping(n.DenyVisitorTyping);$o.chat.hideTyping&&$o.chat.hideTyping();n.Body.hasOwnProperty("Original")||(n.Body={Original:n.Body,Translated:!1});i=$o.chat.checkUrlInBody(n.Body.Original,n.SentBy);r=!1;n.Body.Translated!==!1&&n.Body.Translated!=="false"&&(r=$o.chat.checkUrlInBody(n.Body.Translated,n.SentBy));$o.translate.isEnabled===!0||t?$o.core.globalVariables.userType=="V"&&n.SentBy=="A"?(i=n.Body.Translated,n.Body.Translated==""&&n.Body.Original.indexOf("<")>-1&&n.Body.Original.indexOf(">")>-1&&(i=n.Body.Original)):$o.core.globalVariables.userType=="A"&&n.SentBy=="A"&&(i=n.Body.Original):n.Body.Translated=!1;f=new $o.speak.chat({body:i.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g,'<span class="oct8ne-emoji-in-chat">$&<\/span>'),translation:r?r.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g,'<span class="oct8ne-emoji-in-chat">$&<\/span>'):r,tokens:n.Tokens,sentBy:n.SentBy,name:n.Name,id:n.Id,time:n.Time?n.Time:$o.speak.getMessageTime()});$o.speak.messages.push(f);u||$o.scroll.moveChatToBottom();$("#go-to-bottom").is(":visible")&&($o.chat.alertMessageInChat=$o.chat.alertMessageInChat?$o.chat.alertMessageInChat+1:1,$("#warning-chat").text($o.chat.alertMessageInChat).show())},checkUrlInBody:function(n,t){var u=t=="V"?"CHTxt5":"CHTxt4",r="",i;return $o.utils&&$o.utils.getCustomLinkTarget&&(r=$o.utils.getCustomLinkTarget(n)),$o.core.globalVariables.isCustomApp?(n.indexOf($o.core.globalVariables.baseUrl)>-1?(r+="target-parent",i=linkifyHtml(n,{tagName:"a",target:"_blank",newLine:"\n",className:u+" "+r})):i=linkifyHtml(n,{tagName:"a",target:"_blank",newLine:"\n",className:u+" "+r,formatHref:function(n){return n+"#native-browser"}}),i=i.replace('target="_blank"',""),console.log(i)):i=linkifyHtml(n,{tagName:"a",target:"_blank",newLine:"\n",className:u+" "+r}),i},disableScripts:function(n){return n.length>0&&n.match(/(<([^>]+)>)/gi)?(console.log("Attempt to inject script. Localizing IP..."),""):n},displayOfflineStatus:function(){if($o.core.globalVariables.userType=="V")$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""}]),$("#lay-AFK .afk-content-advice").text(culture.coviewer.OfflineAdvice2).show(),$("#lay-AFK").show(),$("#chat-input , .chat-input-emoji").blur();else return},sendIsAttendedToAnalytics:function(n){var t=!1;$o.utils&&$o.utils.attendingEventConditions?t=$o.utils.attendingEventConditions(n):n!="CHAT"&&n!="CHOICE"||$o.chat.sentAttendedToAnalytics||(++$o.chat.chatsInConversation,t=$o.chat.chatsInConversation>1&&$o.variablesVisitor.status==="Attending");t&&(parent.postMessage("SENDANALYTICSEVENT,GAAttendedByAgent, "+$o.core.globalVariables.otherName+" -- ID: "+$o.core.globalVariables.agentId,"*"),$o.chat.sentAttendedToAnalytics=!0,$o.carousel.sendProductToAnalytics("V"));$o.utils&&$o.utils.attendingCustomEvent&&$o.utils.attendingCustomEvent(n)},imagePreviewPasted:function(n){$("#pasted-image").css("background","url("+n+")");$("#preview-pasted").show()},refreshWindow:function(){parent.postMessage("REFRESHPAGE","*")},sendAlert:function(n){$o.core.globalVariables.agentType!==$o.visitorStart.agentTypes.BOT&&($o.chat.addAlertChat(),parent.postMessage("NEWCHATALERT,"+encodeURIComponent(n),"*"))},alerts:null,agentsConnected:!1,isTyping:!1,VisitorSendMessage:!1,alertMessage:null,alertProduct:null,queueChats:[],typingTimer:null,stopTypingInterval:15e3,messagesBeforeWaiting:[],startedChangeToWaiting:!1,chatsInConversation:0,sentAttendedToAnalytics:!1,pendingAccessFormMessage:!1}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.forms={init:function(){$o.forms.events()},sendForm:function(n,t){var i={Body:{Original:t?t:"",Translated:!1},Room:$o.core.globalVariables.room,SentBy:n==="INITFORM"?"A":$o.core.globalVariables.userType,Type:n,Category:"FORM",Id:$o.tools.generateRandomId()};$o.forms.createForm(i);$o.core.isSignalRConnected()&&$o.hubsOut.sendMessage(i);$o.saveRecord.form(n,i.Id,t)},sendOrderForm:function(n){var t={Body:{Original:n.OrderStatusForm[0].body,Translated:!1},Room:$o.core.globalVariables.room,SentBy:"A",Type:$o.forms.type.ORDER,Category:"FORM",Id:$o.tools.generateRandomId()};$o.forms.orderStatusOptions(n);$o.forms.createForm(t);$o.saveRecord.formOrder($o.forms.type.ORDER,t.Id,n.OrderStatusForm[0].body)},orderStatusOptions:function(n){return n?($o.forms.orderOptions=n,$o.storage.local.set("oct8ne-order-options",JSON.stringify(n))):$o.forms.orderOptions||($o.forms.orderOptions=JSON.parse($o.storage.local.get("oct8ne-order-options"))),$o.forms.orderOptions},createForm:function(n,t){n.Body&&n.Body.hasOwnProperty("Original")||(n.Body={Original:n.Body,Translated:!1});n.Type==$o.forms.type.ACCESSFORM&&typeof n.Body=="string"&&(n.Body.Original=JSON.parse(n.Body.Original));$o.speak.messages.push(new $o.speak.form({body:n.Body.Original,room:n.Room?n.Room:$o.core.globalVariables.room,sessionSummaryId:$o.core.globalVariables.userType=="V"?$o.variablesVisitor.sessionSummaryId:$o.core.globalVariables.sessionSummaryId,tokens:n.Tokens,sentBy:n.SentBy,type:n.Type,id:n.Id,response:[],name:n.Name}));t||$o.forms.updateScroll(1e4)},createDocs:function(n,t){n.Body&&n.Body.hasOwnProperty("Original")||(n.Body={Original:n.Body,Translated:!1});$o.speak.messages.push(new $o.speak.docs({body:n.Body.Original,tokens:n.Tokens,sentBy:n.SentBy,type:n.Type,id:n.Id,response:[],name:n.Name}));t||$o.forms.updateScroll(1e4)},sendFormResponse:function(n,t){var r=$o.forms.getForm(n),i;r.length===1&&(i={Id:n,Response:t,Category:"RESPONSE",Room:r[0].room,SessionSummaryId:r[0].sessionSummaryId,SentBy:$o.core.globalVariables.userType},$o.forms.updateFormWithResponse(i),i.Response=JSON.stringify(i.Response),$o.core.isSignalRConnected()&&$o.hubsOut.sendFormResponse(i),$o.saveRecord.formResponse(i.Id,i.Response,i.Room,i.SessionSummaryId))},updateFormWithResponse:function(n){var t=$o.forms.getForm(n.Id),i;t.length===1&&(t[0].type==="DOCUMENT"&&$o.core.globalVariables.userType==="A"&&(i={name:n.Response[0],email:n.Response[1]},$o.agentInfoVisitorVM.info.updateVisitorProfile(i)),t[0].response(n.Response))},getForm:function(n){return ko.utils.arrayFilter($o.speak.messages(),function(t){return t.id===n})},getUrlFromUploadIframe:function(n){var i,t,r;if(typeof n.data=="string"){if(i=n.data.split(","),i[2]=="UPLOAD")if(t=i[0],r=$o.forms.imageValidator(t),r){var u=Math.floor(Math.random()*1e6+1),f="Oct8neUpload-"+u,e=$o.carousel.getProductFromUpload(f,t,$o.core.globalVariables.userType);$o.carousel.addMediaFromUploadUI();$o.carousel.sendProductToCarousel(e,$o.carousel.lists.VIEWED,$o.carousel.actions.VIEWINCANVA)}else $o.forms.sendDoc(t),$o.carousel.addDocFromUploadUI()}else return},sendDoc:function(n){var t=n.split(".").pop().toLowerCase(),i={Body:{Original:n,Translated:!1},Room:$o.core.globalVariables.room,SentBy:$o.core.globalVariables.userType,Type:t,Category:"DOCS",Id:$o.tools.generateRandomId()};$o.forms.createDocs(i);$o.core.isSignalRConnected()&&$o.hubsOut.sendMessage(i);$o.saveRecord.documentLink(t,n)},sessionToEmailForm:function(n,t){$o.forms.sessionToEmail.sendEmail=t;$o.forms.sessionToEmail.Email=n},imageValidator:function(n){var t=n.split(".").pop().toLowerCase();return $o.forms.extensionImageArray.indexOf(t)>-1},closeSession:function(){$.connection.hub.stop();$o.core.agentsConnected=!1;var n="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.visitorStart.changeStatus(n,"Finalized");$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:"Finalized"}])},sendCustomForm:function(n,t){var i=$("#custom-wrapper-"+n),o=[],e=$o.settings.privacyPolicy.length?!1:!0,r,u,s,f,h,c;if($o.settings.privacyPolicy.length&&(r=i.find("input[type='checkbox']"),r.is(":checked")?(e=!0,r.parent().removeClass("data-contact-error")):r.parent().addClass("data-contact-error")),i.find("input[type='email']").length&&(u=i.find("input[type='email']"),s=u.val(),u.removeClass("data-contact-error"),!/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(s))){u.addClass("data-contact-error");e=!1;return}if(e){for(f=0;f<t;f++)h=i.find("input[name='custom-fields-"+f+"']").val(),o.push(h);c=i.find("a").attr("data-form-id");$o.forms.sendFormResponse(c,o)}},sendSummaryCustomForm:function(n,t){var i=$("#custom-wrapper-"+n),o=[],f=$o.settings.privacyPolicy.length?!1:!0,e=i.find("input[type='email']"),s=e.val(),r,u,h,c;if($o.settings.privacyPolicy.length&&(r=i.find("input[type='checkbox']"),r.is(":checked")?(f=!0,r.parent().removeClass("data-contact-error")):r.parent().addClass("data-contact-error")),i.find("input[type='email']").length&&(e.removeClass("data-contact-error"),!/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(s))){e.addClass("data-contact-error");f=!1;return}if(f){for(u=0;u<t;u++)h=i.find("input[name='custom-fields-"+u+"']").val(),o.push(h);c=i.find("a").attr("data-form-id");$o.forms.sendFormResponse(c,o);$o.visitorSearch.getRecordsMailInfo(s)}},sessionToEmail:{sendEmail:!1,Email:""},type:{CALLBACK:"CALLBACK",SENDCONTACT:"SENDCONTACT",SKYPE:"SKYPE",DOCUMENT:"DOCUMENT",SENDSESSION:"SENDSESSION",VISITORUPLOAD:"VISITORUPLOAD",ACCESSFORM:"ACCESSFORM",ASKFORSS:"ASKFORSS",ORDER:"ORDER",VALORATION:"VALORATION",STARSVALORATION:"STARSVALORATION"},extensionImageArray:["gif","png","jpg","jpeg","bmp","otf"]}}(window);window.addEventListener?addEventListener("message",$o.forms.getUrlFromUploadIframe,!1):attachEvent("onmessage",$o.forms.getUrlFromUploadIframe);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.productsChat={init:function(){$("#oct8ne-chat-room").on("click",".holder",function(){var n=$(this).find("div").attr("data-internalid");typeof n!=typeof undefined&&n!==!1&&($o.core.globalVariables.userType=="V"&&$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.CHAT&&($o.core.globalVariables.showSearch!="True"||$o.core.globalVariables.edition==$o.core.editions.FREE?$o.iframes.changeStatusIframe($o.iframes.iframeStatus.VIEWER):$o.iframes.changeStatusIframe($o.iframes.iframeStatus.SEARCH),$("#pending-products").hide(),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.pendingProducts,value:""}])),n==$o.core.globalVariables.internalId||$o.search.sendingProductToCanva||($o.search.sendingProductToCanva=!0,$o.carousel.sentProductToCanva(n),viewedVM.setActiveTab()),$o.sideBubbles.hide())})},sentProductByAgent:function(n){n.InternalId.indexOf("Oct8neUpload")===-1&&($o.productsChat.createSentProductMessage(n),$o.productsChat.agentSentProducts.push(n.InternalId))},createSentProductMessage:function(n){n.Name=$o.core.userType=="V"?$o.core.globalVariables.otherName:$o.core.globalVariables.myName;n.Body=culture.coviewer.TakeALook+"<br/><b>"+n.Title+"<\/b>";$o.speak.messages.push(new $o.speak.product({body:n.Body,tokens:n.Tokens,sentBy:n.SentBy,name:n.Name,time:n.Time?n.Time:$o.speak.getMessageTime(),internalId:n.InternalId,thumbnail:n.URLMedia}));$o.scroll.moveChatToBottom()},agentSentProducts:[]}}(window);window.oct8ne=window.$o=window.oct8ne||{};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.speak={init:function(){$o.chat.init();$o.productsChat.init()},getMessageTime:function(){var t=new Date,i=t.getHours(),n=t.getMinutes();return n=n<10?"0"+n:n,i+":"+n},messages:ko.observableArray([]),translatorEnabled:ko.observable(!1),chat:function(n){this.category="CHAT";this.body=n.body;this.translation=ko.observable(n.translation);this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.id=n.id;this.viewing=n.translation;this.agentImg=n.agentImg;this.validationCode=n.validationCode},product:function(n){this.category="PRODUCT";this.body=n.body;this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.internalId=n.internalId;this.thumbnail=n.thumbnail},canned:function(n){this.category="CANNED";this.body=n.body;this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.type=n.type;this.id=n.id;this.response=ko.observable(n.response)},validation:function(n){this.category="VALIDATION";this.code=n.code;this.lastMessage=n.lastMessage},gdpr:function(n){this.category="GDPR";this.body=n.body;this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.type=n.type;this.id=n.id;this.response=ko.observable(n.response)},form:function(n){this.category="FORM";this.body=n.body;this.tokens=n.tokens;this.room=n.room;this.sessionSummaryId=n.sessionSummaryId;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.type=n.type;this.id=n.id;this.response=ko.observableArray(n.response)},docs:function(n){this.category="DOCS";this.body=n.body;this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.type=n.type;this.id=n.id;this.response=ko.observableArray(n.response)},supervisorChat:function(n){this.category="SUPERVISOR";this.body=n.body;this.tokens=n.tokens;this.sentBy=n.sentBy;this.name=n.name;this.time=n.time;this.role=n.role;this.room=n.room;this.id=n.id}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.translate={toggleTranslation:function(n,t,i,r){$o.translate.isEnabled=t=="true"||t===!0?!0:!1;$o.translate.setApiKey(n);$o.speak.translatorEnabled($o.translate.isEnabled);$o.translate.agentLanguage=i;$o.translate.visitorLanguage=r;$o.core.globalVariables.userType=="A"&&($o.translateAgent.visitorLanguageDetected=!0)},startTranslation:function(n,t,i){$o.translate.message=n;$o.translate.messageType=t;i=i||$o.translate.actions.TRANSLATE;$o.translate.isEnabled===!0||i==$o.translate.actions.DETECT||i==$o.translate.actions.GETLANGUAGELIST?$o.translate.providerAPIS[$o.translate.provider](i):$o.translate.translationCallback()},translationCallback:function(n){var t=n?n:"";$o.translate.message={original:$o.translate.message,translated:t};$o.translate.messageType==$o.translate.messageTypes.CHAT&&($o.core.globalVariables.userType=="A"&&$o.translateAgent.waitingForReview?$o.translateAgent.reviewTranslation($o.translate.message):$o.chat.send($o.translate.message));$o.translate.messageType==$o.translate.messageTypes.CANNED;$o.translate.messageType==$o.translate.messageTypes.FORM},providerAPIS:{GOOGLE:function(n){var i=$o.core.globalVariables.userType=="A"?$o.translate.visitorLanguage:$o.translate.agentLanguage,r=$o.core.globalVariables.userType=="A"?$o.translate.agentLanguage:$o.translate.visitorLanguage,u="",f="?key="+$o.translate.apiKey,t={q:$o.translate.message,source:r,target:i};n==$o.translate.actions.DETECT&&(u="/detect",t={q:$o.translate.message});n==$o.translate.actions.PREVIOUS&&(t={q:$o.translate.message,source:i,target:r});$.post("https://translation.googleapis.com/language/translate/v2"+u+f,t).done(function(t){var i="";n==$o.translate.actions.TRANSLATE&&(i=t.data.translations[0].translatedText.replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"),$o.translate.translationCallback(i));n==$o.translate.actions.DETECT&&$o.translateAgent.setVisitorLanguage(t.data.detections[0][0].language,!0);n==$o.translate.actions.PREVIOUS&&(i=t.data.translations[0].translatedText.replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"),$o.translateAgent.updatePreviousMessageWithTranslation(i))}).fail(function(){n==$o.translate.actions.TRANSLATE&&$o.translate.translationCallback($o.translate.message);n==$o.translate.actions.DETECT&&$o.translateAgent.setVisitorLanguage($o.translate.agentLanguage);n==$o.translate.actions.PREVIOUS&&$o.translateAgent.updatePreviousMessageWithTranslation($o.translate.message)})}},setApiKey:function(n){$o.translate.apiKey=n},isEnabled:!1,providers:{GOOGLE:{name:"GOOGLE",logos:{toolBox:"<span class='google-logo icon-agent-translator-logo'><span>Powered by<\/span><\/span>",chatInput:"<span class='icon-agent-translator-logo google-logo'><\/span>"}}},apiKey:"",provider:"GOOGLE",message:null,messageTypes:{CHAT:"CHAT",CANNED:"CANNED",FORM:"FORM"},actions:{DETECT:"DETECT",TRANSLATE:"TRANSLATE",PREVIOUS:"PREVIOUS"},agentLanguage:"",visitorLanguage:""}}(window);typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.curve=function(n,t,i,r){var u,ut,ft,et,ot,st,ht,p,w,b,k,s,h,f,c,e,d,g,o,nt,l,a,tt=n.length,v=!1,it,rt,ct=.25,y=7;for(t=typeof t=="number"?t:.5,typeof i=="number"?(i=parseInt(i,10),i===0&&(i=-4),v=i<0?!0:!1,ct=1/Math.abs(i),v===!0&&(y=typeof r=="number"?parseInt(r,10):7),y<1&&(y=1)):v=!0,u=n.concat(),u.unshift(n[1]),u.unshift(n[0]),u.push(n[tt-2],n[tt-1]),f=2;f<tt;f+=2)for(o=u[f],nt=u[f+1],l=u[f+2],a=u[f+3],et=(l-u[f-2])*t,ot=(u[f+4]-o)*t,st=(a-u[f-1])*t,ht=(u[f+5]-nt)*t,v===!0&&(it=l-o,rt=a-o,i=Math.max(y,Math.abs(Math.sqrt(it*it+rt*rt))*ct+.5)|0),h=0;h<=i;h++)s=h/i,e=Math.pow(s,2),c=e*s,g=e*3,d=c*2,p=d-g+1,w=g-d,b=c-2*e+s,k=c-e,ut=p*o+w*l+b*et+k*ot,ft=p*nt+w*a+b*st+k*ht,this.lineTo(ut,ft);return this}),function(n){var t;(function(n){var t=function(){function t(n,i,r,u,f,e){this.drawingContext=n;this.currentUserId=f;this.currentResourceId=e;this.isDrawing=!1;this.currentColor="black";this.currentSegmentPoints=[];this.backgroundSegments=[];this.remoteActionsQueue={};this.changed=!1;this.segmentCounter=1;this.drawingBoardErased=!1;this.isCanvasVisible=!0;this.minDistanceBetweenPoints=t.MEDIUM_DISTANCE_BETWEEN_POINTS;this.processingVolatileDrawings=!1;this.container=$(i);this.initialWidth=this.container.width();this.localCanvasElement=$(r);this.remoteCanvasElement=$(u);this.localCanvasContext=r.getContext("2d");this.remoteCanvasContext=u.getContext("2d")}return t.prototype.hideDrawings=function(){this.isCanvasVisible=!1;this.localCanvasElement.hide();this.remoteCanvasElement.hide()},t.prototype.showDrawings=function(){this.isCanvasVisible=!0},t.prototype.setColor=function(n){this.currentColor=n},t.prototype.getColor=function(){return this.currentColor},t.prototype.setCurrentResourceId=function(n){this.currentResourceId=n},t.prototype.setCanvasDimensions=function(n,i,r){(this.imageWidth=n,this.imageHeight=i,r&&(this.initialWidth=n),this.isCanvasVisible)&&(this.localCanvasElement.attr("lineWidth","2px"),this.remoteCanvasElement.attr("lineWidth","2px"),this.remoteCanvasElement.attr("width",n),this.remoteCanvasElement.attr("height",i),this.remoteCanvasContext.canvas.width=n,this.remoteCanvasContext.canvas.height=i,this.imageScale=n/this.initialWidth,this.remoteCanvasContext.scale(this.imageScale,this.imageScale),this.redrawBackground(!0),this.minDistanceBetweenPoints=t.MEDIUM_DISTANCE_BETWEEN_POINTS/this.imageScale,this.minDistanceBetweenPoints<t.MINIMUM_DISTANCE_BETWEEN_POINTS&&(this.minDistanceBetweenPoints=t.MINIMUM_DISTANCE_BETWEEN_POINTS),this.localCanvasElement.css({width:n,height:i}),this.localCanvasElement.attr("width",n),this.localCanvasElement.attr("height",i),this.localCanvasContext.canvas.width=n,this.localCanvasContext.canvas.height=i,this.localCanvasContext.scale(this.imageScale,this.imageScale),this.localCanvasElement.show(),this.remoteCanvasElement.show())},t.prototype.onBeginResize=function(){this.isDrawing&&(this.currentSegmentPoints=[],this.endDraw())},t.prototype.onEndResize=function(){var n=this;if(this.isDrawing){this.currentSegmentPoints=[];this.endDraw();return}this.resizeTimer&&clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(function(){var t=n.getContainerDimensions(),i;n.remoteCanvasElement.attr("width",t.width);n.remoteCanvasElement.attr("height",t.height);i=t.width/t.height;n.remoteCanvasContext.scale(i,i);n.redrawBackground(!0);n.localCanvasElement.attr("width",t.width);n.localCanvasElement.attr("height",t.height);n.localCanvasContext.scale(i,i)},500)},t.prototype.addRemoteSegment=function(n){n.points.length!==0&&(this.drawingBoardErased=!1,this.remoteActionsQueue[n.userId]?this.remoteActionsQueue[n.userId].push({action:"draw",segment:n}):(this.remoteActionsQueue[n.userId]=[{action:"draw",segment:n}],this.startDrawingAnimation(n.userId)))},t.prototype.addDeleteSegment=function(n,t){this.drawingBoardErased=!1;this.remoteActionsQueue[t]?this.remoteActionsQueue[t].push({action:"deletesegment",id:n,userId:t}):(this.remoteActionsQueue[t]=[{action:"deletesegment",id:n,userId:t}],this.startDrawingAnimation(t))},t.prototype.getCurrentDrawings=function(){for(var i=[],n,t=0;t<this.backgroundSegments.length;t++)n=this.backgroundSegments[t],i.push({id:n.id,userId:n.userId,color:n.color,points:n.points});return i},t.prototype.startVolatileDrawingsDeletion=function(){var n=this;this.processingVolatileDrawings||(this.processingVolatileDrawings=!0,setTimeout(function(){return n.deleteVolatileDrawings()},500))},t.prototype.deleteVolatileDrawings=function(){for(var i=!1,u=(new Date).getTime(),r=this.backgroundSegments.slice(0),n,t=0;t<r.length;t++)n=r[t],n.deletion&&u>n.deletion?this.addDeleteSegment(n.id,n.userId):n.deletion&&(i=!0);this.processingVolatileDrawings=!1;i&&this.startVolatileDrawingsDeletion()},t.prototype.startDrawingAnimation=function(n){function f(){function s(){r=i.remoteActionsQueue[n]&&i.remoteActionsQueue[n].length>0?i.remoteActionsQueue[n].shift():null}function c(t,r){var u=i.container.position(),f=i.drawingContext.getPencil(n),e=t*i.imageScale,o=r*i.imageScale;f.clearQueue().css({left:e+u.left+"px",top:o+u.top+"px"}).show()}var o,h;if(r&&(!r.segment||r.segment.resourceId===i.currentResourceId)){if(i.drawingBoardErased){i.drawingBoardErased=!1;i.drawingContext.getPencil(n).clearQueue().delay(1e3).hide("slow");delete i.remoteActionsQueue[n];return}r.action==="draw"?(o=r.segment,i.changed=!0,h=o.points.slice(0,u),c(o.points[u],o.points[u+1]),i.drawPoints(i.remoteCanvasContext,o.color,h),u+=2,u>o.points.length&&(u=0,i.backgroundSegments.push(o),i.drawSegment(i.remoteCanvasContext,o),o.deletion=o.isPermanent?null:(new Date).getTime()+t.MILLISECONDS_FOR_VOLATILE_DRAWINGS,s(),o.deletion&&i.startVolatileDrawingsDeletion())):r.action==="deletesegment"?(i.deleteBackgroundSegment(r.id,r.userId),s()):s();r?setTimeout(f,e):(i.drawingContext.getPencil(n).clearQueue().delay(1e3).fadeOut("slow"),delete i.remoteActionsQueue[n])}}var e=80,i=this,r=this.remoteActionsQueue[n].shift(),u=2;f()},t.prototype.deleteBackgroundSegment=function(n,t){for(var r,i=0;i<this.backgroundSegments.length;i++)if(r=this.backgroundSegments[i],r.id==n&&r.userId==t){this.backgroundSegments.splice(i,1);this.clearCanvas(this.remoteCanvasContext);this.clearCanvas(this.localCanvasContext);this.redrawBackground(!0);break}},t.prototype.beginDraw=function(n,t,i){this.isDrawing=!0;this.isCurrentDrawingPermanent=i;this.onPencilMoved(n,t)},t.prototype.onPencilMoved=function(n,i){var r=(new Date).getTime(),u=Math.abs(n-this.prevLeft),f=Math.abs(i-this.prevTop),e=Math.sqrt(u*u+f*f)<this.minDistanceBetweenPoints,o=r-this.lastPointTime<t.MAX_DELAY_BETWEEN_POINTS;e||o||(this.addAndDrawPoint(n,i),this.lastPointTime=r,this.prevLeft=n,this.prevTop=i)},t.prototype.endDraw=function(){this.isDrawing&&(this.isDrawing=!1,this.changed=!0,this.submitCurrentSegment())},t.prototype.clearAll=function(){this.clearCanvas(this.localCanvasContext);this.clearCanvas(this.remoteCanvasContext);this.currentSegmentPoints=[];this.backgroundSegments=[];this.remoteActionsQueue=[];this.drawingBoardErased=!0},t.prototype.submitCurrentSegment=function(i){var r,u,f;(i===void 0&&(i=!1),this.currentSegmentPoints.length!=0)&&(r=new n.Segment,r.resourceId=this.currentResourceId,r.color=this.currentColor,r.points=this.currentSegmentPoints,r.deletion=this.isCurrentDrawingPermanent?null:(new Date).getTime()+t.MILLISECONDS_FOR_VOLATILE_DRAWINGS,r.id=this.segmentCounter++,r.userId=this.currentUserId,this.backgroundSegments.push(r),this.changed=!0,u=this.currentSegmentPoints[this.currentSegmentPoints.length-2],f=this.currentSegmentPoints[this.currentSegmentPoints.length-1],this.drawingContext.sendDrawingSegment(r.points,r.color,this.isCurrentDrawingPermanent,r.id),this.currentSegmentPoints=i?[u,f]:[],this.drawSegment(this.remoteCanvasContext,r),this.clearCanvas(this.localCanvasContext),this.isCurrentDrawingPermanent||this.startVolatileDrawingsDeletion())},t.prototype.addAndDrawPoint=function(n,i){this.currentSegmentPoints.push(+n.toFixed(2));this.currentSegmentPoints.push(+i.toFixed(2));this.currentSegmentPoints.length>2*t.UPDATE_PEERS_EVERY_POINTS&&this.submitCurrentSegment(!0);this.clearCanvas(this.localCanvasContext);this.drawPoints(this.localCanvasContext,this.currentColor,this.currentSegmentPoints)},t.prototype.drawSegment=function(n,t){this.drawPoints(n,t.color,t.points)},t.prototype.drawPoints=function(n,i,r,u){var f,e;if(u===void 0&&(u=t.DEFAULT_PEN_SIZE),n.beginPath(),n.lineWidth=u,t.SHOW_KEY_POINTS)for(n.fillStyle="red",f=t.DEFAULT_PEN_SIZE+1,e=0;e<r.length;e+=2)n.fillRect(r[e]-f,r[e+1]-f,f*2,f*2);n.strokeStyle=i;n.curve(r);n.stroke()},t.prototype.getContainerDimensions=function(){return{width:this.container.width(),height:this.container.height()}},t.prototype.redrawBackground=function(n){var r,i;if(n===void 0&&(n=!1),this.changed||n){for(r=0;r<this.backgroundSegments.length;r++)i=this.backgroundSegments[r],this.remoteCanvasContext.beginPath(),this.remoteCanvasContext.lineWidth=t.DEFAULT_PEN_SIZE,this.remoteCanvasContext.strokeStyle=i.color,this.remoteCanvasContext.moveTo(i.points[0],i.points[1]),this.remoteCanvasContext.curve(i.points),this.remoteCanvasContext.stroke();this.changed=!1}},t.prototype.highlightSegment=function(n){this.clearCanvas(this.localCanvasContext);this.drawPoints(this.localCanvasContext,"red",n.points,8)},t.prototype.dehighlightSegment=function(){this.clearCanvas(this.localCanvasContext)},t.prototype.clearCanvas=function(n){n.save();n.setTransform(1,0,0,1,0,0);n.clearRect(0,0,this.imageWidth,this.imageHeight);n.restore()},t.prototype.log=function(n){console.log("[DrawingBoard] "+n)},t.MILLISECONDS_FOR_VOLATILE_DRAWINGS=1e4,t.DEFAULT_PEN_SIZE=3,t.MAX_DELAY_BETWEEN_POINTS=50,t.MEDIUM_DISTANCE_BETWEEN_POINTS=5,t.MINIMUM_DISTANCE_BETWEEN_POINTS=3,t.UPDATE_PEERS_EVERY_POINTS=25,t.SHOW_KEY_POINTS=!1,t}();n.DrawingBoard=t})(t=n.Drawings||(n.Drawings={}))}(Oct8ne||(Oct8ne={})),function(n){var t;(function(n){var t=function(){function t(t,i,r,u,f){this.currentUserId=u;this.currentResourceId=f;this.isDrawing=!1;this.isStarted=!1;this.pencils=[];this.color="black";this.container=$(t);this.initialWidth=this.container.width();this.drawingBoard=new n.DrawingBoard(this,t,i,r,u,f);this.localCanvas=$(i);this.remoteCanvas=$(r);this.localCanvas.css("touch-action","none");this.resource=this.container.find("img");this.stop()}return t.prototype.start=function(){var n=this;this.localCanvas.css("cursor","none");this.localCanvas.on("mousedown touchstart",function(t){return n.onMouseDown(t)});this.localCanvas.on("mousemove touchmove",function(t){return n.onMouseMove(t)});this.localCanvas.on("mouseleave mouseup touchend",function(t){return n.onMouseUp(t)});this.localCanvas.on("mouseleave",function(t){return n.onMouseLeave(t)});this.updateCanvasDimensions();this.isStarted=!0},t.prototype.stop=function(){this.localCanvas.css("cursor","move");this.localCanvas.off("mousedown mousemove mouseleave mouseup");this.updateCanvasDimensions();this.isStarted=!1;this.getPencil("me").hide()},t.prototype.onMouseDown=function(n){if($("#color-picker").removeClass(),!this.isStarted)return!1;this.unifyTouchEvents(n);var r=this.getRealCoords(n),t=r.left,i=r.top,u=this.zoomedImageCoordsToActualImageCoords(t,i);return t=u.left,i=u.top,this.drawingBoard.beginDraw(t,i,!1),this.isDrawing=!0,n.preventDefault(),!1},t.prototype.onMouseMove=function(n){var r;if(!this.isStarted)return!1;this.unifyTouchEvents(n);var u=this.getRealCoords(n),t=u.left,i=u.top,e=this.getPencil("me"),f=this.container.position();if(e.css({left:n.offsetX+f.left+"px",top:n.offsetY+f.top+"px"}).show(),!this.isDrawing)return!1;r=this.zoomedImageCoordsToActualImageCoords(t,i);t=r.left;i=r.top;this.drawingBoard.onPencilMoved(t,i);return n.preventDefault(),!1},t.prototype.onMouseLeave=function(){this.getPencil("me").hide()},t.prototype.onMouseUp=function(n){if(!this.isStarted||!this.isDrawing)return!1;this.unifyTouchEvents(n);var r=this.getRealCoords(n),t=r.left,i=r.top,u=this.zoomedImageCoordsToActualImageCoords(t,i);t=u.left;i=u.top;this.drawingBoard.onPencilMoved(t,i);return this.drawingBoard.endDraw(),this.getPencil("me").hide(),this.isDrawing=!1,n.preventDefault(),!1},t.prototype.zoomedImageCoordsToActualImageCoords=function(n,t){var i=n,r=t,u=this.initialWidth/this.container.width();return i=i*u,r=r*u,{left:i,top:r}},t.prototype.unifyTouchEvents=function(n){if((n.type==="touchmove"||n.type==="touchstart"||n.type==="touchend")&&n.originalEvent&&n.originalEvent.changedTouches){var t=n.originalEvent.changedTouches[0],i=$(t.target).offset();n.pageX=t.pageX;n.pageY=t.pageY;n.offsetX=t.pageX-i.left;n.offsetY=t.pageY-i.top}},t.prototype.getRealCoords=function(n){var o=n.target,t,i,r,u,f,e;return n.offsetX==undefined?(r=$(o).offset(),t=n.pageX-r.left,i=n.pageY-r.top):(t=n.offsetX,i=n.offsetY),u=this.roundToInteger(t),f=this.roundToInteger(i),o.tagName==="IMG"&&(e=$(n.target).position(),u+=e.left,f+=e.top),{left:u,top:f}},t.prototype.updateCanvasDimensions=function(n){var t=this.container.find("img"),i=t.width(),r=t.height();n&&(this.initialWidth=i);this.drawingBoard.setCanvasDimensions(i,r,n)},t.prototype.sendDrawingSegment=function(n,t,i,r){if(!this.onLocalSegmentAdded)throw"onLocalSegmentAdded callback must be defined";this.onLocalSegmentAdded(this.currentUserId,this.currentResourceId,n,t,i,r)},t.prototype.clearAll=function(){for(var n in this.pencils)this.pencils.hasOwnProperty(n)&&this.pencils[n].hide().clearQueue();this.drawingBoard.clearAll()},t.prototype.getPencil=function(n){var i=this.pencils[n],t;return i||(t=$("#pencil-"+n),t.length===0&&(t=$("<span class='oct8ne-pencil icon-common-pen' id='pencil-"+n+"' draggable='false' alt='' style='position: absolute;font-weight: bold;pointer-events: none;display: none;font-size: 30px;margin-left: -5px;margin-top: -26px; text-shadow: rgb(255, 255, 255) 1px 1px 2px;z-index: 120;  z-index: "+(n==="me"?"120":"110")+";'><\/span>")),t.hide(),this.container.parent().append(t),i=this.pencils[n]=t),i},t.prototype.setColor=function(n){this.drawingBoard.setColor(n)},t.prototype.setCurrentResourceId=function(n){this.currentResourceId=n;this.drawingBoard.setCurrentResourceId(n)},t.prototype.roundToInteger=function(n){return Math.round(n)},t.prototype.addRemoteDrawingSegment=function(t,i,r,u,f,e){if(i===this.currentResourceId){var o=new n.Segment;o.color=u;o.id=e;o.points=r;o.userId=t;o.isPermanent=f;o.resourceId=i;this.drawingBoard.addRemoteSegment(o)}},t}();n.DrawingUi=t})(t=n.Drawings||(n.Drawings={}))}(Oct8ne||(Oct8ne={})),function(n){var t;(function(n){var t=function(){function n(){}return n}();n.Segment=t})(t=n.Drawings||(n.Drawings={}))}(Oct8ne||(Oct8ne={}));window.oct8ne=window.$o=window.oct8ne||{};$(function(){oct8ne.delay={global:0,chatQueue:0,setGlobal:function(n){oct8ne.delay.global=oct8ne.delay.global+n},reset:function(){oct8ne.delay.global=0}};$.connection.hubInterface.client.close=function(){$.connection.hub.stop();$o.inactivity.stopProcess();parent.postMessage("CLOSEIFRAME","*")};$.connection.hubInterface.client.closeLastConnection=function(){var n=$o.saveRecord.openNewTab();n[0].Fields=JSON.stringify(n[0].Fields);$.ajax({type:"POST",url:"/Data/SaveInteractions",data:{sessionSummaryId:$o.variablesVisitor.sessionSummaryId,tokenSession:$o.core.globalVariables.room,tokenVisitor:$o.variablesVisitor.tokenVisitor,jsonListData:JSON.stringify(n)}}).always(function(){$.connection.hub.stop();parent.postMessage("CLOSEMODAL","*")})};$.connection.hubInterface.client.receiveEnableClientTranslation=function(n,t,i,r){$o.translate.toggleTranslation(n,t,i,r)};$.connection.hubInterface.client.changeStatus=function(n,t){var i="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;t!="true"&&$o.visitorStart.changeStatus(i,n.Visitor.Status);$o.core.globalVariables.otherToken=n.Visitor.Agent.Token;n.Visitor.Status=="Attending"?($o.visitorPixel.sales.setCookie(),$o.carousel.sendProductToAnalytics("V"),$o.core.hasBeenWaiting=!0,$o.core.globalVariables.visitorsOverflow=!1,$o.visitorStart.changeHeaderChatToChatting()):n.Visitor.Status=="Waiting"&&($o.core.hasBeenWaiting=!0,$o.visitorSearch.getAgentStatusAfterWaiting(n),$o.core.globalVariables.visitorsOverflow=!1);t&&$o.visitorTransfer.doTransferVisitor($o.core.globalVariables.agentId,null,$o.core.globalVariables.myToken,culture.coviewer.TransferMoreAvailable,$o.visitorTransfer.types.LIMITCHATEXCEEDED,n.Visitor.Agent.Name,"first available");$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:n.Visitor.Status}])};$.connection.hubInterface.client.changeStatusOverbookingToWaiting=function(n){var t="?tokenSession="+$o.core.globalVariables.room+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&statusVisitor="+n.Status+"&idDept="+$o.visitorStart.assignedDepartment.Id+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&typeTransfer="+$o.visitorTransfer.types.TAKEVISITOR;$o.core.globalVariables.room&&$.post("/Visitor/CreateSessionSameToken"+t);$o.visitorSearch.changeStatusOverbookingToWaiting(n);$o.core.hasBeenWaiting=!0;$o.core.agentsConnected=!0};$.connection.hubInterface.client.openCoviewerFromPin=function(n){parent.postMessage("SENDANALYTICSEVENT,GAEnteredoct8ne,PINCODE","*");$o.iframes.openCoviewerFromPin(n)};$.connection.hubInterface.client.receiveConferenceMessage=function(n,t){$o.visitorStart.platform.processConferenceMessage(n,t)};$.connection.hubInterface.client.receiveSignalingMessage=function(n){$o.visitorStart.platform.processSignalingMessage(n)};$.connection.hubInterface.client.receiveRefreshAgentInCall=function(){$o.visitorStart.platform.processConferenceMessage(99)};$.connection.hubInterface.client.receiveOnHoldCall=function(n,t){window.conferenceVM&&window.conferenceVM.initOnHoldState(t)};$.connection.hubInterface.client.receiveOnBackgroundApp=function(){window.conferenceVM&&window.conferenceVM.receiveOnBackgroundApp()};$.connection.hubInterface.client.receiveOnForegroundApp=function(){window.conferenceVM&&window.conferenceVM.receiveOnForegroundApp()};$.connection.hubInterface.client.receiveRejectedVideoCall=function(){window.conferenceVM&&window.conferenceVM.receiveRejectedVideoCall()};$.connection.hubInterface.client.receiveMessage=function(n,t){t&&$o.delay.setGlobal(t);var i=function(){--$o.delay.chatQueue;$o.chat.hideTyping();$o.chat.sendAlert(n.Body.Original);$o.recoverRecords.startingRecoverViewer?$o.chat.queueChats.push(n):window.oct8ne.chat.updateMessage(n);$o.delay.chatQueue>0?setTimeout(function(){$o.chat.showTypingDelayFromBot()},600):$o.delay.reset();$o.chat.sendIsAttendedToAnalytics(n.Category);$o.inactivity.attending.start()};n.Category=="CHAT"&&($o.delay.global!=0?(++$o.delay.chatQueue,$o.chat.showTypingDelayFromBot(),setTimeout(function(){i()},$o.delay.global)):i());n.Category=="CANNED"&&setTimeout(function(){window.oct8ne.canned.createCanned(n)},$o.delay.global);n.Category=="FORM"&&setTimeout(function(){$o.chat.sendAlert(culture.coviewer.ChatAlertForm);window.oct8ne.forms.createForm(n)},$o.delay.global);n.Category=="DOCS"&&setTimeout(function(){$o.chat.sendAlert(culture.coviewer.ChatAlertDocument);window.oct8ne.forms.createDocs(n)},$o.delay.global);setTimeout(function(){$o.chat.playVisitorSound()},$o.delay.global)};$.connection.hubInterface.client.receiveIsTyping=function(n){window.oct8ne.chat.typing(n)};$.connection.hubInterface.client.receiveImage=function(n){window.oct8ne.canva.update(n);$o.carousel.currentImage=n.Index;$o.carousel.updateCarouselArrows($o.carousel.currentImage);$o.inactivity.attending.restart()};$.connection.hubInterface.client.receivePoint=function(n){window.oct8ne.drag.addPoint(n,!1)};$.connection.hubInterface.client.receiveDrag=function(n){window.oct8ne.drag.changeDrag(n)};$.connection.hubInterface.client.receivePin=function(n){window.oct8ne.pin.addPin(n)};$.connection.hubInterface.client.receiveDrawing=function(n){window.oct8ne.pencil.receiveDrawing(n)};$.connection.hubInterface.client.changeNode=function(n){var t=window.viewedVM.getProduct(n.InternalId);n.SentBy=="A"&&(t||$o.carousel.sendProductToAnalytics("A"),!t&&n.FromAgentSearch&&($o.canva.imageFromAgent=!0),$o.productsChat.sentProductByAgent(n),$o.settings.hasOwnProperty("autoShowCoviewer")&&$o.settings.autoShowCoviewer==!0&&$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.CHAT?($(".show-coviewer").addClass("blinking"),$o.iframes.changeStatusIframe($o.iframes.iframeStatus.SEARCH)):$o.chat.addAlertProduct(n),$o.carousel.loadingProduct(),$o.platform&&($o.platform.productBuyURL==""||!$o.platform.productBuyURL)&&n.InternalId.indexOf("Oct8ne")==-1||$o.utils&&$o.utils.doAlwaysProductInfo&&n.InternalId.indexOf("Oct8ne")==-1?$o.platform.getFullProductInfo(n.InternalId,$o.carousel.lists.VIEWED,"recover"):(n.Thumbnail=n.URLMedia,n.InternalId.indexOf("Oct8ne")==-1&&($o.carousel.sendNewProductToTrackingBar(n),n.BuyURL=$o.platform.getBuyURL(n)),$o.carousel.sendProductToCarousel(n,n.ListType,$o.carousel.actions.VIEWINCANVA,"recover")),$o.inactivity.attending.restart())};$.connection.hubInterface.client.resetImage=function(){window.oct8ne.carousel.resetImage()};$.connection.hubInterface.client.changeZoom=function(n){window.oct8ne.zoom.changeZoom(n)};$.connection.hubInterface.client.receiveVideoAction=function(n,t){var i=function(){$o.core.youtubeViewModel.processAction(n,t)};$o.core.youtubeViewModel.loaded?i():$o.core.youtubeViewModel.setup(function(){i()})};$.connection.hubInterface.client.receiveNote=function(n){window.oct8ne.note.addNote(n)};$.connection.hubInterface.client.receiveAgentLogOut=function(n,t){$o.inactivity.setVisitorActive();$o.visitorStart.agentDisconnectedInterval=setInterval(function(){++$o.visitorStart.agentDisconnectedTimer;$o.visitorStart.agentDisconnectedTimer==15&&($o.visitorStart.agentDisconnectedTimer=0,clearInterval($o.visitorStart.agentDisconnectedInterval),$o.saveRecord.agentOut($o.core.globalVariables.otherName,t),$o.visitorTransfer.doTransferVisitor($o.core.globalVariables.agentId,null,$o.core.globalVariables.myToken,culture.coviewer.ChatTransferedCuz+" "+n.Agent.Name+" "+culture.coviewer.WasDisconnected,$o.visitorTransfer.types.AGENTDISCONNECT,$o.core.globalVariables.otherName,"first available"))},1e3);$o.core.globalVariables.conferenceProvider&&$o.visitorStart.platform!=""&&$o.visitorStart.platform.processConferenceMessage(99)};$.connection.hubInterface.client.changeTokenAgent=function(n){$o.visitorStart.agentDisconnectedTimer=0;clearInterval($o.visitorStart.agentDisconnectedInterval);$o.core.globalVariables.otherToken=n};$.connection.hubInterface.client.changeAgent=function(n){$o.delay.global!=0&&$o.delay.setGlobal(700);setTimeout(function(){var t,i;$o.chat.toogleDenyVisitorTyping(!1);n.Result==0?($o.utils&&$o.utils.customTransferCallback&&$o.utils.customTransferCallback(n),n.OldAgent.IsBot&&parent.postMessage("SENDANALYTICSEVENT,GATransferFromBot,"+n.Visitor.Agent.Name,"*"),$o.core.globalVariables.agentType=$o.visitorStart.agentTypes.HUMAN,n.TypeTransfer==$o.visitorTransfer.types.AGENTDISCONNECT||n.TypeTransfer==$o.visitorTransfer.types.INACTIVITYTOFIRST||n.TypeTransfer==$o.visitorTransfer.types.LIMITCHATEXCEEDED?n.TypeTransfer==$o.visitorTransfer.types.INACTIVITYTOFIRST&&$o.core.globalVariables.baseUrl.indexOf("tdtprofesional")>-1||(t=culture.coviewer.NowAttendedBy,t=t.replace("{{##old##}}",$o.core.globalVariables.otherName).replace("{{##new##}}",n.Visitor.Agent.Name),$o.canned.sendCanned($o.canned.type.TRANSFER,t)):n.TypeTransfer==$o.visitorTransfer.types.MANUALTOAGENT||n.TypeTransfer==$o.visitorTransfer.types.MANUALTOFIRST||n.TypeTransfer==$o.visitorTransfer.types.BOTTOFIRST?$o.canned.sendCanned($o.canned.type.TRANSFER,culture.coviewer.YouTranfered+" "+n.Visitor.Agent.Name):n.TypeTransfer==$o.visitorTransfer.types.TAKEVISITOR&&$o.variablesVisitor.status!="Searching"&&(t=culture.coviewer.NowAttendedBy,t=t.replace("{{##old##}}",$o.core.globalVariables.otherName).replace("{{##new##}}",n.Visitor.Agent.Name),$o.canned.sendCanned($o.canned.type.TRANSFER,t)),$o.visitorStart.changeAgentUI(n)):n.Result==2?$o.utils&&$o.utils.noAgentsInTransfer?$o.utils.noAgentsInTransfer(n):($o.inactivityAgent.clearTimerInterval(),$.connection.hub.stop(),$o.inactivity.setVisitorActive(),$o.core.agentsConnected=!1,$o.canned.sendCanned($o.canned.type.NOMOREAGENTS),$o.inactivity.disableChatInputUI(),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.sessionWithoutAgent,value:!0}])):n.Result==3&&($o.canned.sendCanned($o.canned.type.OVERBOOKING),$o.core.agentsConnected=!1,$o.inactivity.disableChatInputUI(),$o.inactivityAgent.clearTimerInterval());n.Visitor.Status!=$o.variablesVisitor.status&&($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:n.Visitor.Status}]),i="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId,$o.visitorStart.changeStatus(i,n.Visitor.Status));$o.inactivityAgent.lapseTime=0},$o.delay.global)};var n=function(n){setTimeout(function(){var t,i;$o.utils&&$o.utils.forceRatingAtEnd&&$o.variablesVisitor.status==="Attending"&&$o.settings.showRatingAgent=="True"&&(t={AgentImg:null,Body:{Original:null,Translated:null},Category:"FORM",DenyVisitorTyping:!1,Id:"EndVal",Room:$o.core.globalVariables.room,SentBy:"A",Type:"VALORATION"},$.connection.hubInterface.client.receiveMessage(t,0));n||$o.canned.sendCanned($o.canned.type.RECONNECTSESSION);$o.inactivity.stopProcess();$o.inactivity.disableChatInputUI();$.connection.hub.stop();$o.core.agentsConnected=!1;i="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.visitorStart.changeStatus(i,"Finalized");$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:"Finalized"}]);$o.core.globalVariables.sessionFinalized=!0;$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""},])},$o.delay.global)};$.connection.hubInterface.client.closeSessionByInactivity=function(){$o.saveRecord.inactivityServer();n()};$.connection.hubInterface.client.closeSession=function(t){n(t)};$.connection.hubInterface.client.reciveForm=function(n){if(n){$.connection.hub.stop();$o.core.agentsConnected=!1;var t="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.visitorStart.changeStatus(t,$o.variablesVisitor.status);$o.canned.sendCanned($o.canned.type.AGENTSBUSY);$o.inactivity.disableChatInputUI()}else $o.visitorSearch.reciveFormUI()};$.connection.hubInterface.client.receiveUndo=function(n){$o.tools.deletePin(n.Id)};$.connection.hubInterface.client.receiveSendToMyList=function(n){if($o.core.globalVariables.enterType!=$o.core.enterType.CHECKOUT){$.getJSON($o.platform.domain+"oct8ne/frame/addtowishlist?callback=?&productIds="+n,function(){$o.search.addNodeToMyList(n)});var t=$o.fullProducts.searchProduct($o.core.globalVariables.internalId);$o.hubsOut.alertAgentAddToMyList(t.Title,$o.core.globalVariables.otherToken,$o.core.globalVariables.myToken,$o.core.globalVariables.room,"Agent");$o.visitorSearch.reciveSendToMyListUI()}};$.connection.hubInterface.client.receiveSendToMyCart=function(n){if($o.core.globalVariables.enterType!=$o.core.enterType.CHECKOUT){$o.platform.startAddToCartProcess(n);var t=$o.fullProducts.searchProduct($o.core.globalVariables.internalId);parent.postMessage("SENDANALYTICSEVENT,GAClickAddToCart,Agent","*");$o.hubsOut.alertAgentAddToCart(t.Title,$o.core.globalVariables.otherToken,$o.core.globalVariables.myToken,"open")}};$.connection.hubInterface.client.receiveAjaxUpdates=function(){$o.platform.addPlatformLogin()};$.connection.hubInterface.client.receiveOrder=function(n){var t,i;if($o.platform&&$o.platform.hasOwnProperty("orders"))n.OrderId!==null?$o.platform.orders.getDetailsFromVisitor(n):$o.forms.sendOrderForm(n);else for(t=0;t<n.OrderStatusNoPlugin.length;t++)n.OrderStatusNoPlugin[t].action==="text"&&(i={Body:n.OrderStatusNoPlugin[t].body,Name:$o.core.globalVariables.otherName,Room:$o.core.globalVariables.room,Category:"CHAT",Id:$o.tools.generateRandomId(),SentBy:"A"},$o.saveRecord.chat(i.Body,i.Name,i.Id,i.SentBy,!1),$o.chat.updateMessage(i)),n.OrderStatusNoPlugin[t].action==="transfer"&&$o.visitorTransfer.doTransferVisitor($o.core.globalVariables.agentId,null,$o.core.globalVariables.myToken,"Transfer desde BOT",$o.visitorTransfer.types.BOTTOFIRST,"Bot","first available")};$.connection.hubInterface.client.receiveVisitorOrderRequest=function(n){$o.platform&&$o.platform.hasOwnProperty("orders")?$o.platform.orders.getDetailsForTreeBot(n):$o.hubsOut.sendVisitorOrderResult({details:{},error:!0})};$.connection.hubInterface.client.receiveAnalyticsEvent=function(n){parent.postMessage("SENDANALYTICSEVENT,"+n.Action+","+n.Label+","+n.Value+","+n.CustomActionType,"*")};$.connection.hubInterface.client.receiveRunAsyncScript=function(n){$o.delay.global!=0&&$o.delay.setGlobal(700);setTimeout(function(){if(n.RunInsideOct8ne){var script="try {"+decodeURIComponent(n.Script)+"} catch (error) {console.error('Bot script error: ' + error);}";eval(script)}else parent.postMessage("RUNSCRIPT,"+n.Script,"*")},$o.delay.global)}});$(function(){oct8ne.hubsOut={sendSummary:function(n){$.connection.hubInterface.server.sendSummary(n)},sendMessage:function(n){$o.delay.reset();n.SentBy=="V"&&n.Category=="CHAT"&&$o.inactivity.setVisitorActive();$o.chat.sendIsAttendedToAnalytics(n.Category);$.connection.hubInterface.server.sendMessage(n)},sendFormResponse:function(n){$.connection.hubInterface.server.sendFormResponse(n)},sendTransferVisitor:function(n,t,i,r,u){$.connection.hubInterface.server.transfer(n,t,i,r,u,0)},sendTransferVisitor2:function(n,t,i,r,u,f){var e;e=$o.enterData&&$o.enterData.allowedDepartmentsId&&$o.enterData.allowedDepartmentsId!="null"&&f!==!0?$o.enterData.allowedDepartmentsId:null;$.connection.hubInterface.server.transferVisitor(n,t,i,r,u,e)},sendResetImage:function(){var n={Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:"RESET"};$.connection.hubInterface.server.sendResetImage(n)},sendSearchTerm:function(n,t){$.connection.hubInterface.server.sendSearchTerm(n,t);$o.inactivity.setVisitorActive()},sendSearchTermCatalog:function(n){$.connection.hubInterface.server.sendSearchTermCatalog(n)},sendNode:function(n){$.connection.hubInterface.server.sendNode(n);$o.inactivity.setVisitorActive()},sendImage:function(n){$o.inactivity.setVisitorActive();$.connection.hubInterface.server.sendImage(n)},sendPoint:function(n){$.connection.hubInterface.server.sendPoint(n)},sendDrag:function(n){$.connection.hubInterface.server.sendDrag(n)},responseCallBack:function(n){$.connection.hubInterface.server.sendVoiceForm(n)},sendVideoAction:function(n,t,i){$.connection.hubInterface.server.videoAction(n,t,i)},sendDrawing:function(n){$.connection.hubInterface.server.sendDrawing(n)},sendViewChange:function(n){$.connection.hubInterface.server.sendViewChange(n)},addInteraction:function(){},sendDataVisitorToDashboard:function(n,t){$.connection.hubInterface.server.sendDataVisitor(n,t)},sendCartDataToDashboard:function(n,t){$.connection.hubInterface.server.sendCartData(n,t)},sendWriting:function(n){$.connection.hubInterface.server.isTyping(n)},alertAgentAddToCart:function(n,t,i,r){$.connection.hubInterface.server.alertAgentAddToCart(n,t,i,r)},alertAgentAddToMyList:function(n,t,i,r,u){$.connection.hubInterface.server.alertAgentAddToMyList(n,t,i,r,u)},sendInteractionsToAgent:function(n,t,i){$.connection.hubInterface.server.sendInteractionsToAgent(n,t,i)},sendVisitorCheckout:function(){$.connection.hubInterface.server.sendVisitorCheckout($o.core.globalVariables.room,$o.core.globalVariables.room)},sendVisitorOrderResult:function(n){n=Interactions.BaseManager.objectAdapter(n,Interactions.Targets.Backend);$.connection.hubInterface.server.sendVisitorOrderResult(n,Core.Helpers.getTokenRoom())}}});window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.inactivity={init:function(){$o.inactivity.recover();$o.inactivity.events()},timer:{general:null,ticks:0,frequency:1e3,add:function(){return $o.inactivity.timer.ticks+=$o.inactivity.timer.frequency/1e3},reset:function(){oct8ne.log("Reseteamos timer");$o.inactivity.timer.ticks=0}},setVisitorActive:function(){$o.inactivity.stopProcess()},justLooking:{start:function(){$o.inactivity.timer.general===null&&(oct8ne.log("Arranca inactividad JS visitante"),$o.inactivity.timer.general=setInterval(function(){$o.inactivity.justLooking.increase()},$o.inactivity.timer.frequency))},increase:function(){$o.inactivity.timer.add()>$o.inactivity.justLooking.limit&&$o.inactivity.justLooking.disconnect();oct8ne.log("Sumamos tiempo inactividad JS visitante: "+$o.inactivity.timer.ticks);$o.inactivity.storage.setData($o.inactivity.timer.ticks,null)},disconnect:function(){oct8ne.log("Desconectamos visitante por inactividad JL: "+$o.inactivity.timer.ticks);var n="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.visitorStart.changeStatus(n,"Searching");$o.inactivity.stopProcess();$o.inactivity.disconnectCommonActions()},limit:1200},attending:{level:null,start:function(){return oct8ne.log("Start Attending Inactivity"),$o.inactivity.timer.general===null?($o.inactivity.attending.level===null&&($o.inactivity.attending.level=0),oct8ne.log("Arrancamos Attending Inactivity"),$o.inactivity.timer.general=setInterval(function(){$o.inactivity.attending.increase()},$o.inactivity.timer.frequency),!0):(oct8ne.log("Ya estaba en marcha Attending Inactivity"),!1)},increase:function(){$o.inactivity.timer.add();$o.inactivity.storage.setData($o.inactivity.timer.ticks,$o.inactivity.attending.level);$o.inactivity.timer.ticks>=$o.settings.inactivityVisitorStages[$o.inactivity.attending.level]&&$o.inactivity.attending.updateLevel();oct8ne.log("Checkeamos inactividad visitante: "+$o.inactivity.timer.ticks)},updateLevel:function(){var n=++$o.inactivity.attending.level;oct8ne.log("Subimos nivel inactividad a: "+n);$o.inactivity.timer.reset();$o.canned.sendCanned($o.canned.type["INACTIVITYVISITOR"+n],$o.settings.inactivityVisitorMessages[n-1]);n==3&&$o.inactivity.attending.disconnect()},disconnect:function(){oct8ne.log("Desconectamos por inactividad visitante");$o.inactivity.stopProcess();$o.inactivity.disableChatInputUI();$o.visitorStart.changeStatus("","Searching");$o.canned.sendCanned($o.canned.type.RECONNECTSESSION);$o.inactivity.disconnectCommonActions()},restart:function(){oct8ne.log("Reseteamos inactividad visitante");$o.inactivity.stopProcess();$o.inactivity.attending.start()}},stopProcess:function(){oct8ne.log("STOP inactividad visitante");$o.inactivity.timer.general!==null?($o.inactivity.timer.reset(),clearInterval($o.inactivity.timer.general),$o.inactivity.timer.general=null,$o.inactivity.attending.level=null,$o.inactivity.storage.deleteData()):oct8ne.log("Ya está parada, no hacemos nada")},recover:function(){var n=$o.inactivity.storage.getData();oct8ne.log("Recuperamos inactividad visitante");oct8ne.log(n);n&&($o.inactivity.timer.ticks=n.timer,n.level!==null?($o.inactivity.attending.level=n.level,$o.inactivity.attending.start()):$o.inactivity.justLooking.start())},disconnectCommonActions:function(){$.connection.hub.stop();$o.core.agentsConnected=!1;$o.choices.disableAll()},storage:{getData:function(){return $o.storage.local.get($o.core.localStorageTypes.INACTIVITYVISITOR)?JSON.parse($o.storage.local.get($o.core.localStorageTypes.INACTIVITYVISITOR)):!1},setData:function(n,t){if(n){var i={timer:n,level:t};oct8ne.log("Guardamos inactividad visitante: "+n);$o.storage.local.set($o.core.localStorageTypes.INACTIVITYVISITOR,JSON.stringify(i))}else return!1},deleteData:function(){oct8ne.log("Borramos localStorage inactividad visitante");$o.storage.local.set($o.core.localStorageTypes.INACTIVITYVISITOR,$o.core.localStorageActions.REMOVE)}}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.inactivityAgent={startCounter:function(){var n=$o.storage.local.get($o.core.localStorageTypes.INACTIVITYAGENT);n!=null&&($o.inactivityAgent.lapseTime=parseInt(n));$o.inactivityAgent.timeInactivityLimit=$o.settings.inactivityAgentTime;$o.inactivityAgent.timerInterval=setInterval($o.inactivityAgent.updateVisitorTime,1e3)},updateVisitorTime:function(){if($o.inactivityAgent.lapseTime+=1,$o.inactivityAgent.lapseTime<=$o.inactivityAgent.timeInactivityLimit)$o.storage.local.set($o.core.localStorageTypes.INACTIVITYAGENT,parseInt($o.inactivityAgent.lapseTime));else{$o.inactivityAgent.clearTimerInterval();$o.variablesVisitor.status=="Waiting"&&$o.visitorTransfer.doTransferVisitor($o.core.globalVariables.agentId,null,$o.core.globalVariables.myToken,culture.coviewer.TransferMoreAvailable,$o.visitorTransfer.types.INACTIVITYTOFIRST,$o.core.globalVariables.otherName,"first available");return}},clearTimerInterval:function(){clearInterval($o.inactivityAgent.timerInterval);$o.storage.local.set($o.core.localStorageTypes.INACTIVITYAGENT,$o.core.localStorageActions.REMOVE)},restartTimerInterval:function(){$o.inactivityAgent.clearTimerInterval();$o.inactivityAgent.startCounter()},timerInterval:null,lapseTime:0,timeInactivityLimit:""}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.visitorTransfer={doTransfer:function(n,t,i,r,u,f,e){$o.core.isSignalRConnected()&&$o.hubsOut.sendTransferVisitor(n,t,i,r,u);var o=$("#transfer-layout").attr("data-token-session");$o.saveRecord.transfer(f,e,r,o,i,u)},doTransferVisitor:function(n,t,i,r,u,f,e,o){$o.core.isSignalRConnected()&&$o.hubsOut.sendTransferVisitor2(n,t,i,r,u,o);var s=$("#transfer-layout").attr("data-token-session");$o.saveRecord.transfer(f,e,r,s,i,u)},types:{MANUALTOAGENT:"MANUALTOAGENT",MANUALTOFIRST:"MANUALTOFIRST",INACTIVITYTOFIRST:"INACTIVITYTOFIRST",AGENTDISCONNECT:"AGENTDISCONNECT",VISITORSTART:"VISITORSTART",LIMITCHATEXCEEDED:"LIMITCHATEXCEEDED",TAKEVISITOR:"TAKEVISITOR",BOTTOFIRST:"BOTTOFIRST"}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.variablesVisitor={sendCookiesToApi:function(n,t){for(key in t)switch(t[key].cookie){case $o.cookies.status:$o.variablesVisitor.status=t[key].value;break;case $o.cookies.tokenVisitor:$o.variablesVisitor.tokenVisitor=t[key].value;break;case $o.cookies.tokenSession:$o.core.globalVariables.room=t[key].value;break;case $o.cookies.connection:$o.variablesVisitor.connection=t[key].value;break;case $o.cookies.coviewerStatus:$o.variablesVisitor.coviewerStatus=t[key].value;break;case $o.cookies.pendingProducts:$o.variablesVisitor.pendingProducts=t[key].value;break;case $o.cookies.statusBeforeMin:$o.variablesVisitor.statusBeforeMin=t[key].value;break;case $o.cookies.sessionWithoutAgent:$o.variablesVisitor.sessionWithoutAgent=t[key].value;break;case $o.cookies.sessionSummaryId:$o.variablesVisitor.sessionSummaryId=t[key].value;break;case $o.cookies.visitorOverFlow:$o.variablesVisitor.visitorsOverflow=t[key].value}parent.postMessage(n+","+JSON.stringify(t),"*")},nameFunction:{deleteCookies:"DELETECOOKIESOCT8NE",saveCookies:"SAVECOOKIESOCT8NE"},tokenVisitor:"",tokenSession:"",status:"",coviewerStatus:"",domain:"",connection:"",pendingMessages:"",pendingProducts:"",statusBeforeMin:"",currencyVisitor:"",sessionWithoutAgent:"",sessionSummaryId:"",lastInteractionAFK:!1,nowInteractionAFK:!1,referenceTimeAFK:0};oct8ne.cookies={status:"STATUS",pixelSale:"OCT8NEPIXELSALE",tokenVisitor:"TOKENVISITOR",tokenSession:"TOKENSESSION",coviewerStatus:"COVIEWERSTATUS",sessionId:"SESSIONID",connection:"CONNECTION",pendingProducts:"PENDINGPRODUCTS",statusBeforeMin:"STATUSBEFOREMIN",sessionWithoutAgent:"SESSIONWITHOUTAGENT",sessionSummaryId:"SESSIONSUMMARYID",lastInteractionAFK:"LASTINTERACTIONAFK",visitorOverFlow:"OCT8NEOVERFLOW",firstEnter:"FIRSTENTER"}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.visitorPixel={sales:{setCookie:function(){var n,t;return $o.settings.allowPixelSale&&$o.core.globalVariables.domainId!=null&&$o.core.globalVariables.room!=null?(n=new Date,n.setMonth(n.getMonth()+1),t="oct8ne-pixel-sale-"+$o.core.globalVariables.domainId+"="+$o.core.globalVariables.room+"; expires="+n.toGMTString(),document.cookie=t,$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.pixelSale,value:$o.core.globalVariables.room}]),t):!1}}}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.visitorRatings={init:function(){$o.visitorRatings.events()},getQuestionsList:function(){$.post("/Ratings/GetQuestionsList",{domainId:$o.variablesVisitor.domain},function(n){$o.visitorRatings.printRatings(n)})},saveRatingAnswers:function(){},saveRateAgent:function(n,t,i,r,u,f,e){if(e==$o.visitorRatings.TypeRatingGoodBad){var o=r?"GAGoodRating":"GABadRating";parent.postMessage("SENDANALYTICSEVENT,"+o+","+f,"*")}$.post("/Ratings/SaveResponseAgentRating",{domainId:n,tokenSession:t,agentId:i,response:r,comment:u,typeRating:e});$o.saveRecord.rate(r,$o.core.globalVariables.otherName)},agentRated:!1,TypeRatingGoodBad:1,TypeRatingStars:3}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.recoverRecords={getRecords:function(n,t,i){var r=new Date,u=r.getTimezoneOffset();$o.recoverRecords.startingRecoverViewer=!0;i&&$("#oct8ne-chat-room").append('<div class="loading-message-interactions" id="loading-message-interactions"><\/div>');$.post("Data/GetInteractionsBySessionFromVisitor",{sessionSummaryId:parseInt($o.core.globalVariables.sessionSummaryId),tokenSession:t,tokenVisitor:n,recoverType:1,utcOffSet:u},function(t){t.DataInteractions&&$o.recoverRecords.recoverViewerFromVisitor(n,t.DataInteractions,i);$o.settings.allowTrackingProductsLite&&$o.catalog.getProductsByUrls([$o.core.globalVariables.actualUrl])}).fail(function(){$o.recoverRecords.startingRecoverViewer=!1})},recoverViewerFromVisitor:function(n,t,i){var a,r,v,e,u,y,h,c,l,p,w,b,k,d,g,nt,tt,it;$o.visitorSearch.showSearchTutorial();$o.visitorSearch.showCoviewerTutorial();var o=[],f="",s="";if(i&&$o.speak.messages([]),t){a=0;for(key in t)a++,r=t[key],r.Tokens={Sender:r.sentBy!="V"?n:$o.core.globalVariables.myToken,Receiver:r.sentBy!="V"?n:$o.core.globalVariables.myToken},r.Fields=JSON.parse(r.Fields),r.Type=="Chat"?(v={Body:r.Fields.Content,Tokens:r.Tokens,SentBy:r.SentBy,Name:r.Fields.Name,Time:r.CreatedAt,DenyVisitorTyping:r.Fields.DenyVisitorTyping},$o.chat.chatsInConversation<=4&&(++$o.chat.chatsInConversation,$o.chat.chatsInConversation>=4&&($o.chat.sentAttendedToAnalytics=!0)),$o.chat.updateMessage(v,"recoverfromV"),$o.variablesVisitor.status=="Attending"&&$o.visitorStart.changeHeaderChatToChatting()):r.Type=="Translation"?$o.translate.toggleTranslation(r.Fields.License,r.Fields.Status,r.Fields.AgentLanguage,r.Fields.VisitorLanguage):(i||r.Type!="ViewedItem")&&r.Type!="MyCartItem"&&r.Type!="MyListItem"&&r.Type!="UploadItem"&&r.Type!="CatalogItem"&&r.Type!="TrackItem"&&r.Type!="DeleteCartItem"?r.Type!="Query"||i?r.Type=="Canned"?(l=!1,p={Body:r.Fields.Content,Tokens:r.Tokens,SentBy:r.SentBy,Type:r.Fields.SubType,Name:r.Fields.Name,Id:r.Fields.Id,Time:r.CreatedAt,Response:r.Fields.Response},(r.Fields.SubType==$o.canned.type.NOMOREAGENTS||r.Fields.SubType==$o.canned.type.AGENTSBUSY||r.Fields.SubType==$o.canned.type.OVERBOOKING)&&(l=!0),$o.canned.createCanned(p,l),r.Fields.SubType==$o.canned.type.TRANSFER&&$o.chat.toogleDenyVisitorTyping(!1)):r.Type=="Gdpr"?(w={Body:r.Fields.Content,Tokens:r.Tokens,SentBy:r.SentBy,Type:r.Fields.SubType,Name:r.Fields.Name,Id:r.Fields.Id,Time:r.CreatedAt,Response:r.Fields.Response},$o.canned.createGdpr(w,!0)):r.Type=="CannedResponse"?(b={Id:r.Fields.Id,Response:r.Fields.Response},$o.canned.updateCannedWithResponse(b)):r.Type=="Form"?(k={Body:r.Fields.Content,Tokens:r.Tokens,SentBy:r.SentBy,Name:r.Fields.Name,Time:r.CreatedAt,Id:r.Fields.Id,Type:r.Fields.SubType,Response:r.Fields.Response},$o.forms.createForm(k,!0)):r.Type=="FormResponse"?(d={Id:r.Fields.Id,Response:JSON.parse(r.Fields.Response)},$o.forms.updateFormWithResponse(d)):r.Type=="DocumentLink"?(g={Body:r.Fields.Url,Room:$o.core.globalVariables.room,SentBy:r.SentBy,Type:r.Fields.Extension,Category:"DOCS",Id:$o.tools.generateRandomId()},$o.forms.createDocs(g,!0)):r.Type!="Image"||i?r.Type!="Pin"||i?r.Type!="Undo"||i?r.Type!="Zoom"||i?r.Type=="SideBubble"?$o.sideBubbles.recover(r):r.Type=="Choice"?$o.choices.recover(r):r.Type=="ChoiceResponse"&&$o.choiceResponses.recover(r):(it={InternalId:r.ProductId,Level:r.Fields.Level,Scope:r.Fields.Scope,Order:parseInt(key)},$o.recoverRecords.lastZoomChange=it):$o.tools.deletePin(r.Fields.Id):(tt={Coords:{PosX:r.Fields.CoordX,PosY:r.Fields.CoordY},InternalId:r.ProductId,Scope:r.Fields.Scope,Type:"P",Id:r.Fields.Id},$o.pin.pinsHistory.push(tt)):(nt={InternalId:r.ProductId,URLMedia:r.Fields.Thumbnail,Scope:r.Fields.Scope,Order:parseInt(key)},$o.recoverRecords.lastImageChange=nt):(h=r.Fields.Type,c=r.Fields.Term,h=="Catalog"&&(s=c),h=="Query"&&(f=$o.recoverRecords.searchInteractionToObject(c))):r.Type=="DeleteCartItem"?$o.recoverRecords.removedFromCartInteractions.push(r):(e="",r.Type=="MyCartItem"&&(e=$o.carousel.lists.MYCART),r.Type=="MyListItem"&&(e=$o.carousel.lists.MYLIST),(r.Type=="UploadItem"||r.Type=="CatalogItem"||r.Type=="TrackItem"||r.Type=="ViewedItem")&&(e=$o.carousel.lists.VIEWED),u={InternalId:r.ProductId,ListType:e,Tokens:r.Tokens,SentBy:r.SentBy,Thumbnail:r.Fields.Thumbnail,URLMedia:r.Fields.Thumbnail,Time:r.CreatedAt,Title:r.Fields.Title,Order:parseInt(key),Type:r.Type},$o.recoverRecords.changeNodeInteractions.push(u),r.Type!="MyCartItem"?($.inArray(u.InternalId,o)==-1&&r.Type!="TrackItem"&&o.push(u.InternalId),r.SentBy=="A"&&r.Fields.FromAgentSearch&&$o.productsChat.sentProductByAgent(u),$o.carousel.addProductInfoToList(u,u.ListType),r.Type=="UploadItem"&&(y=$o.carousel.getProductFromUpload(u.InternalId,u.Thumbnail,u.SentBy),$o.fullProducts.addProductToCollection(y))):$o.recoverRecords.addToCartInteractions.push(u),$o.carousel.sentProductsToAnalytics=!0);i?($("#loading-message-interactions").remove(),$("#oct8ne-chat-room").animate({scrollTop:1e4},1e3)):(f!=""?($o.search.sortedBy=f.orderby,$o.search.direction=f.dir,$o.search.doSearch(f.term,undefined,"RECOVER"),$("#search-term").val(f.term)):s!=""&&f==""&&($o.platform.searchProductsByCategory(s,"RECOVER"),$("#search-term").val("")),$o.recoverRecords.cartManagement(),$o.enterData.productsViewed.length&&$o.recoverRecords.newProductsFromTrackingBar(o),$o.recoverRecords.showCurrentProduct(),$o.enterData.idProduct="");$o.recoverRecords.startingRecoverViewer=!1;$.each($o.chat.queueChats,function(n){window.oct8ne.chat.updateMessage($o.chat.queueChats[n],"recoverfromV")})}!i&&$o.platform&&$o.platform.addPlatformLogin()},showCurrentProduct:function(){var n=$o.recoverRecords.changeNodeInteractions[$o.recoverRecords.changeNodeInteractions.length-1],t;$o.enterData.idProduct&&$o.enterData.idProduct!=""&&$o.enterData.idProduct!="undefined"&&(n!=undefined&&$o.enterData.idProduct!=n.InternalId&&$o.core.globalVariables.pageType=="Product"||n==undefined||$o.core.globalVariables.enterType==$o.core.enterType.RECOVERSESSION)?$o.platform.getFullProductInfo($o.enterData.idProduct,$o.carousel.lists.VIEWED):n&&(t=0,$o.recoverRecords.lastImageChange!=""&&$o.recoverRecords.lastImageChange.InternalId==n.InternalId&&$o.recoverRecords.lastImageChange.Order>n.Order&&(t=$o.recoverRecords.lastImageChange.Scope-1),$o.core.isSignalRConnected()&&$o.recoverRecords.lastZoomChange!=""&&$o.recoverRecords.lastZoomChange.InternalId==n.InternalId&&$o.recoverRecords.lastZoomChange.Order>n.Order&&(t!=0&&$o.recoverRecords.lastZoomChange.Order>$o.recoverRecords.lastImageChange.Order||t==0)&&$o.core.isSignalRConnected()&&$o.hubsOut.sendResetImage(),n.Type=="CatalogItem"||n.Type=="UploadItem"?$o.carousel.sentProductToCanva(n.InternalId,"RECOVER"):$o.platform.getFullProductInfo(n.InternalId,n.List,"RECOVER",t))},newProductsFromTrackingBar:function(n){var t=$o.enterData.productsViewed.split(",");$.each(t,function(i){var r=!1;$.each(n,function(u){t[i]==n[u]&&(r=!0)});r||$o.recoverRecords.newProductsFromPage.push(t[i])});$o.enterData.productsViewed=""},cartManagement:function(){var n=[];$.each($o.recoverRecords.removedFromCartInteractions,function(t){$.each($o.recoverRecords.addToCartInteractions,function(i){$o.recoverRecords.removedFromCartInteractions[t].ProductId==$o.recoverRecords.addToCartInteractions[i].InternalId&&n.push(i)})});$.each(n,function(t){$o.recoverRecords.addToCartInteractions.splice(n[t],1)})},searchInteractionToObject:function(n){var r=n.split("&"),i={},u,t;for(u in r)t=r[u].split("="),t[1]?i[t[0].toLowerCase()]=decodeURIComponent(t[1]||""):i.term=decodeURIComponent(t[0]||"");return i},interactionsList:{agent:"",visitors:{},fromTransfer:[]},changeNodeInteractions:[],lastImageChange:"",lastZoomChange:"",addToCartInteractions:[],newProductsFromPage:[],removedFromCartInteractions:[],startingRecoverViewer:!1}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.visitorSearch={init:function(){$o.visitorSearch.events();$("#send-access-form-info").on("click",function(){var i=!0,t=!1,n="data-contact-error",r,u,f,e,o;$o.visitorStart.showDepartmentsSelect&&($o.visitorStart.selectedDepartment=$("#select-department").val(),$o.visitorStart.selectedDepartment=="null"?($("#select-department").addClass(n),i=!1):($("#select-department").removeClass(n),i=!0));$o.settings.showAccessForm?(r=/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/,$o.visitorSearch.accesFormNameInput=$("#access-form-name"),$o.visitorSearch.accesFormEmailInput=$("#access-form-email"),$o.visitorSearch.accesFormMessageInput=$("#access-form-message"),$o.visitorSearch.accesFormNameInput.val().length<=0?$o.visitorSearch.accesFormNameInput.addClass(n):$o.visitorSearch.accesFormNameInput.removeClass(n),$o.visitorSearch.accesFormEmailInput.val().length<=0?$o.visitorSearch.accesFormEmailInput.addClass(n):r.test($o.visitorSearch.accesFormEmailInput.val().trim())?$o.visitorSearch.accesFormEmailInput.removeClass(n):$o.visitorSearch.accesFormEmailInput.addClass(n),$("#access-form-phone").is(":visible")&&($o.visitorSearch.accesFormPhoneInput=$("#access-form-phone"),u=/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/,$o.visitorSearch.accesFormPhoneInput.val().length<=0?$o.visitorSearch.accesFormPhoneInput.addClass(n):u.test($o.visitorSearch.accesFormPhoneInput.val().trim())?$o.visitorSearch.accesFormPhoneInput.removeClass(n):$o.visitorSearch.accesFormPhoneInput.addClass(n)),$o.visitorSearch.accesFormMessageInput.val().length<=0?$o.visitorSearch.accesFormMessageInput.addClass(n):$o.visitorSearch.accesFormMessageInput.removeClass(n),$o.visitorSearch.accesFormNameInput.val().length>0&&$o.visitorSearch.accesFormEmailInput.val().length>0&&$o.visitorSearch.accesFormMessageInput.val().length>0&&($o.visitorSearch.accesFormPhoneInput?$o.visitorSearch.accesFormPhoneInput.val().length>0:!0)&&r.test($o.visitorSearch.accesFormEmailInput.val().trim())&&(t=!0,$("#access-form-phone").is(":visible")&&(u.test($o.visitorSearch.accesFormPhoneInput.val().trim())||(t=!1))),f=$("#checkbox-conditions-access"),f.length&&(f.is(":checked")?$("#info-wrapper .checkbox-conditions-wrapper").removeClass("not-accepted"):(t=!1,$("#info-wrapper .checkbox-conditions-wrapper").addClass("not-accepted")))):t=!0;t&&i&&($o.visitorStart.showDepartmentsSelect&&parent.postMessage("SENDANALYTICSEVENT,GASelectedDepartment,"+$("#select-department option:selected").text(),"*"),$o.settings.showAccessForm&&($o.chat.pendingAccessFormMessage={name:$o.visitorSearch.accesFormNameInput.val(),email:$o.visitorSearch.accesFormEmailInput.val(),message:$o.visitorSearch.accesFormMessageInput.val()},$("#access-form-phone").is(":visible")&&($o.chat.pendingAccessFormMessage.phone=$o.visitorSearch.accesFormPhoneInput.val())),$o.visitorSearch.accesFormActive=!0,e=!1,$o.utils&&$o.utils.rewriteVisitorStartResult&&(e=$o.utils.rewriteVisitorStartResult()),o=$o.visitorStart.assignedDepartment.Id||$o.visitorStart.selectedDepartment||0,$.post("Visitor/AgentsConnected",{domainId:$o.variablesVisitor.domain,deptId:o,isReconnect:!1},function(n){$o.core.agentsConnected=n=="True";$o.visitorStart.connectVisitor().then(function(n){$o.visitorStart.visitorStart($o.core.globalVariables.enterType);$o.core.agentsConnected||n!=!1||($o.visitorStart.agentsDisconnectedChangesUI(),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.sessionWithoutAgent,value:!0}]))})}),$o.settings.showAccessForm&&($("#email-us-email").val($o.visitorSearch.accesFormEmailInput.val()),$("#email-us-name").val($o.visitorSearch.accesFormNameInput.val()),$("#email-us-comments").text($o.visitorSearch.accesFormMessageInput.val())),$("#access-form-wrapper").hide(),$o.core.globalVariables.enterType!==$o.core.enterType.PINCODE&&e!==!0&&$o.visitorStart.showChatWrapperUI())})},sendJustLookingChatMessage:function(n,t){$o.utils&&$o.utils.changeWelcomeMessage&&(n=$o.utils.changeWelcomeMessage(n));$o.visitorSearch.sendJustLookingChatMessageUI(n,t)},sendGdprMessage:function(n){$o.visitorSearch.sendGdprMessageUI(n)},sendVipChatMessage:function(n){$o.visitorSearch.sendVipChatMessageUI(n)},changeToWaitingStatus:function(n,t){var i,r;$o.inactivity.setVisitorActive();i="statusVisitor="+$o.variablesVisitor.status+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&tokenSession="+$o.core.globalVariables.room+"&domainId="+$o.variablesVisitor.domain+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$.connection.hub.state==$.signalR.connectionState.disconnected?$.post("Visitor/AgentsConnected?"+i,{domainId:$o.variablesVisitor.domain,deptId:$o.visitorStart.assignedDepartment.Id,isReconnect:!0},function(n){$o.visitorSearch.enableSelectResult=!1;n=="True"?($o.core.agentsConnected=!0,$o.visitorStart.restartConnection(null,!0),t&&t($o.core.globalVariables.room)):($o.core.agentsConnected=!1,$o.canned.sendCanned($o.canned.type.NOMOREAGENTS),$o.inactivity.disableChatInputUI(),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.sessionWithoutAgent,value:!0}]))}):(r=$o.visitorStart.assignedDepartment.Id||0,$.post("Visitor/AgentsConnectedWithReasonTransfer?"+i,{domainId:$o.variablesVisitor.domain,deptId:r,isReconnect:!0},function(i){var u,f;i.agentsConnected==!0?($.connection.hubInterface.server.sendStatus({tokenVisitor:$o.core.globalVariables.myToken,tokenSession:$o.core.globalVariables.room,status:"Waiting"}).done(function(){$o.core.hasBeenWaiting=!0;n&&$o.chat.sendMessagesBeforeConnected(n);t&&t($o.core.globalVariables.room)}),i.reason==="LIMITCHATEXCEEDED"&&(u="?tokenSession="+$o.core.globalVariables.room+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&statusVisitor="+$o.variablesVisitor.status+"&idDept="+r+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&typeTransfer="+i.reason,$.post("/Visitor/CreateSessionSameToken"+u))):($o.canned.sendCanned($o.canned.type.NOMOREAGENTS),$o.inactivity.disconnectCommonActions(),$o.inactivity.stopProcess(),$o.inactivity.disableChatInputUI(),$o.visitorStart.changeStatus("?"+u,"Searching"),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.sessionWithoutAgent,value:!0}]),f="?tokenSession="+$o.core.globalVariables.room+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&statusVisitor="+$o.variablesVisitor.status+"&idDept="+$o.visitorStart.assignedDepartment.Id+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&typeTransfer="+i.reason,$.post("/Visitor/CreateSessionSameToken"+f))}));$o.visitorSearch.changeToWaitingStatusUI()},getAgentStatusAfterWaiting:function(n){n.Visitor.Agent.AgentId==0?($o.canned.sendCanned($o.canned.type.OVERBOOKING),$o.inactivity.disableChatInputUI()):($o.core.globalVariables.otherToken=n.Visitor.Agent.Token,$o.core.globalVariables.otherName=n.Visitor.Agent.Name,$o.visitorSearch.assignedAgentName=n.Visitor.Agent.Name,$o.visitorSearch.otherAgentAfterWaitingUI(n.Visitor.Agent))},changeStatusOverbookingToWaiting:function(n){$o.canned.sendCanned($o.canned.type.AGENTAVAILABLE,n.Agent.Name);var t=$o.core.globalVariables.otherToken==n.Agent.Token;$o.core.globalVariables.otherToken=n.Agent.Token;$o.core.globalVariables.otherName=n.Agent.Name;$o.visitorSearch.assignedAgentName=n.Agent.Name;$o.visitorSearch.changeStatusOverbookingToWaitingUI(n);$("#chat-input").attr("readonly",!1).focus();$("#chat-input").removeClass("chat-input-disabled");$(".emoji-wysiwyg-editor").is(":visible")&&($(".chat-input-emoji").removeClass("chat-input-disabled"),$(".emoji-wysiwyg-editor").attr("contenteditable",!0).focus())},getRecordsMailInfo:function(n){for(var w=n,nt=$o.core.globalVariables.otherName,b=$o.core.globalVariables.room,tt=$o.core.globalVariables.emailTimeLineLinkUrl||$o.core.globalVariables.sendEmailBaseUrl||$o.core.globalVariables.baseUrl,c=$o.core.globalVariables.protocolHttp+tt,it=$(".mailHeaderBkg").css("backgroundColor"),rt=$(".mailTextColor").css("color"),k=$(".mailImageLogoSrc").attr("data-attr"),o=viewedVM.nodes(),s=mycartVM.nodes(),h=mylistVM.nodes(),i={CV:0,ML:0,CA:0},r="",l="",a="",v=function(n){return"<tr ><td colspan='4'><h3 style='margin:5px 0 0 0'>"+n+"<\/h3><\/td><\/tr><tr>"},y=function(n,t,i){var r;return r=i.indexOf("http://")>-1||i.indexOf("https://")>-1?"":$o.core.globalVariables.protocolHttp,"<td align='center' class='mini-img'><a href='"+c+"?recoverSession="+b+"&productId="+n+"' style='outline: 0; text-decoration: none'><img  width='150' style='border: 1px dotted #999999; width: 150px;' alt='"+t+"' src='"+r+i+"'><\/a><\/td>"},p=function(){return"<\/tr><tr><td colspan='4' align='right' height='10' style='padding:5px'><a href='"+c+"' >"+culture.coviewer.ViewMore+"<\/a><\/td>"},u,f,e,d,g,t=0;t<o.length;t++)i.CV<8?(i.CV==0&&(u=v(culture.coviewer.ItemsYouViewed),r+=u),i.CV==4&&(r+="<\/tr><tr>"),f=y(o[t].internalId(),o[t].title(),o[t].thumbnail()),r+=f):i.CV==8&&(e=p(),r+=e),++i.CV;for(t=0;t<h.length;t++)i.ML<8?(i.ML==0&&(u=v(culture.coviewer.ItemsMyList),r+=u),i.ML==4&&(r+="<\/tr><tr>"),f=y(h[t].internalId(),h[t].title(),h[t].thumbnail()),r+=f):i.ML==8&&(e=p(),r+=e),++i.ML;for(t=0;t<s.length;t++)i.CA<8?(i.CA==0&&(u=v(culture.coviewer.ItemsCart),r+=u),i.CA==4&&(r+="<\/tr><tr>"),f=y(s[t].internalId(),s[t].title(),s[t].thumbnail()),r+=f):i.CA==8&&(e=p(),r+=e),++i.CA;r.length&&(r+="<\/tr>");l.length&&(l+="<\/tr>");a.length&&(a+="<\/tr>");d=a+l+r;g="?domainId="+$o.variablesVisitor.domain+"&locale="+$o.core.globalVariables.locale+"&tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.utils&&$o.utils.actualPageLogo&&(k=$o.utils.actualPageLogo);$.post("Records/SendSummaryMail"+g,{email:w,agentName:nt,visitorName:"You",language:$o.core.globalVariables.locale,baseUrl:c,sessionId:b,headerBkg:it,textColor:rt,logoUrl:k,products:d,token:$o.core.globalVariables.myToken,sessionSummaryId:$o.core.globalVariables.sessionSummaryId},function(){var n={Body:w,Room:$o.core.globalVariables.room,SentBy:"V",Type:"SU",Name:"Visitor"};$o.core.isSignalRConnected()&&$o.hubsOut.sendSummary(n)})},actionWhenClosingIframe:function(){$o.saveRecord.closeViewerB();$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CLOSE);$o.inactivityAgent.clearTimerInterval();$o.storage.local.set($o.core.localStorageTypes.SEARCHCACHE,$o.core.localStorageActions.REMOVE);$o.core.globalVariables.conferenceProvider&&$o.visitorStart.platform!=""&&conferenceVM.removeCallInformation()},getViewedProductsForEmail:function(n){var i=viewedVM.nodes(),t=$o.visitorSearch.getProductUrls(i);$o.visitorSearch.pendingUrlCatalogs.length>0?$o.visitorSearch.getCatalogUrls(t,n):$o.visitorSearch.pendingUrlProducts.length>0?$o.platform.getFullProductInfoManyProducts(t,n,$o.visitorSearch.pendingUrlProducts):$o.visitorSearch.sendFormEmail(t,n)},getCatalogUrls:function(n,t){$.ajax({type:"POST",url:$o.settings.catalogServer+"Resources/GetCatalogItems",contentType:"application/json; charset=utf-8",data:JSON.stringify({InternalIds:JSON.stringify($o.visitorSearch.pendingUrlCatalogs),License:$o.settings.license}),dataType:"json",success:function(i){$.each(n,function(t){$.each(i,function(r){i[r].InternalId==n[t].Id&&i[r].ProductUrl&&(n[t].ProductUrl=i[r].ProductUrl)})});$o.visitorSearch.pendingUrlProducts.length?$o.platform.getFullProductInfoManyProducts(n,t,$o.visitorSearch.pendingUrlProducts):$o.visitorSearch.sendFormEmail(n,t)}})},sendFormEmail:function(n,t,i){for(var e=$o.core.globalVariables.protocolHttp,o,u,f,h,s,c,l,a,v,r=0;r<n.length;r++)n[r].ProductUrl.lastIndexOf("//")>-1&&(o=n[r].ProductUrl.lastIndexOf("//"),n[r].ProductUrl=n[r].ProductUrl.substring(o,n[r].ProductUrl.length),n[r].ProductUrl=e+n[r].ProductUrl),n[r].Thumbnail.lastIndexOf("//")>-1&&(o=n[r].Thumbnail.lastIndexOf("//"),n[r].Thumbnail=n[r].Thumbnail.substring(o,n[r].Thumbnail.length),n[r].Thumbnail=e+n[r].Thumbnail);if(i)for(r=0;r<i.length;r++)for(u=0;u<n.length;u++)i[r].hasOwnProperty("internalId")?i[r].internalId==n[u].Id&&(n[u].ProductUrl=i[r].productUrl.indexOf("http://")>-1||i[r].productUrl.indexOf("https://")>-1?i[r].productUrl:e+i[r].productUrl):i[r].hasOwnProperty("InternalId")&&i[r].InternalId==n[u].Id&&(n[u].ProductUrl=i[r].ProductUrl.indexOf("http://")>-1||i[r].ProductUrl.indexOf("https://")>-1?i[r].RouteTo:e+i[r].RouteTo);if(f="<tr>",n.length){for(r=0;r<n.length;r++)h=r%5,h==0&&(f+="<\/tr><tr>"),f+=n[r].ProductUrl?"<td class='mini-img'><a href='"+n[r].ProductUrl+"'><img  width='140' style='width:140px;'  alt='"+n[r].Title+"' src='"+n[r].Thumbnail+"'/><\/a><\/td>":"<td class='mini-img'><img  width='140' style='width:140px;' alt='"+n[r].Title+"' src='"+n[r].Thumbnail+"'/><\/td>";f+="<\/tr>"}else f="<td class='header-md'>"+culture.coviewer.NoViewedProducts+"<\/td>";s=$o.core.globalVariables.sendEmailBaseUrl||$o.core.globalVariables.baseUrl;$o.utils&&$o.utils.emailsContactUs&&(c=$o.utils.emailsContactUs);$o.utils&&$o.utils.actualUrlForContactUs&&(s=$o.utils.actualUrlForContactUs());$o.utils&&$o.utils.actualPageLogo&&(l=$o.utils.actualPageLogo);a="?tokenSession="+$o.core.globalVariables.roomForLastOperations+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&domainId="+$o.variablesVisitor.domain+"&assignedAgent="+$o.core.globalVariables.inviteLinkAssignedAgent+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$.post("Visitor/SendEmailUs"+a,{firstName:t.name,email:t.email,product:t.product,knowUs:t.knowUs,phone:t.phone,zip:t.zip,language:$o.core.globalVariables.locale,comments:t.comments,baseUrl:s,products:f,emails:c,pageLogo:l},function(n){n=="True"?$o.utils&&$o.utils.sendContactFormCallback?$o.utils.sendContactFormCallback():($(".contact-form-fields").find("input, textarea").attr("readonly","readonly"),$("#email-us-form-loading, .checkbox-conditions-wrapper").hide(),$("#email-success").show().find("p").html(culture.coviewer.EmailAgreement)):($("#email-us-form-message").show().html(culture.coviewer.EmailError).css("color","rgb(214, 2, 2)"),$("#send-email-us").show(),$("#email-us-form-loading").hide())});$o.core.isSignalRConnected()&&($.connection.hub.stop(),v="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId,$o.visitorStart.changeStatus(v,"Searching"),$o.core.agentsConnected=!1)},getProductUrls:function(n){var t=$o.core.globalVariables.protocolHttp,i=[];return $.each(n,function(r){var f="",u,e;n[r].internalId().indexOf("Oct8neCatalog")>-1?$o.visitorSearch.pendingUrlCatalogs.push(n[r].internalId()):(u=$o.fullProducts.searchProduct(n[r].internalId()),u?f=t+u.RouteTo:$o.visitorSearch.pendingUrlProducts.push(n[r].internalId()));e=n[r].thumbnail().indexOf("upload.oct8ne.com")>-1||n[r].internalId().indexOf("Catalog")>-1?n[r].thumbnail():t+n[r].thumbnail();i.push({Id:n[r].internalId(),Title:n[r].title(),Thumbnail:e,ProductUrl:f})}),i},accesFormActive:!1,accesFormNameInput:"",accesFormEmailInput:"",accesFormMessageInput:"",assignedAgentName:"",enableSelectResult:!0,disableChangeToWaiting:!1,openProduct:!1,showedJustLookingMessage:!1,showedGdprMessage:!1,pendingUrlProducts:[],pendingUrlCatalogs:[]}}(window);window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.visitorStart={doStart:function(n){$o.chat.toogleDenyVisitorTyping(!0);$o.variablesVisitor.lastInteractionAFK=new Date;parent.postMessage("GETPARAMETERS","*");$o.visitorStart.events();$o.visitorStart.enterTypeForStart=n;$o.core.globalVariables.conferenceProvider&&$o.visitorStart.platform!=""&&$.connection.hub.disconnected(function(){$o.visitorStart.platform.onSelfDisconnected.trigger()})},getVisitorStartData:function(n){var t=JSON.parse(n),i;$o.core.globalVariables.pageUrl=t.pageUrl;$o.core.globalVariables.pageTitle=t.pageTitle;$o.core.globalVariables.pageType=t.pageType;$o.core.globalVariables.customOptions=t.hasOwnProperty("options")?JSON.parse(t.options):"";$o.core.globalVariables.navigationUrls=t.hasOwnProperty("navigation")?t.navigation:"";$o.core.globalVariables.actualUrl=t.hasOwnProperty("actualUrl")?t.actualUrl:"";$o.core.globalVariables.triggerMessage=t.hasOwnProperty("triggerMessage")?t.triggerMessage:null;$o.core.globalVariables.forceAssignToAgents=t.hasOwnProperty("forceAssignToAgents")?t.forceAssignToAgents:!1;$o.core.globalVariables.treePreviewId=t.hasOwnProperty("treePreviewId")?t.treePreviewId:!1;$o.core.globalVariables.treePreviewNodeId=t.hasOwnProperty("treePreviewNodeId")?t.treePreviewNodeId:!1;$o.core.globalVariables.firstAccessPage=$o.core.globalVariables.navigationUrls.length?$o.core.globalVariables.navigationUrls[0]:"";$o.core.globalVariables.isCustomApp=t.customApp;$o.storage.local.values=t.localStorageValues;oct8ne.log("RECUPERAMOS localStorage");$o.core.globalVariables.forceAssignToAgents=t.hasOwnProperty("forceAssignToAgents")?t.forceAssignToAgents:!1;i=$o.enterData.idProduct;i=i===""?0:parseInt($o.enterData.idProduct);$o.core.globalVariables.botProductId=i;$o.fullProducts.recoverProductsFromLocalStorage();$o.inactivity.init();$o.visitorStart.setSound();$o.visitorStart.startVisitorConnection($o.visitorStart.enterTypeForStart)},startVisitorConnection:function(n){$o.core.globalVariables.customOptions&&$o.core.globalVariables.customOptions.hasOwnProperty("user")&&$o.core.globalVariables.customOptions.user.name&&$o.core.globalVariables.customOptions.user.email&&($("#access-form-name,#email-us-name").val($o.core.globalVariables.customOptions.user.name),$("#email-us-email,#access-form-email").val($o.core.globalVariables.customOptions.user.email));n==$o.core.enterType.TREEPREVIEW&&TreePreview.preparePreview();$o.visitorSearch.enableSelectResult=!1;$o.core.globalVariables.agentsConnected=="True"?($o.visitorStart.showAccessForm=$o.visitorStart.checkAccessFormData(n),n==$o.core.enterType.PINCODE&&parent.postMessage("SHOWPINCODELOADING","*"),n==$o.core.enterType.LOGINPAGE&&($o.platform.goneToLogin=!0),$o.core.agentsConnected=!0,$o.visitorStart.connectVisitor().then(function(t){$o.visitorStart.showContent(n,t);t&&$o.delayAction.tryRecover()})):n!=$o.core.enterType.PINCODE?($o.core.agentsConnected=!1,$o.visitorStart.agentsDisconnectedChangesUI(),$o.iframes.init(),$o.visitorStart.visitorStart(n)):$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CLOSE)},connectVisitor:function(){return new Promise(function(n){$o.core.agentsConnected!=!0||$o.core.globalVariables.visitorsOverflow||$o.visitorStart.showAccessForm!=!1&&$o.visitorSearch.accesFormActive!=!0?n(!1):($.connection.hub.reconnected(function(){setTimeout(function(){$o.visitorStart.reconnectVisitorSignalR()},5e3)}),$.connection.hub.start().done(function(){n(!0)}))})},showContent:function(n,t){$o.core.globalVariables.room&&$o.core.isSignalRConnected()&&$.connection.hubInterface.server.closeLastConnection($o.core.globalVariables.room);$("#email-us-form").hide();t&&$o.variablesVisitor.status==""&&$o.inactivity.justLooking.start();$o.visitorStart.showDepartmentsSelect||$o.visitorStart.showAccessForm?($o.visitorStart.showAccessFormWrapperUI($o.visitorStart.showDepartmentsSelect,$o.settings.showAccessForm),$("#iframe-status").val()!=="MINIMIZED"&&($("#iframe-status").val($o.iframes.iframeStatus.CHAT),$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT)),$o.iframes.init()):($o.visitorStart.visitorStart(n),n!=$o.core.enterType.PINCODE&&$o.visitorStart.showChatWrapperUI(),$o.iframes.init())},checkAccessFormData:function(n){return $o.visitorStart.showDepartmentsSelect=$o.visitorStart.checkDepartments(n),$o.visitorStart.checkFormAndDepts(n)&&($o.settings.showAccessForm||$o.visitorStart.showDepartmentsSelect)?!0:!1},checkDepartments:function(n){if($o.visitorStart.checkFormAndDepts(n)&&$o.core.globalVariables.enabledDepartments=="True")if($o.settings.listDepts.length==1)$o.visitorStart.selectedDepartment=$o.settings.listDepts[0].id;else if($o.settings.listDepts.length>1){var t=[];if($.each($o.settings.listDepts,function(n){$o.settings.listDepts[n].agentsConnected=="True"&&t.push($o.settings.listDepts[n].id)}),t.length==1)$o.visitorStart.selectedDepartment=t[0];else if(t.length>1)return!0}return!1},checkFormAndDepts:function(n){return $o.core.globalVariables.room!=""||n==$o.core.enterType.AUTOOPEN&&(n!=$o.core.enterType.AUTOOPEN||$o.core.globalVariables.inviteLinkAssignedAgent)||n==$o.core.enterType.CHECKOUT||n==$o.core.enterType.PINCODE||n==$o.core.enterType.REOPEN||n==$o.core.enterType.LOGINPAGE||n==$o.core.enterType.PRODUCTPAGE||n==$o.core.enterType.REOPENFROMLOGIN||n==$o.core.enterType.RECOVERSESSION?!1:!0},resetVariables:function(){$o.translate.isEnabled=!1},visitorStart:function(n){var t;$o.visitorStart.resetVariables();$o.utils&&$o.utils.commonCustomInterface&&$o.utils.commonCustomInterface();t=new Date;$o.core.globalVariables.room!=""&&n!=$o.core.enterType.CHECKOUT&&n!=$o.core.enterType.LOGINPAGE&&n!=$o.core.enterType.PRODUCTPAGE&&n!=$o.core.enterType.REOPENFROMLOGIN&&n!=$o.core.enterType.RECOVERSESSION&&n!=$o.core.enterType.TREEPREVIEW&&($o.core.globalVariables.enterType=$o.core.enterType.REOPEN,n=$o.core.enterType.REOPEN);$o.core.globalVariables.inviteLinkAssignedAgent&&n==$o.core.enterType.AUTOOPEN&&($o.variablesVisitor.status="Waiting");var i="statusVisitor="+$o.variablesVisitor.status+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&tokenSession="+$o.core.globalVariables.room+"&domainId="+$o.variablesVisitor.domain+"&locale="+$o.core.globalVariables.locale+"&baseUrl="+$o.core.globalVariables.baseUrl+"&currencyVisitor="+$o.core.globalVariables.currencyVisitor+"&apiVersion="+$o.core.globalVariables.apiVersion+"&assignedAgent="+$o.core.globalVariables.inviteLinkAssignedAgent+"&exclusiveAgent="+$o.core.globalVariables.inviteLinkExclusiveAgent+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&platform="+$o.core.globalVariables.platform+"&forceAssignToAgents="+$o.core.globalVariables.forceAssignToAgents,r=$o.core.globalVariables.conferenceProvider?$o.core.globalVariables.visitorHasAudioDevices:!1,u=$o.core.globalVariables.conferenceProvider?$o.core.globalVariables.visitorHasVideoDevices:!1;$.post("Visitor/Start?"+i,{connectionId:$.connection.hub.id,deptSelected:parseInt($o.visitorStart.selectedDepartment),time:t.getTimezoneOffset(),entertype:n,iframeStatus:$o.iframes.currentIframeStatus,pageTitle:$o.core.globalVariables.pageTitle,pageUrl:$o.core.globalVariables.pageUrl,pageType:$o.core.globalVariables.pageType,visitorHasAudioDevices:r,visitorHasVideoDevices:u,customOptions:JSON.stringify($o.core.globalVariables.customOptions),visitorProtocolPage:window.location.protocol,visitorsOverflow:$o.core.globalVariables.visitorsOverflow,allowedDepartmentsId:$o.enterData.allowedDepartmentsId,startDefaultCategories:$o.utils&&$o.utils.startDefaultCatalog?$o.utils.startDefaultCatalog:null,totalCartValue:null},function(t){var a,v,u,f,e,i,y,o,s,h,r,c,l,p;if($o.chat.toogleDenyVisitorTyping(!1),t.VisitorNotInDicc&&($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""},]),$("#lay-AFK .afk-content-advice").text(culture.coviewer.AdviceNotInDic),$("#lay-AFK").show(),$("#chat-input").blur(),$.connection.hub.state!=$.signalR.connectionState.disconnected&&$.connection.hub.stop()),t.License=="9D78F0EE93468E25586B540ADE7B0461"&&t.Agent&&t.Agent.AgentId==0){$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""},{cookie:$o.cookies.status,value:""}]);$("#lay-AFK .afk-content-advice").text(culture.coviewer.AdviceNotInDic);$("#lay-AFK").show();$("#chat-input").blur();$.connection.hub.state!=$.signalR.connectionState.disconnected&&$.connection.hub.stop();return}a=new Date;$o.variablesVisitor.lastInteractionAFK=a;$o.core.globalVariables.myToken=t.Token;t.Status=="Attending"&&t.Status!=$o.variablesVisitor.status&&(v="?tokenSession="+t.Room+"&sessionSummaryId="+t.SessionSummaryId,$o.visitorStart.changeStatus(v,t.Status),$o.visitorPixel.sales.setCookie(),$o.carousel.sendProductToAnalytics("V"),$o.core.hasBeenWaiting=!0,$o.visitorStart.changeHeaderChatToChatting());$o.variablesVisitor.lastInteractionAFK=null;$o.utils&&$o.utils.actionsAfterVisitorStart&&$o.utils.actionsAfterVisitorStart();u=new Date;t.EnterType===$o.core.enterType.TRIGGER&&$o.core.globalVariables.device!="mobile"&&$o.variablesVisitor.soundNotificationEnabled==="True"&&$o.core.globalVariables.room===""&&(f=$("#visitor-sound")[0].play(),f&&f.catch());t.Status=="Searching"||$o.core.globalVariables.inviteLinkAssignedAgent&&n==$o.core.enterType.AUTOOPEN||($o.core.hasBeenWaiting=!0);n==$o.core.enterType.REOPEN&&t.EnterType==$o.core.enterType.PINCODE&&t.Status!="Attending"?$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CLOSE):($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:t.Status},{cookie:$o.cookies.tokenVisitor,value:t.Token},{cookie:$o.cookies.sessionId,value:t.SessionId},{cookie:$o.cookies.tokenSession,value:t.Room},{cookie:$o.cookies.connection,value:$.connection.hub.id},{cookie:$o.cookies.sessionSummaryId,value:t.SessionSummaryId},{cookie:$o.cookies.lastInteractionAFK,value:u},{cookie:$o.cookies.visitorOverFlow,value:$o.core.globalVariables.visitorsOverflow},{cookie:$o.cookies.firstEnter,value:"true"}]),$o.variablesVisitor.lastInteractionAFK=u,$o.core.globalVariables.myToken=t.Token,$o.core.globalVariables.room=t.Room,$o.core.globalVariables.roomForLastOperations=t.Room,$o.core.globalVariables.sessionSummaryId=t.SessionSummaryId,n!=$o.core.enterType.REOPEN&&n!=$o.core.enterType.CHECKOUT&&($o.saveRecord.statusVisitor(t.Status),$o.core.globalVariables.customOptions&&$o.saveRecord.contextInfo($o.core.globalVariables.customOptions)),n==$o.core.enterType.treePreview&&($o.visitorStart.agentsConnectedChangesUI(t),$o.core.globalVariables.botTreeEnabled=!0),n==$o.core.enterType.PINCODE&&$o.iframes.showToken(t.Room),e=n==$o.core.enterType.SCHEDULE?$o.core.globalVariables.recoverSession:"",$o.visitorStart.assignedDepartment=t.DeptSelected,t.Agent&&(t.Agent.AgentId!=0||t.Agent.Name=="Overbooking")?($o.core.globalVariables.agentId=t.Agent.AgentId,$o.core.globalVariables.agentName=t.Agent.Name,$o.visitorSearch.assignedAgentName=t.Agent.Name,$o.core.globalVariables.agentType=t.Agent.Role===99?$o.visitorStart.agentTypes.BOT:$o.visitorStart.agentTypes.HUMAN,$o.visitorStart.agentsConnectedChangesUI(t),$.connection.hub.id&&$.connection.hubInterface.server.sendDashboard(t.Token,e,$o.iframes.currentIframeStatus),$o.visitorSearch.enableSelectResult=!0,$o.visitorStart.enableSelectResult=!0,$o.core.globalVariables.pageUrl.indexOf("?")!=-1?(i=$o.core.globalVariables.pageUrl.split("?"),i=i[0]):i=$o.core.globalVariables.pageUrl,$o.core.globalVariables.conferenceProvider&&i.indexOf("https")!=-1&&(y={visitor:{hasAudioDevices:t.Agent.Role===99?!1:$o.core.globalVariables.visitorHasAudioDevices,hasVideoDevices:t.Agent.Role===99?!1:$o.core.globalVariables.visitorHasVideoDevices,isWebRtcSupported:t.Agent.Role===99?!1:$o.core.globalVariables.visitorIsWebRtcSupported},agent:{hasAudioDevices:t.Agent.AgentHasAudioDevices&&(t.Agent.AllowAudioConference||t.Agent.AllowMobileAudioConference)?!0:!1,hasVideoDevices:t.Agent.AgentHasVideoDevices&&(t.Agent.AllowVideoConference||t.Agent.AllowMobileVideoConference)?!0:!1,isWebRtcSupported:t.Agent.AgentIsWebRtcSupported}},t.VisitorCanStartConference||window.conferenceVM.hideStartCallButtons(!0),window.conferenceVM.updateSessionInfo(y),window.conferenceVM.resumeCallIfNeeded()),n==$o.core.enterType.REOPEN||n==$o.core.enterType.CHECKOUT?(o=$o.storage.local.get($o.core.localStorageTypes.INACTIVITYAGENT),o!=null&&($o.inactivityAgent.lapseTime=parseInt(o),$o.inactivityAgent.startCounter())):$o.inactivityAgent.clearTimerInterval(),n==$o.core.enterType.AUTOOPEN&&$o.core.globalVariables.inviteLinkAssignedAgent&&$o.inactivityAgent.startCounter(),$o.visitorStart.displaySoundVisitorUI(),t.Agent.BotType!=0&&(s=BotFactory.create(t.Agent.BotType),s!=null&&($o.bot=s,$o.bot.init($o.core.globalVariables.visitorsOverflow,t.License)))):n==$o.core.enterType.PINCODE?($o.visitorStart.agentsConnectedChangesUI(t),$.connection.hubInterface.server.sendDashboard(t.Token,e,$o.iframes.currentIframeStatus),$o.visitorSearch.enableSelectResult=!0):(n!=$o.core.enterType.REOPEN&&parent.postMessage("SENDANALYTICSEVENT,GAContactFormViewed","*"),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.sessionWithoutAgent,value:!0}]),$o.core.agentsConnected=!1),($o.settings.showAccessForm&&n!=$o.core.enterType.REOPEN&&$o.visitorSearch.accesFormActive==!0||$o.core.globalVariables.customOptions.hasOwnProperty("user")&&$o.core.globalVariables.customOptions.user.email!=null)&&($o.core.globalVariables.customOptions.hasOwnProperty("user")?(h=$o.core.globalVariables.customOptions.user.email,r=$o.core.globalVariables.customOptions.user.hasOwnProperty("name")?$o.core.globalVariables.customOptions.user.name:$o.core.globalVariables.myName,c="Context Info"):(h=$o.visitorSearch.accesFormEmailInput.val(),r=$o.visitorSearch.accesFormNameInput.val(),c="Access chat form"),$o.core.globalVariables.myName=r,l={Email:h,FirstName:r,Origin:c,EnterPage:$o.core.globalVariables.sendEmailBaseUrl||$o.core.globalVariables.baseUrl},p="?domainId="+t.Domain+"&tokenVisitor="+t.Token+"&sessionSummaryId="+t.sessionSummaryId+"&tokenSession="+t.Room,$.post("/Visitor/DataVisitor"+p,l),$o.core.isSignalRConnected()&&$o.hubsOut.sendDataVisitorToDashboard($o.core.globalVariables.myToken,l)),$o.visitorStart.recoverSession(n,t.Agent?t.Agent.CannedMessage:" ",t.Agent,t.Agent?t.GdprMessage:" "))})},enterActions:function(){if($o.enterData.searchTerm&&$o.enterData.searchTerm.length>0){var n=$o.core.globalVariables.enterType==$o.core.enterType.REOPEN?"recover":null;$o.search.doSearch($o.enterData.searchTerm.replace("&","%26"),"",n)}else $o.enterData.productsViewed&&$o.enterData.productsViewed.length>0&&$o.enterData.productsViewed!="false"?($o.platform.getProductSummary($o.enterData.productsViewed,$o.enterData.idProduct),$o.carousel.loadingProduct()):$o.enterData.idProduct&&$o.enterData.idProduct.length>0&&$o.enterData.idProduct!="false"&&(!$o.enterData.productsViewed||$o.enterData.productsViewed.length==0||$o.enterData.productsViewed=="false")&&$o.core.globalVariables.edition==1?$o.platform.getFullProductInfo($o.enterData.idProduct,$o.carousel.lists.VIEWED):$o.core.globalVariables.enterType!=$o.core.enterType.treePreview&&($o.visitorSearch.showSearchTutorial(),$o.visitorSearch.showCoviewerTutorial());!$o.enterData.searchTerm&&$o.enterData.idProduct&&window.location.pathname.indexOf("V3")===-1&&$o.platform.searchProductsByCategory($o.enterData.idProduct)},recoverSession:function(n,t,i,r){var e,o,s,u,h,f;r&&n!=$o.core.enterType.REOPEN&&n!=$o.core.enterType.RECOVERSESSION&&n!=$o.core.enterType.CHECKOUT&&n!=$o.core.enterType.LOGINPAGE&&n!=$o.core.enterType.REOPENFROMLOGIN&&$o.visitorSearch.sendGdprMessage(r);n==$o.core.enterType.TALKEXPERT||n==$o.core.enterType.LIVECHAT||n==$o.core.enterType.TRACKINGBAR||n==$o.core.enterType.TALKEXPERTBAR||n==$o.core.enterType.SEARCHBOX||n==$o.core.enterType.AUTOOPEN?(e=$o.utils&&$o.utils.stopWelcomeCanned?$o.utils.stopWelcomeCanned:!1,o=$o.core.globalVariables.agentType===$o.visitorStart.agentTypes.BOT,e||o||$o.visitorSearch.sendJustLookingChatMessage(t)):n!=$o.core.enterType.REOPEN&&n!=$o.core.enterType.CHECKOUT&&n!=$o.core.enterType.treePreview&&n!=$o.core.enterType.PRODUCTPAGE&&n!=$o.core.enterType.LOGINPAGE&&n!=$o.core.enterType.REOPENFROMLOGIN&&n!=$o.core.enterType.TRIGGER&&n!=$o.core.enterType.VIPAREA&&n!=$o.core.enterType.RECOVERSESSION&&n!=$o.core.enterType.POPUP&&n!=$o.core.enterType.TREEPREVIEW?(s=$o.storage.local.get($o.core.localStorageTypes.JUSTLOOKINGOPTION),s=="true"&&$o.chat.showJustLookingMessage(),$o.visitorSearch.sendJustLookingChatMessage(t,!0)):n==$o.core.enterType.RECOVERSESSION&&t&&(u={Body:{Original:t?t.replace(/\\n/g,"").replace(/&#39;/g,"'"):"",Translated:!1},Room:$o.core.globalVariables.room,Category:"CANNED",Type:$o.canned.type.WELCOME,Id:$o.tools.generateRandomId(),SentBy:"V"},$o.saveRecord.canned(u.Body,u.Type,u.Id));n==$o.core.enterType.TRACKINGBAR||n==$o.core.enterType.PINCODE||n==$o.core.enterType.TALKEXPERT||n==$o.core.enterType.treePreview||n==$o.core.enterType.LIVECHAT||n==$o.core.enterType.TALKEXPERTBAR||n==$o.core.enterType.AUTOOPEN?$o.visitorStart.enterActions():n==$o.core.enterType.TRIGGER||n==$o.core.enterType.POPUP?(h=$o.enterData.cannedMessage.length&&$o.enterData.cannedMessage!="undefined"?$o.enterData.cannedMessage:t,$o.canned.sendCanned($o.canned.type.TRIGGER,$o.core.globalVariables.triggerMessage),$o.visitorStart.enterActions()):n==$o.core.enterType.VIPAREA?($o.visitorSearch.sendVipChatMessage($o.enterData.vipMessage),$o.visitorStart.enterActions()):n==$o.core.enterType.CHECKOUT||n==$o.core.enterType.REOPEN||n==$o.core.enterType.LOGINPAGE||n==$o.core.enterType.PRODUCTPAGE||n==$o.core.enterType.REOPENFROMLOGIN?(n===$o.core.enterType.CHECKOUT&&$o.platform!==undefined&&$o.platform.hideTotallyCartAndMyListButtons!==undefined&&$o.platform.hideTotallyCartAndMyListButtons(),$o.core.globalVariables.device=="mobile"&&($o.core.globalVariables.pageUrl.indexOf("Reskyt")==-1?$o.visitorStart.minimizeCoviewerMobile():$("#minimized-widget").trigger("click")),$o.visitorStart.goToRecoverRecords=!0):n==$o.core.enterType.RECOVERSESSION&&($o.saveRecord.linkSession($o.core.globalVariables.recoverSession),$o.visitorStart.goToRecoverRecords=!0,$o.visitorStart.enterActions());(n==$o.core.enterType.SEARCHBOX||n==$o.core.enterType.TRACKINGBAR)&&($("#iframe-status").val($o.iframes.iframeStatus.SEARCH),f=$o.iframes.iframeStatus.SEARCH,window.location.href.indexOf("jafgifts")>-1&&(f=$o.iframes.iframeStatus.CHAT),$("#iframe-status").val(f),$o.iframes.changeStatusIframe(f));$o.chat.pendingAccessFormMessage&&setTimeout(function(){$o.forms.sendForm($o.forms.type.ACCESSFORM,$o.chat.pendingAccessFormMessage);$o.chat.prepareSend($o.chat.pendingAccessFormMessage.message);$o.chat.pendingAccessFormMessage=!1},500);$o.visitorStart.goToRecoverRecords?$o.recoverRecords.getRecords($o.variablesVisitor.tokenVisitor,$o.core.globalVariables.room):$o.platform&&$o.platform.addPlatformLogin();$o.settings.allowTrackingProductsLite&&n!=$o.core.enterType.REOPEN&&n!=$o.core.enterType.CHECKOUT&&n!=$o.core.enterType.REOPENFROMLOGIN&&n!=$o.core.enterType.LOGINPAGE&&n!=$o.core.enterType.PRODUCTPAGE&&$o.catalog.getProductsByUrls($o.core.globalVariables.navigationUrls)},restartConnection:function(n){$o.visitorSearch.enableSelectResult=!1;var t=function(){var t=new Date,r=$o.enterData.searchTerm||"",i="statusVisitor="+$o.variablesVisitor.status+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&tokenSession="+$o.core.globalVariables.room+"&domainId="+$o.variablesVisitor.domain+"&locale="+$o.core.globalVariables.locale+"&baseUrl="+$o.core.globalVariables.baseUrl+"&currencyVisitor="+$o.core.globalVariables.currencyVisitor+"&apiVersion="+$o.core.globalVariables.apiVersion+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&platform="+$o.core.globalVariables.platform+"&forceAssignToAgents="+$o.core.globalVariables.forceAssignToAgents;$.post("Visitor/Start?"+i,{connectionId:$.connection.hub.id,time:t.getTimezoneOffset(),iframeStatus:$o.iframes.currentIframeStatus,pageTitle:$o.core.globalVariables.pageTitle,pageUrl:$o.core.globalVariables.pageUrl,pageType:$o.core.globalVariables.pageType,visitorProtocolPage:window.location.protocol,visitorsOverflow:$o.core.globalVariables.visitorsOverflow,allowedDepartmentsId:$o.enterData.allowedDepartmentsId,startDefaultCategories:$o.utils&&$o.utils.startDefaultCatalog?$o.utils.startDefaultCatalog:null},function(t){var i,r,u,f;$o.core.globalVariables.myToken=t.Token;t.VisitorNotInDicc&&($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.status,value:""},{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""}]),$("#lay-AFK .afk-content-advice").text(culture.coviewer.AdviceNotInDic),$("#lay-AFK").show(),$("#chat-input").blur(),$.connection.hub.state!=$.signalR.connectionState.disconnected&&$.connection.hub.stop());t.Agent&&($o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:t.Status},{cookie:$o.cookies.sessionId,value:t.SessionId},{cookie:$o.cookies.tokenSession,value:t.Room},{cookie:$o.cookies.connection,value:$.connection.hub.id},{cookie:$o.cookies.visitorOverFlow,value:!1},{cookie:$o.cookies.firstEnter,value:"true"}]),i=new Date,$o.variablesVisitor.lastInteractionAFK=i,$o.core.globalVariables.myToken=t.Token,t.Status=="Attending"&&t.Status!=$o.variablesVisitor.status&&(r="?tokenSession="+t.Room+"&sessionSummaryId="+t.SessionSummaryId,$o.visitorStart.changeStatus(r,t.Status),$o.visitorPixel.sales.setCookie(),$o.carousel.sendProductToAnalytics("V"),$o.core.hasBeenWaiting=!0,$o.visitorStart.changeHeaderChatToChatting()),$o.core.globalVariables.agentId=t.Agent.AgentId,$o.core.globalVariables.agentName=t.Agent.Name,$o.visitorSearch.assignedAgentName=t.Agent.Name,$o.core.globalVariables.agentType=t.Agent.Role===99?$o.visitorStart.agentTypes.BOT:$o.visitorStart.agentTypes.HUMAN,$o.visitorStart.agentsConnectedChangesUI(t),u="",$o.core.isSignalRConnected()&&$.connection.hubInterface.server.sendDashboard(t.Token,u,$o.iframes.currentIframeStatus).done(function(){var n={Body:$o.search.searchTerm,Room:$o.core.globalVariables.room,SentBy:"V",Type:"Q"};$o.hubsOut.sendSearchTerm(n,"true")}));n&&($o.core.globalVariables.botTreeEnabled=t.Agent.IsBotTree,$o.core.globalVariables.botTreeEnabled?$o.core.globalVariables.visitorsOverflow&&($o.bot.connectOverflowAsync(),f=setInterval(function(){$o.core.globalVariables.startedBotOffline&&(clearInterval(f),$o.chat.prepareSend(n))},100)):($o.core.hasBeenWaiting=!0,$o.chat.prepareSend(n)));$o.visitorSearch.enableSelectResult=!0;$o.core.globalVariables.finishedVisitorRestartConnection=!0})};$o.core.isSignalRConnected()?t():$.connection.hub.start().done(function(){$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.connection,value:$.connection.hub.id}]);t()})},reconnectVisitorSignalR:function(){$o.visitorSearch.enableSelectResult=!1;var n="statusVisitor="+$o.variablesVisitor.status+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&tokenSession="+$o.core.globalVariables.room+"&domainId="+$o.variablesVisitor.domain+"&locale="+$o.core.globalVariables.locale+"&baseUrl="+$o.core.globalVariables.baseUrl+"&currencyVisitor="+$o.core.globalVariables.currencyVisitor+"&apiVersion="+$o.core.globalVariables.apiVersion+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&license="+$o.settings.license;$.post("Reconnect/ReconnectedSignalR?"+n,{connectionId:$.connection.hub.id,iframeStatus:$o.iframes.currentIframeStatus,pageTitle:$o.core.globalVariables.pageTitle,pageUrl:$o.core.globalVariables.pageUrl,pageType:$o.core.globalVariables.pageType,visitorsOverflow:!1},function(){})},changeStatus:function(n,t){t!="Waiting"?$o.inactivityAgent.clearTimerInterval():$o.inactivityAgent.startCounter();$.post("/Visitor/Changestatus"+n,{status:t});$o.saveRecord.statusVisitor(t)},finishLoading:function(){ko.applyBindings($o.core.viewModel);$("#oct8ne-chat-room").css({opacity:1});$o.visitorRatings.init();$o.forms.init()},checkVisitorCapabilities:function(){var u={isConferenceAllowed:!1,name:"Visitor",role:$o.core.globalVariables.userType,conferenceProviderName:$o.core.globalVariables.conferenceProvider,ringTone:!0,chromeExtensionId:$o.core.globalVariables.chromeExtensionId,videoUnavailableBackgroundImage:"https://static.oct8ne.com/api/img/dashboard/video-unavailable.png",recordingMode:"none",ssOnly:$o.settings.ssOnly},i,t;if($o.visitorStart.platform=new Oct8ne.Conference.PlatformConnector($.connection.hubInterface.server,"/conference",!0),window.conferenceVM=new conferenceViewModel(u,$o.visitorStart.platform,Oct8ne.Conference.LogLevel.None),i=Oct8ne.Conference.Providers.CapabilitiesProviderFactory.createCapabilityProvider($o.core.globalVariables.conferenceProvider,$o.core.globalVariables.chromeExtensionId),t=i.getCapabilitiesAsync(),t){var r=0,n=!1,f=setInterval(function(){r<5?r++:(clearInterval(f),n===!1&&(n=!0,$o.visitorStart.doStart($o.core.globalVariables.enterType)))},100);t.then(function(t){$o.core.globalVariables.visitorHasAudioDevices=t.hasAudioDevices;$o.core.globalVariables.visitorHasVideoDevices=t.hasVideoDevices;$o.core.globalVariables.visitorIsWebRtcSupported=t.isWebRtcSupported;$o.core.globalVariables.visitorBrowserDevice=t.browser;n===!1&&(n=!0,$o.visitorStart.doStart($o.core.globalVariables.enterType))})}},sendCustomEvent:function(n,t,i){parent.postMessage("SENDANALYTICSEVENT,GACustomAction,"+t+","+i+","+n,"*")},hideMeByNewTab:function(){var n=$o.saveRecord.openNewTab();n[0].Fields=JSON.stringify(n[0].Fields);$.ajax({type:"POST",url:"/Data/SaveInteractions",data:{sessionSummaryId:$o.variablesVisitor.sessionSummaryId,tokenSession:$o.core.globalVariables.room,tokenVisitor:$o.variablesVisitor.tokenVisitor,jsonListData:JSON.stringify(n)}}).always(function(){$o.core.isSignalRConnected()&&$.connection.hub.stop();parent.postMessage("CLOSEMODAL","*")})},setSound:function(){var n="true";n=$o.storage.local.get($o.core.localStorageTypes.SOUND);$o.variablesVisitor.enabledSoundVisitor=n=="false"?n:"true"},assignedAgentName:"",enableSelectResult:!0,disableChangeToWaiting:!1,openProduct:!1,showedJustLookingMessage:!1,showedGdprMessage:!1,agentDisconnectedTimer:0,agentDisconnectedInterval:"",selectedDepartment:0,assignedDepartment:"",platform:"",showAccessForm:!1,showDepartmentsSelect:!1,goToRecoverRecords:!1,agentTypes:{BOT:"BOT",HUMAN:"HUMAN"}}}(window);generateConferenceId=function(){return $o.core.globalVariables.room};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.storage={local:{get:function(n){$o.storage.local.defineValues();return $o.storage.local.values[n]},set:function(n,t){$o.storage.local.defineValues();$o.storage.local.values[n]=t!==$o.core.localStorageActions.REMOVE?t:null;parent.postMessage("SETLOCALSTORAGE,"+n+","+t,"*")},defineValues:function(){typeof $o.storage.local.values=="undefined"&&($o.storage.local.values={})},values:{}},conferenceAdapter:{get:function(n){var t=$o.storage.local.get(n);return t?JSON.parse(t):null},set:function(n,t){$o.storage.local.set(n,JSON.stringify(t))},remove:function(n){$o.storage.local.set(n,$o.core.localStorageActions.REMOVE)}}}}(window),function(n){var t,i;(function(n){n.Choice="CHOICE";n.ChoiceResponse="CHOICERESPONSE";n.Zoom="ZOOM";n.Chat="CHAT";n.SideBubble="SIDEBUBBLE";n.SideBubbleView="SIDEBUBBLEVIEW";n.Validation="VALIDATION"})(t=n.Categories||(n.Categories={})),function(n){n.Backend="BACKEND";n.Frontend="FRONTEND"}(i=n.Targets||(n.Targets={}))}(Interactions||(Interactions={}));__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})};__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};window.oct8ne=window.$o=window.oct8ne||{},function(n){function t(t){$o.tools.init();$o.search.init();$o.carousel.init();$o.canva.init();$o.drag.init();$o.pin.init();$o.speak.init();$o.filters.init();$o.scroll.init();$o.choices=n.Choice.ChoiceManagerFactory.create(t);$o.choiceResponses=n.ChoiceResponse.ChoiceResponseManagerFactory.create(t,$o.choices);$o.zoom=n.Zoom.ZoomManagerFactory.create(t);$o.sideBubbles=n.SideBubble.SideBubbleManagerFactory.create(t,"sideBubble");t.type==Core.UserTypes.Visitor&&($o.validations=new n.Validation.ValidationManager(new n.Validation.VisitorSideRealTimeConnector),$o.messageRatings=new n.MessageRating.MessageRatingManager(new n.MessageRating.VisitorSideRealTimeConnector),$o.delayAction=new n.DelayAction.DelayManager(new n.DelayAction.VisitorSideRealTimeConnector),$o.botErrors=new n.Error.ErrorManager(new n.Error.VisitorSideRealTimeConnector))}n.init=t;var i=function(){function t(){}return t.prototype.updateUI=function(){},t.prototype.create=function(){},t.prototype.remove=function(){},t.prototype.save=function(){},t.prototype.recover=function(){},t.prototype.search=function(){return null},t.objectAdapter=function(t,i){var o=function(n){return Object.prototype.toString.apply(n)==="[object Object]"},f=function(n){return Object.prototype.toString.apply(n)==="[object Array]"},e=f(t)?[]:{},r,u;for(r in t)t.hasOwnProperty(r)&&(u=void 0,u=i===n.Targets.Backend?r.replace(/^\w/,function(n){return n.toUpperCase()}):r.replace(/^\w/,function(n){return n.toLowerCase()}),e[u]=o(t[r])||f(t[r])?this.objectAdapter(t[r],i):t[r]);return e},t.sleep=function(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(t){return setTimeout(t,n)})]})})},t.prototype.store=function(t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(r){switch(r.label){case 0:return[4,$o.saveRecord.goToSave(n.BaseManager.objectAdapter(t,n.Targets.Backend))];case 1:return i=r.sent(),[2,i]}})})},t}();n.BaseManager=i}(Interactions||(Interactions={})),function(n){var t=function(){function n(){this.subscribeToRealTimeEvents()}return n.prototype.send=function(){},n.prototype.subscribeToRealTimeEvents=function(){},n}();n.RealTimeConnector=t}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n.type="Choice",n.collection=[],n}return __extends(i,t),i.prototype.create=function(n){var t=this.addInteractionProperties(n),i;this.send(t);this.updateUI(t);i=this.addFullProperties(t);this.save(i)},i.prototype.send=function(n){this.realTime.send(n)},i.prototype.updateUI=function(n){$o.chat.toogleDenyVisitorTyping(n.denyVisitorTyping);var t=this.addFullProperties(n);this.render(t,!1)},i.prototype.save=function(n){var i=this.parseDataForSaving(n);t.prototype.store.call(this,i)},i.prototype.recover=function(t){var i=n.BaseManager.objectAdapter(t,n.Targets.Frontend),r=this.parseDataForRecovering(i);this.render(r,!0)},i.prototype.search=function(n){for(var u=null,r,t=0,i=this.collection;t<i.length;t++)r=i[t],r.id===n&&(u=r);return u},i.prototype.render=function(n,t){this.collection.push(n);$o.speak.messages.push(n);$o.chat.toogleDenyVisitorTyping(n.denyVisitorTyping);$o.scroll.enableScroll&&(setTimeout(function(){$o.scroll.enableScroll();$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom",{callbacks:!1})},100),t||$o.scroll.moveChatToBottom())},i.prototype.addFullProperties=function(t){var i=t;return i.time=Core.Helpers.getTime(),i.sentBy=Core.UserTypes.Agent,i.category=n.Categories.Choice,i.response=ko.observable(),i.hideOptions=t.hideOptions===!1?!1:!0,i},i.prototype.parseDataForSaving=function(n){var t={recoverType:1,sentBy:n.sentBy,type:this.type,fields:{body:n.body,id:n.id,options:JSON.stringify(n.options),type:n.type,name:n.name,time:n.time,hideOptions:n.hideOptions,denyVisitorTyping:n.denyVisitorTyping}};return[t]},i.prototype.parseDataForRecovering=function(t){var i=n.BaseManager.objectAdapter(t,n.Targets.Frontend);return{category:n.Categories.Choice,id:i.fields.id,name:i.fields.name,body:i.fields.body,type:i.fields.type,options:n.BaseManager.objectAdapter(JSON.parse(i.fields.options),n.Targets.Frontend),response:ko.observable(),sentBy:i.sentBy,time:i.fields.time,hideOptions:i.fields.hideOptions,denyVisitorTyping:i.fields.denyVisitorTyping}},i.prototype.addInteractionProperties=function(n){return n.name=Core.Helpers.getMyName(),n.id=Core.Helpers.generateId(),n},i}(n.BaseManager);t.ChoiceManagerBase=i})(t=n.Choice||(n.Choice={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t;(function(n){n.ChoiceList="ChoiceList";n.ChoiceButtons="ChoiceButtons";n.Response="RESPONSE"})(t=n.Types||(n.Types={}))})(t=n.Choice||(n.Choice={}))}(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var r=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){var t=this;$.connection.hubInterface.client.receiveChoice=function(i,r){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return r&&$o.delay.setGlobal(r),[4,n.BaseManager.sleep($o.delay.global)];case 1:return t.sent(),$o.chat.sendIsAttendedToAnalytics("CHOICE"),$o.chat.playVisitorSound(),$o.choices.updateUI(n.BaseManager.objectAdapter(i,n.Targets.Frontend)),$o.delay.reset(),[2]}})})}},i}(n.RealTimeConnector),i;t.VisitorSideRealTimeConnector=r;i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.send=function(t){window.parent.sendChoice(n.BaseManager.objectAdapter(t,n.Targets.Backend),Core.Helpers.getTokenRoom())},i}(n.RealTimeConnector);t.AgentSideRealTimeConnector=i})(t=n.Choice||(n.Choice={}))})(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this)||this;return i.realTime=t,i}return __extends(t,n),t.prototype.render=function(t){n.prototype.render.call(this,t,!1)},t.prototype.disableAll=function(){for(var i,n=0,t=$o.speak.messages();n<t.length;n++)i=t[n],i.category=="CHOICE"&&i.response("true")},t}(n.ChoiceManagerBase);n.ChoiceVisitorSideManager=t})(t=n.Choice||(n.Choice={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t=function(){function t(){}return t.create=function(t){var r,i;return t.type===Core.UserTypes.Agent?(r=new n.AgentSideRealTimeConnector,new n.ChoiceAgentSideManager(r)):(i=new n.VisitorSideRealTimeConnector,t.device?new n.ChoiceVisitorSideManager(i):new n.ChoiceVisitorSideManager(i))},t}();n.ChoiceManagerFactory=t})(t=n.Choice||(n.Choice={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this)||this;return i.collection=[],i.choices=n,i}return __extends(i,t),i.prototype.recover=function(t){var i=n.BaseManager.objectAdapter(t,n.Targets.Frontend),r;this.setChoiceAsResponsed(i.fields.choiceId,i.fields.id);r={choiceId:i.fields.choiceId,body:i.fields.body,name:i.fields.name,time:i.fields.time,category:n.Categories.ChoiceResponse,id:i.fields.id,sentBy:i.sentBy};this.render(r,!0)},i.prototype.addFullProperties=function(t){var i=t;return i.time=Core.Helpers.getTime(),i.sentBy=Core.UserTypes.Visitor,i.category=n.Categories.ChoiceResponse,i.id=t.id,i},i.prototype.render=function(n,t){this.collection.push(n);$o.speak.messages.push(n);t||$o.scroll.moveChatToBottom()},i.prototype.setChoiceAsResponsed=function(n,t){var i=this.choices.search(n);i&&i.response(t)},i}(n.BaseManager);t.ChoiceResponseManagerBase=i})(t=n.ChoiceResponse||(n.ChoiceResponse={}))}(Interactions||(Interactions={})),function(n){var t;(function(){})(t=n.ChoiceResponse||(n.ChoiceResponse={}))}(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var r=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.send=function(t){if($o.core.isSignalRConnected())$o.variablesVisitor.status!="Attending"?$.connection.hubInterface.server.sendStatus({tokenVisitor:$o.core.globalVariables.myToken,tokenSession:$o.core.globalVariables.room,status:"Waiting"}).done(function(){$.connection.hubInterface.server.sendChoiceResponse(n.BaseManager.objectAdapter(t,n.Targets.Backend),Core.Helpers.getTokenRoom())}):$.connection.hubInterface.server.sendChoiceResponse(n.BaseManager.objectAdapter(t,n.Targets.Backend),Core.Helpers.getTokenRoom());else{$o.visitorStart.restartConnection(null,!0);var i=setInterval(function(){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(u){switch(u.label){case 0:return $o.core.globalVariables.finishedVisitorRestartConnection?(clearInterval(i),!$o.bot)?[3,2]:[4,$o.bot.connectOverflowAsync()]:[3,3];case 1:u.sent();u.label=2;case 2:r=setInterval(function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return $o.core.globalVariables.startedBotOffline&&(clearInterval(r),$.connection.hubInterface.server.sendStatus({tokenVisitor:$o.core.globalVariables.myToken,tokenSession:$o.core.globalVariables.room,status:"Waiting"}).done(function(){setTimeout(function(){$.connection.hubInterface.server.sendChoiceResponse(n.BaseManager.objectAdapter(t,n.Targets.Backend),Core.Helpers.getTokenRoom())},4e3)})),[2]})})},100);u.label=3;case 3:return[2]}})})},100)}},i}(n.RealTimeConnector),i;t.VisitorSideRealTimeConnector=r;i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){window.getChoiceResponseFromDashboard=function(t){var i=n.BaseManager.objectAdapter(t,n.Targets.Frontend);$o.choiceResponses.receive(i)}},i}(n.RealTimeConnector);t.AgentSideRealTimeConnector=i})(t=n.ChoiceResponse||(n.ChoiceResponse={}))})(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(n){var t=function(n){function t(t,i){var r=n.call(this,i)||this;return r.realTime=t,r}return __extends(t,n),t.prototype.save=function(t){return __awaiter(this,void 0,void 0,function(){var i,r;return __generator(this,function(u){switch(u.label){case 0:return i=this.parseDataForSaving(t),[4,n.prototype.store.call(this,i)];case 1:return r=u.sent(),[2,r]}})})},t.prototype.clickResponseButton=function(n,t){var i=this.choices.search(n);i&&(i.response(t),this.sendResponse(i.id))},t.prototype.clickResponseList=function(n){this.sendResponse(n)},t.prototype.sendResponse=function(n){return __awaiter(this,void 0,void 0,function(){var i,t,r,u;return __generator(this,function(f){switch(f.label){case 0:return(i=this.getResponseInfo(n),t={choiceId:n,body:i.caption,name:Core.Helpers.getMyName(),id:i.id},!t.choiceId)?[3,2]:(r=this.addFullProperties(t),this.render(r,!1),[4,this.save(r)]);case 1:u=f.sent();t.body=i.body;this.realTime.send(t);f.label=2;case 2:return[2]}})})},t.prototype.getResponseInfo=function(n){var i=this.choices.search(n),t,r,u;if(i)for(t=0,r=i.options;t<r.length;t++)if(u=r[t],u.id===i.response())return u;return null},t.prototype.parseDataForSaving=function(n){var t={recoverType:1,sentBy:Core.UserTypes.Visitor,type:"ChoiceResponse",fields:{body:n.body,choiceId:n.choiceId,id:n.id,name:n.name,time:n.time}};return[t]},t}(n.ChoiceResponseManagerBase);n.VisitorSideManager=t})(t=n.ChoiceResponse||(n.ChoiceResponse={}))})(Interactions||(Interactions={})),function(n){var t;(function(n){var t=function(){function t(){}return t.create=function(t,i){var u,r;return t.type===Core.UserTypes.Agent?(u=new n.AgentSideRealTimeConnector,new n.AgentSideManager(u,i)):(r=new n.VisitorSideRealTimeConnector,t.device?new n.VisitorSideManager(r,i):new n.VisitorSideManager(r,i))},t}();n.ChoiceResponseManagerFactory=t})(t=n.ChoiceResponse||(n.ChoiceResponse={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(){var t=n.call(this)||this;return t.level=1,t.type="Zoom",t.init(),t}return __extends(t,n),t.prototype.create=function(){if(!$o.search.sendingProductToCanva){var t=this.createData(),n=this.addFullProperties(t);this.updateUI();this.send(n);this.save(n)}},t.prototype.updateUI=function(){var r=this,n,t,i;$("#localCanvas,#remoteCanvas").hide(0);Core.Helpers.getCurrentInternalId().length&&(n="in",t="out",this.level===2&&(n="out",t="in"),this.object.removeClass("icon-common-zoom"+t+"-button").addClass("icon-common-zoom"+n+"-button"),$("#oct8ne-helper").find(".pin-shape, .note").hide(),this.level===4?(this.level=1,$o.canva.target.width=$o.canva.target.width/4,$o.canva.target.height=$o.canva.target.height/4):(this.level=this.level*2,$o.canva.target.width=$o.canva.target.width*2,$o.canva.target.height=$o.canva.target.height*2),i=$("#oct8ne-helper, #oct8ne-helper img"),$("#localCanvas,#remoteCanvas").hide(0),i.animate({top:($o.canva.holder.height-$o.canva.target.height)/2,left:($o.canva.holder.width-$o.canva.target.width)/2,width:$o.canva.target.width,height:$o.canva.target.height},400,function(){r.updatePins();$o.pencil.drawing.updateCanvasDimensions();$("#localCanvas,#remoteCanvas").show(0)}))},t.prototype.save=function(t){var i=this.parseDataForSaving(t);n.prototype.store.call(this,i)},t.prototype.recover=function(){},t.prototype.send=function(n){$o.core.isSignalRConnected()&&this.realTime.send(n)},t.prototype.init=function(){var n=this;this.object=$("#zoom-tool");this.object.on("click",function(){n.create()})},t.prototype.addFullProperties=function(n){var t=n;return t.productInternalID=Core.Helpers.getCurrentInternalId(),t.imageUrl=Core.Helpers.getCurrentImageUrl(),t.level=this.level,t},t.prototype.parseDataForSaving=function(n){var t={recoverType:1,sentBy:n.sentBy,type:this.type,fields:{level:n.level,imageUrl:n.imageUrl}};return[t]},t.prototype.createData=function(){return{room:Core.Helpers.getTokenRoom(),sentBy:Core.Helpers.getUserType()}},t.prototype.updatePins=function(){var n=this;$("#oct8ne-helper").find(".pin-shape").each(function(){var t={left:parseInt($(n).attr("data-x"))*$o.canva.target.object.width(),top:parseInt($(n).attr("data-y"))*$o.canva.target.object.height()};$(n).css(t).show()})},t}(n.BaseManager);t.ZoomManagerBase=i})(t=n.Zoom||(n.Zoom={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t;(function(){})(t=n.Types||(n.Types={}))})(t=n.Zoom||(n.Zoom={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var r=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){$.connection.hubInterface.client.changeZoom=function(){$o.zoom.updateUI()}},i.prototype.send=function(t){$o.core.isSignalRConnected()&&$.connection.hubInterface.server.sendZoom(n.BaseManager.objectAdapter(t,n.Targets.Backend))},i}(n.RealTimeConnector),i;t.VisitorSideRealTimeConnector=r;i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){window.getChangeZoomFromDashboard=function(){$o.zoom.updateUI()}},i.prototype.send=function(t){window.parent.sendZoomFromDashboard(n.BaseManager.objectAdapter(t,n.Targets.Backend))},i}(n.RealTimeConnector);t.AgentSideRealTimeConnector=i})(t=n.Zoom||(n.Zoom={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this)||this;return i.realTime=t,i}return __extends(t,n),t}(n.ZoomManagerBase);n.ZoomVisitorSideManager=t})(t=n.Zoom||(n.Zoom={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t=function(){function t(){}return t.create=function(t){var r,i;return t.type===Core.UserTypes.Agent?(r=new n.AgentSideRealTimeConnector,new n.ZoomAgentSideManager(r)):(i=new n.VisitorSideRealTimeConnector,t.device?new n.ZoomVisitorSideManager(i):new n.ZoomVisitorSideManager(i))},t}();n.ZoomManagerFactory=t})(t=n.Zoom||(n.Zoom={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this)||this;return t.type="SideBubble",t.typeView="SideBubbleView",t.sideBubbleSelector=$("#"+n),t.collection=[],t.currentBody=ko.observable(null),t}return __extends(r,i),r.prototype.updateUI=function(n){var t=this.addFullProperties(n);this.render(t,!1)},r.prototype.save=function(n){var t=this.parseDataForSaving(n);i.prototype.store.call(this,t)},r.prototype.recover=function(n){var t=this.parseDataForRecovering(n);this.render(t,!0)},r.prototype.send=function(n){this.realTime.send(n)},r.prototype.show=function(n){var t=ko.utils.arrayFirst($o.speak.messages(),function(t){return t.id==n});this.currentBody(t.body);this.prepareUI();this.saveView(t)},r.prototype.hide=function(){this.prepareUIClose()},r.prototype.addInteractionProperties=function(n){return n.name=Core.Helpers.getMyName(),n.id=Core.Helpers.generateId(),n},r.prototype.saveView=function(n){var t={recoverType:4,sentBy:n.sentBy,type:this.typeView,fields:{id:n.id}},r=[t];i.prototype.store.call(this,r)},r.prototype.render=function(n,t){$o.speak.messages.push(n);setTimeout(function(){$o.scroll.enableScroll();$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom",{callbacks:!1})},100);t||$o.scroll.moveChatToBottom()},r.prototype.addFullProperties=function(n){var i=n;return i.category=t.Types.SideBubbleLink,i.time=Core.Helpers.getTime(),i.sentBy=Core.UserTypes.Agent,i.type=this.type,i},r.prototype.prepareUI=function(){},r.prototype.prepareUIClose=function(){this.currentBody(null)},r.prototype.parseDataForSaving=function(n){var t={recoverType:1,sentBy:n.sentBy,type:n.type,fields:{body:n.body,id:n.id,link:n.link,name:n.name,time:n.time,title:n.title,type:n.type}};return[t]},r.prototype.parseDataForRecovering=function(i){var r=n.BaseManager.objectAdapter(i,n.Targets.Frontend);return{body:r.fields.body,id:r.fields.id,name:r.fields.name,sentBy:r.sentBy,time:r.fields.time,title:r.fields.title,type:r.fields.type,link:r.fields.link,category:t.Types.SideBubbleLink}},r}(n.BaseManager);t.SideBubbleManagerBase=i})(t=n.SideBubble||(n.SideBubble={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t;(function(n){n.SideBubbleLink="SIDEBUBBLELINK"})(t=n.Types||(n.Types={}));n.sample={body:'<p><img alt="" src="https://static-or00.inbenta.com/aa9f50bf1ce7e3bc4e1fe68bcc4f140401de9a6791d9d46a1797b095db587334/Imagen%20aviso%20MKP%20.jpg" style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; float: left; height: 24px; width: 25px;">&nbsp;&nbsp;<span style="box-sizing: border-box; color: rgb(105, 105, 105);"><strong style="box-sizing: border-box;">Recuerda que<\/strong>:<\/span><\/p>\n\n<ul style="box-sizing: border-box; margin: 15px 0px; font-family: Roboto, Helvetica, arial, sans-serif; font-size: 14px; text-align: justify;">\n\t<li style="box-sizing: border-box;">Recibirás tu pedido&nbsp;antes, si la&nbsp;<strong style="box-sizing: border-box;">dirección de envío es la misma que la de&nbsp;<\/strong><strong style="box-sizing: border-box;">facturación<\/strong>. En&nbsp;<strong style="box-sizing: border-box;"><a href="https://ayuda.fnac.es/mi-cuenta/actualizar-mis-datos-y-direcciones/" style="box-sizing: border-box; color: rgb(233, 172, 0); text-decoration-line: none; background: transparent; outline: none 0px;" target="_blank">Actualizar mis datos y direcciones<\/a><\/strong>, consulta o modifica tus direcciones para próximos pedidos.<\/li>\n\t<li style="box-sizing: border-box;">Todas las compras realizadas por&nbsp;personas residentes en los países pertenecientes a la Unión Europea estarán sujetas al IVA.&nbsp;<\/li>\n\t<li style="box-sizing: border-box;">En los pedidos enviados a países no pertenecientes a la Comunidad Económica Europea, los&nbsp;derechos de aduana y aranceles están incluidos en los gastos de envío.<\/li>\n\t<li style="box-sizing: border-box;">Los vendedores externos, en&nbsp;<strong style="box-sizing: border-box;">Fnac Marketplace,&nbsp;<\/strong>no realizan envíos fuera de España. Consulta cómo contactar con el vendedor&nbsp;desde&nbsp;la página de ayuda&nbsp;<strong style="box-sizing: border-box;"><a href="https://ayuda.fnac.es/fnac-marketplace/contacta-con-el-vendedor/" style="box-sizing: border-box; color: rgb(233, 172, 0); text-decoration-line: none; background: transparent; outline: none 0px;" target="_blank">Contacta con el&nbsp;Vendedor<\/a><\/strong>.<\/li>\n<\/ul>',title:"Recibirás tu pedido antes si la dirección de envío es la misma que la de facturación",link:"Más info"};n.sample2={body:'<h2>\n\t<u><strong>Plazos de expedición:<\/strong><\/u>\n<\/h2>\n\n<ul>\n\t<li>\n\t\t<strong><u>EN ALMACÉN FNAC:<\/u><\/strong>\n\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">En stock Fnac.es.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;">&nbsp;El artículo se encuentra en nuestro stock y nuestro compromiso de salida desde nuestro almacén es de 24 horas.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">En stock, expedición en 48 horas.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>El artículo se encuentra en nuestro stock y nuestro compromiso de salida desde nuestro almacén es de 48 horas.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">En stock, expedición en 72 horas.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;">&nbsp;El artículo se encuentra en nuestro stock y nuestro compromiso de salida desde nuestro almacén es de 72 horas.<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/li>\n\t<li>\n\t\t<span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><u><strong>&#8203;PRÓXIMOS LANZAMIENTOS<\/strong><\/u>:<\/span>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;">&#8203;<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Artículo en preventa<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>, expedición prevista para el…<\/strong> No disponemos del artículo en stock con anterioridad al lanzamiento. El proveedor nos comunica suministro de stock con anterioridad al lanzamiento. La expedición se realiza el día del lanzamiento. Generalmente son productos que puedes reservar en Fnac.es y no en las tiendas físicas.<\/span><\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Novedad<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;por llegar, no disponible por el momento<\/strong>. Se trata de una novedad que todavía no está en nuestro stock, ni disponemos de su fecha de lanzamiento.<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/li>\n\t<li>\n\t\t<u><strong><font face="Arial, Helvetica, sans-serif"><span style="font-size: 12px;">BAJO PEDIDO:<\/span><\/font><\/strong><\/u>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Expedición de 5 a 8 días.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>No disponemos de stock y se pide a proveedor. Nuestro compromiso de expedición es de 5 a 8 días, siempre que el proveedor lo pueda servir.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Bajo pedido, expedición aproximada de 8 a 10 días.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>No disponemos de stock y se pide a proveedor. Indicamos expedición aproximada de 8 a 10 días, siempre que el proveedor lo pueda servir en ese plazo.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Bajo pedido, expedición aproximada de 10 a 15 días.<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>No disponemos de stock y se pide a proveedor. Indicamos expedición aproximada de 10 a 15 días, siempre que el proveedor lo pueda servir en ese plazo.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Expedición en más de 30 días<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>No disponemos de stock y se pide a proveedor. No existe un compromiso de fecha de expedición, solo sabemos que será en más de 30 días, siempre que el proveedor lo pueda servir.<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Bajo pedido<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><strong>&nbsp;<\/strong>No disponemos de stock y se pide al proveedor. No existe compromiso de fecha de expedición, ni de entrega por parte del proveedor.<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/li>\n\t<li>\n\t\t<span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;"><u><strong>&#8203;&#8203;SIN STOCK<\/strong><\/u>:<\/span>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<strong><span style="box-sizing: border-box; font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: 12px;">No disponible<\/span><\/strong><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;">&nbsp;El artículo en cuestión no está disponible para su compra. Generalmente lo puedes encontrar vendido por vendedores de nuestra MarketPlace.<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/li>\n<\/ul>',title:"Plazos de expedición",link:"Ver más información sobre el tema"}})(t=n.SideBubble||(n.SideBubble={}))}(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var r=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){var t=this;$.connection.hubInterface.client.receiveSideBubble=function(i){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return $o.delay.setGlobal(1e3),[4,n.BaseManager.sleep($o.delay.global)];case 1:return t.sent(),$o.chat.playVisitorSound(),$o.sideBubbles.updateUI(n.BaseManager.objectAdapter(i,n.Targets.Frontend)),$o.delay.reset(),[2]}})})}},i}(n.RealTimeConnector),i;t.VisitorSideRealTimeConnector=r;i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.send=function(t){window.parent.sendSideBubble(n.BaseManager.objectAdapter(t,n.Targets.Backend),Core.Helpers.getTokenRoom())},i}(n.RealTimeConnector);t.AgentSideRealTimeConnector=i})(t=n.SideBubble||(n.SideBubble={}))})(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(t,i){var r=n.call(this,i)||this;return r.previousStatusIsChat=!1,r.realTime=t,r}return __extends(t,n),t.prototype.prepareUI=function(){$("#tutorial-coviewer").hide(0);$o.storage.local.set($o.core.localStorageTypes.HIDENEWTUTORIAL,!0);$o.iframes.currentIframeStatus!==$o.iframes.iframeStatus.VIEWER&&$o.iframes.currentIframeStatus!==$o.iframes.iframeStatus.SEARCH&&(this.previousStatusIsChat=!0,$o.iframes.changeStatusIframe($o.iframes.iframeStatus.VIEWER))},t.prototype.prepareUIClose=function(){this.previousStatusIsChat&&(this.previousStatusIsChat=!1,$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT));n.prototype.prepareUIClose.call(this)},t}(n.SideBubbleManagerBase);n.SideBubbleVisitorSideManagerDesktop=t})(t=n.SideBubble||(n.SideBubble={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(t,i){var r=n.call(this,i)||this;return r.realTime=t,r}return __extends(t,n),t}(n.SideBubbleManagerBase);n.SideBubbleVisitorSideManagerMobile=t})(t=n.SideBubble||(n.SideBubble={}))}(Interactions||(Interactions={})),function(n){var t;(function(n){var t=function(){function t(){}return t.create=function(t,i){var u,r;return t.type===Core.UserTypes.Agent?(u=new n.AgentSideRealTimeConnector,new n.SideBubbleAgentSideManager(u,i)):(r=new n.VisitorSideRealTimeConnector,t.device?new n.SideBubbleVisitorSideManagerMobile(r,i):new n.SideBubbleVisitorSideManagerDesktop(r,i))},t}();n.SideBubbleManagerFactory=t})(t=n.SideBubble||(n.SideBubble={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t){var i=n.call(this)||this;return i.type="Validation",i.realTime=t,i}return __extends(t,n),t.prototype.updateUI=function(n){var t=new $o.speak.validation({code:n.code,lastMessage:n.inputResponse});$o.speak.messages.push(t)},t.prototype.recover=function(){},t}(n.BaseManager);t.ValidationManager=i})(t=n.Validation||(n.Validation={}))}(Interactions||(Interactions={})),function(n){var t;(function(){})(t=n.Validation||(n.Validation={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){$.connection.hubInterface.client.receiveInputValidation=function(t){$o.validations.updateUI(n.BaseManager.objectAdapter(t,n.Targets.Frontend))}},i}(n.RealTimeConnector);t.VisitorSideRealTimeConnector=i})(t=n.Validation||(n.Validation={}))}(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t){var i=n.call(this)||this;return i.ratingMessage="Valora esta respuesta",i.realTime=t,i}return __extends(t,n),t.prototype.clickRatingButton=function(n,t,i){var r=this.getCurrent(n),u,f;this.highlightResult(r,i);t?(u=r.find(".rating-comment-form"),u.attr("data-result",i.toString()).show()):(f={comment:"",id:n,result:i},this.send(f))},t.prototype.clickRatingCommentButton=function(n){var r=this.getCurrent(n),i=r.find(".rating-comment-form"),f=i.find("textarea").val(),t,u;if(i.hide(),t=parseInt(i.attr("data-result")),isNaN(t))return!1;this.highlightResult(r,t);u={comment:f.toString(),id:n,result:t};this.send(u)},t.prototype.highlightResult=function(n,t){t===2?(n.find(".bad-rate").addClass("active"),n.find(".good-rate").remove()):(n.find(".good-rate").addClass("active"),n.find(".bad-rate").remove())},t.prototype.showResponse=function(n){var t=this.getCurrent(n);t.find(".rating-area,.rating-text").fadeOut(200,function(){t.find(".message-rating-result").fadeIn(200,function(){t.delay(3e3).fadeOut(200)})})},t.prototype.getCurrent=function(n){return $("[data-rating-id='"+n+"']")},t.prototype.send=function(n){this.realTime.send(n);this.showResponse(n.id)},t.prototype.updateUI=function(n){var t=this.addFullProperties(n);this.render(t)},t.prototype.render=function(n){$o.scroll.enableScroll&&setTimeout(function(){$o.scroll.enableScroll();$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom",{callbacks:!1})},100);$o.speak.messages.push(n)},t.prototype.addFullProperties=function(n){var t=n;return t.category="MESSAGERATING",t.message=this.ratingMessage,t.time=Core.Helpers.getTime(),t.sentBy=Core.UserTypes.Visitor,t},t}(n.BaseManager);t.MessageRatingManager=i})(t=n.MessageRating||(n.MessageRating={}))}(Interactions||(Interactions={})),function(n){var t;(function(){})(t=n.MessageRating||(n.MessageRating={}))}(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){var t=this;$.connection.hubInterface.client.receiveMessageRating=function(i){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return $o.delay.setGlobal(700),[4,n.BaseManager.sleep($o.delay.global)];case 1:return t.sent(),$o.messageRatings.updateUI(n.BaseManager.objectAdapter(i,n.Targets.Frontend)),[2]}})})}},i.prototype.send=function(t){if($o.core.isSignalRConnected()){var i=n.BaseManager.objectAdapter(t,n.Targets.Backend),r=Core.Helpers.getTokenRoom();$.connection.hubInterface.server.sendMessageRatingResponse(i,r,$o.core.globalVariables.domainId)}},i}(n.RealTimeConnector);t.VisitorSideRealTimeConnector=i})(t=n.MessageRating||(n.MessageRating={}))})(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var i=function(t){function i(n){var i=t.call(this)||this;return i.delayLocalStorage="oct8ne-delay-action",i.realTime=n,i}return __extends(i,t),i.prototype.process=function(t,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return(t.waitingAction==1)?[4,n.BaseManager.sleep($o.delay.global+500)]:[3,2];case 1:r.sent();$o.chat.showTypingDelayFromBot();r.label=2;case 2:return[4,this.start(t.milliseconds/1e3)];case 3:return r.sent(),$o.chat.hideTyping(),this.finish(i),[2]}})})},i.prototype.start=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return $o.storage.local.set(this.delayLocalStorage,t),[4,n.BaseManager.sleep($o.delay.global)];case 1:return i.sent(),this.storeRemainingTime(t),[4,n.BaseManager.sleep(t*1e3)];case 2:return i.sent(),[2]}})})},i.prototype.finish=function(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.deleteStorage(),oct8ne.delay.reset(),clearInterval(this.interval),n&&this.realTime.send(),[2]})})},i.prototype.checkPending=function(){var n=$o.storage.local.get("oct8ne-delay-action");n&&this.start(n)},i.prototype.storeRemainingTime=function(n){var t=this;this.interval=setInterval(function(){n>=1?(n=n-1,t.setStorage(n)):$o.storage.local.set(t.delayLocalStorage,$o.core.localStorageActions.REMOVE)},1e3)},i.prototype.setStorage=function(n){$o.storage.local.set(this.delayLocalStorage,n)},i.prototype.tryRecover=function(){var n=$o.storage.local.get(this.delayLocalStorage),t;n&&(t={milliseconds:parseInt(n)*1e3,waitingAction:0},this.process(t,$o.core.isSignalRConnected()))},i.prototype.deleteStorage=function(){$o.storage.local.set(this.delayLocalStorage,$o.core.localStorageActions.REMOVE)},i}(n.BaseManager);t.DelayManager=i})(t=n.DelayAction||(n.DelayAction={}))})(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){var t=this;$.connection.hubInterface.client.receiveDelay=function(i){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(){return t=n.BaseManager.objectAdapter(i,n.Targets.Frontend),t.milliseconds=parseInt(t.milliseconds),$o.delayAction.process(t,!0),[2]})})}},i.prototype.send=function(){if($o.core.isSignalRConnected()){var n=Core.Helpers.getTokenRoom();$.connection.hubInterface.server.sendDelayCallback(n,$o.core.globalVariables.agentId)}},i}(n.RealTimeConnector);t.VisitorSideRealTimeConnector=i})(t=n.DelayAction||(n.DelayAction={}))})(Interactions||(Interactions={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t){var i=n.call(this)||this;return i.realTime=t,i}return __extends(t,n),t.prototype.process=function(n){var i,t;$o.inactivity.stopProcess();$o.inactivity.disableChatInputUI();$.connection.hub.stop();$o.core.agentsConnected=!1;i="?tokenSession="+$o.core.globalVariables.room+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId;$o.visitorStart.changeStatus(i,"Finalized");$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.status,value:"Finalized"}]);$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.tokenSession,value:""},{cookie:$o.cookies.lastInteractionAFK,value:""},]);$o.core.globalVariables.sessionFinalized=!0;$("#chat-input, .chat-input-emoji").blur();t="Operation code: "+n.operationCode;n.errorCode!==-1&&(t+=", Error code: "+n.errorCode);$("#error-bot-content-message").html(t);$("#error-bot-message").show();console.error("Error on Oct8ne bot conversation! "+t+", Message: "+n.message);$("#refresh-page-error-bot, #minimize-by-menu").on("click",function(){parent.postMessage("RESTARTFROMERROR","*")})},t}(n.BaseManager);t.ErrorManager=i})(t=n.Error||(n.Error={}))}(Interactions||(Interactions={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},Interactions;(function(n){var t;(function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.subscribeToRealTimeEvents=function(){var t=this;$.connection.hubInterface.client.receiveError=function(i){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(){return $o.botErrors.process(n.BaseManager.objectAdapter(i,n.Targets.Frontend)),[2]})})}},i}(n.RealTimeConnector);t.VisitorSideRealTimeConnector=i})(t=n.Error||(n.Error={}))})(Interactions||(Interactions={}));$o.canva.events=function(){$o.canva.UI()};$o.canva.UI=function(){$o.canva.showAlertAddToCartInAgentUI=function(){$("#add-to-mycart").delay(500).fadeIn(100).delay(3500).fadeOut(400)};$o.canva.showAlertAddToMyListInAgentUI=function(){$("#add-to-mylist").delay(500).fadeIn(100).delay(1500).fadeOut(400)};$o.canva.updateUI=function(n,t){var u,i,r;$o.core.globalVariables.userType=="A"&&($o.tools.undoActions=0);n.Type=="V"?($("#video-wrapper").show(),u=function(){$o.core.youtubeViewModel.load(n.URLMedia)},$o.core.youtubeViewModel.loaded?u():$o.core.youtubeViewModel.setup(function(){u()}),$o.search.sendingProductToCanva=!1,$o.canva.holder.helper.children("div").remove()):($("#video-wrapper").hide(),$o.tools.change($o.tools.type.POINT),$o.zoom.level=1,$("#zoom-tool").removeClass("icon-common-zoomout-button").addClass("icon-common-zoomin-button"),$o.canva.target.object.hide(),$o.canva.holder.helper.children("div").remove(),$o.core.globalVariables.urlMedia=n.URLMedia,i=new Image,r=n.URLMedia,i.onerror=function(){var i=viewedVM.getProduct(n.InternalId);n.URLMedia=i.Thumbnail;t=="onError"?($("#loading-product").fadeOut(100),$o.core.globalVariables.userType=="V"&&($o.visitorSearch.enableSelectResult=!0)):$o.canva.updateUI(n,"onError")},i.onload=function(){var f=this,u=f.width/f.height,t=0,i=0,e=0,o=0;$o.canva.holder.width=$o.canva.holder.object.width();$o.canva.holder.height=$o.canva.holder.object.height();$o.canva.target.object.css({height:"",width:""});f.width>$o.core.maxImageSize&&(r="/api/img/core/no-thumb-resources.png");$o.canva.target.object.attr({src:r});$o.canva.holder.width==0&&($o.canva.holder.width=529);$o.canva.holder.height==0&&($o.canva.holder.height=310);u<1?(t=$o.canva.holder.height,i=t*u):(i=$o.canva.holder.width,t=i/u,t>$o.canva.holder.height&&(t=$o.canva.holder.height,i=t*u));e=($o.canva.holder.width-i)/2;o=($o.canva.holder.height-t)/2;$o.carousel.hideLoadingImage();$("#oct8ne-helper,#item-title-up").show();$o.canva.showImageOnCanva(e,o,i,t,n.InternalId);$o.canva.imageFromAgent&&($("#agent-suggestions-items").show("pulsate",{times:4},200,function(){window.viewedVM.setActiveTab()}),$o.canva.imageFromAgent=!1);$o.search.sendingProductToCanva=!1},i.src=r,$o.core.youtubeViewModel.isPlaying()&&$o.core.youtubeViewModel.clear())};$o.canva.showImageOnCanvaUI=function(n,t,i,r,u){$o.canva.target.object.css({height:r+"px",width:i+"px"});$o.canva.holder.helper.css({height:r+"px",width:i+"px",top:t+"px",left:n+"px"});$o.canva.target.width=i;$o.canva.target.height=r;$o.canva.target.object.show();var f=$o.core.globalVariables.userType=="V"&&$o.core.agentsConnected?$o.core.globalVariables.myToken:$o.core.globalVariables.otherToken;$o.pin.recoverPins(f,u,$o.carousel.currentImage);$o.core.globalVariables.userType=="V"&&($o.visitorSearch.enableSelectResult=!0);$o.pencil.drawing||$o.pencil.init();$o.pencil.changeCanvaImage(u)};$o.canva.validatePosition=function(n,t,i){var r=[],u=$o.canva.holder.helper,f=$o.canva.holder.object,e=-(u.height()-f.height()),o=-(u.width()-f.width());return r.left=n,r.top=t,n<o&&(r.left=o),t<e&&(r.top=e),n>0&&(r.left=0),t>0&&(r.top=0),i||(u.width()<=f.width()&&(r.left=parseInt(o/2)),u.height()<=f.height()&&(r.top=parseInt(e/2)),(r.top!=null||r.left!=null)&&u.animate({top:r.top,left:r.left},200)),r}};$o.carousel.events=function(){$("#oct8ne-nodes").on("click","li a",function(){var n=$(this).attr("data-nodeid");n==$o.core.globalVariables.internalId||$o.search.sendingProductToCanva?$o.sideBubbles.hide():($o.search.sendingProductToCanva=!0,$o.carousel.sentProductToCanva(n))});$("#prev-image").on("click",function(){$o.search.sendingProductToCanva||($o.search.sendingProductToCanva=!0,$o.carousel.clickPrevImage())});$("#next-image").on("click",function(){$o.search.sendingProductToCanva||($o.search.sendingProductToCanva=!0,$o.carousel.clickNextImage())});$("#items-order-list").on("click","li",function(){$(this).hasClass("current")||$o.search.sendingProductToCanva||($o.carousel.goImageN($(this).index()+1),$("#items-order-list li").removeClass().addClass("custom-coviewer-image-dots CVBkg5"),$(this).removeClass().addClass("current custom-coviewer-image-dots CVBkg4"),$o.search.sendingProductToCanva=!0)});$(".coviewer-wrapper").on("click","#item-title-up",function(){if($o.core.globalVariables.userType=="V"){$o.saveRecord.titleB();var n=$o.fullProducts.searchProduct($o.core.globalVariables.internalId);n.InternalId.indexOf("Oct8ne")==-1&&n.RouteTo!=null&&n.RouteTo!=""&&($o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT),parent.postMessage("GOTOPRODUCTPAGE,"+n.RouteTo,"*"))}else return!1});$("#oct8ne-content").on("click","#mylist-advice",function(){$o.platform.loginShowMyList();$o.saveRecord.loginB()});$o.carousel.UI()};$o.carousel.UI=function(){$o.carousel.createCoviewerPriceLayout=function(n){var r=n.normalPrice,u="<div id='normal-price'><div style='"+r.line1.inlineStyle+"'>"+r.line1.textTemplate+"<\/div>",i,t;r.line2.textTemplate!=""&&(u+="<div   style='"+r.line2.inlineStyle+"'>"+r.line2.textTemplate+"<\/div>");u+="<\/div>";u=u.replace("[0]","<span>[0]<\/span>");i=n.salePrice;t="<div id='sale-price'>";i.saleIcon&&(t+='<div class="offer-icon custom-coviewer-sale-icon"><div class="sale-text custom-coviewer-sale-text BkgCorp"><span>'+culture.coviewer.Sale+'<\/span><\/div><div class="BorderUpCorp"><\/div><\/div>');t+="<div style='"+i.line1.inlineStyle+"'>"+i.line1.textTemplate+"<\/div>";i.line2.textTemplate!=""&&(t+="<div style='"+i.line2.inlineStyle+"'>"+i.line2.textTemplate+"<\/div>");t=t.replace("[0]","<span class='price-old'>[0]<\/span>");t=t.replace("[1]","<span class='price-new'>[1]<\/span>");t+="<\/div>";$("#price-wrapper").html(u+t)};$o.carousel.updateArrowsCarousel=function(n){n<$o.carousel.images.length?$("#next-image").show():$("#next-image").hide();n>1?$("#prev-image").show():$("#prev-image").hide();$o.carousel.carouselInterface==$o.carousel.carouselInterfaces.BULLETS?($("#items-order-list li").removeClass().addClass("CVBkg5 custom-coviewer-image-dots"),$("#items-order-list li:nth-child("+n+")").removeClass().addClass("current CVBkg4 custom-coviewer-image-dots")):$(".current-img").html(n)};$o.carousel.setCurrentNodeActiveUI=function(n){if($("#oct8ne-nodes li").length){$("#oct8ne-nodes li").removeClass("active  BorderCorp");var t="";$("#oct8ne-nodes li a[data-nodeid="+n+"]").parent().parent().addClass("active BorderCorp").focus()}setTimeout(function(){$("#oct8ne-nodes").mCustomScrollbar("scrollTo",t)},500)};$o.carousel.fillCanvaInfo=function(n,t){var f,i,e,r,u;$o.search.openSeeDescription&&($("#info-icon-button ").trigger("click"),$o.search.openSeeDescription=!1);n.Description==""||n.Description==undefined||n.Description==null?$(".info-icon-button").hide():$(".info-icon-button").show();f=n.Description;i=document.getElementById("item-description");i.innerHTML=f;i.innerHTML=i.textContent;$("#item-description img , #item-description iframe ,#item-description a").remove();e=mylistVM.getProduct(n.InternalId);e?$("#add-to-mylist-tool-visitor").removeClass("icon-common-wishlist-icon custom-coviewer-icon-mylist CVTxt3").addClass("icon-common-like-button-high  custom-coviewer-icon-mylist-highlighted TxtCorp"):$("#add-to-mylist-tool-visitor").removeClass("icon-like-button-high custom-coviewer-icon-mylist-highlighted TxtCorp").addClass("icon-common-wishlist-icon custom-coviewer-icon-mylist CVTxt3");r=t?t:0;$o.core.globalVariables.internalId=n.InternalId;$o.carousel.currentImage=1;$o.carousel.images={};$o.carousel.images=n.InternalId.indexOf("Oct8neUpload")==-1?n.Medias:"";$("#prev-image").hide();n.InternalId.indexOf("Oct8neUpload")==-1?n.Medias.length==1?$("#next-image").hide():$("#next-image").show():$("#next-image").hide();$o.carousel.carouselInterface=n.Medias.length>6?$o.carousel.carouselInterfaces.NUMBERS:$o.carousel.carouselInterfaces.BULLETS;$o.carousel.carouselInterface==$o.carousel.carouselInterfaces.BULLETS?$o.carousel.createImageBullets(n.Medias):(n.InternalId.indexOf("Oct8neUpload")==-1?$(".total-img").html($o.carousel.images.length):$(".items-order-list").hide(),$o.carousel.createImageNumbers());u="<span class='main-title' title='"+n.Title+"'>"+n.Title+"<\/span>";$("#node-name, #item-title-up, #item-title").html(n.Title);n.InternalId.indexOf("Oct8neUpload")==-1&&n.InternalId.indexOf("Oct8neCatalog")==-1?($o.core.globalVariables.userType=="V"&&(u=u+"<p class='button-view-in-page BkgCorp'><span class='icon-common-view-in-page'><\/span><span >"+culture.coviewer.ViewInPage+"<\/span><\/p>"),$("#item-title-up").addClass("view-in-page")):$("#item-title-up").removeClass("view-in-page");$("#item-title-up").html(u);n.Title.length>30?$(".main-title").addClass("item-title-mini"):$(".main-title").removeClass("item-title-mini");$(".view-grouped-product").remove();n.Price=="0.00"||n.Price==null?n.InternalId.indexOf("Oct8neCatalog")>=0?($("#price-wrapper").hide(),$("#price-wrapper-catalog").show().find("span").html(n.Price)):($("#price-wrapper,#price-wrapper-catalog").hide(),n.InternalId.indexOf("Oct8ne")==-1&&$o.core.globalVariables.userType=="A"&&$(".coviewer-tools").append('<div class="view-grouped-product" title="View product details">'+culture.coviewer.PricingDetails+"<\/div>")):n.InternalId.indexOf("Oct8neCatalog")>=0?($("#price-wrapper").hide(),$("#price-wrapper-catalog").show().find("span").html(n.Price)):($("#price-wrapper>div").hide(),n.PrevPrice!=n.Price?($o.core.globalVariables.apiVersion=="2.1"?($("#sale-price").find("span.price-old").html($o.core.globalVariables.currencyVisitor+n.PrevPrice),$("#sale-price").find("span.price-new").html($o.core.globalVariables.currencyVisitor+n.Price)):($("#sale-price").find("span.price-old").html(n.PrevPrice),$("#sale-price").find("span.price-new").html(n.Price)),$("#sale-price,#sale-price div").show()):($o.core.globalVariables.apiVersion=="2.1"?$("#normal-price span").html($o.core.globalVariables.currencyVisitor+n.Price):$("#normal-price span").html(n.Price),$("#normal-price").show()),$("#item-price-up").removeClass("grouped-price").html($o.core.globalVariables.currency+n.Price),$("#price-wrapper-catalog").hide(),n.InternalId.indexOf("Oct8neUpload")>=0?$("#price-wrapper").hide():($("#price-wrapper,#product-page-tool").show(),$("#price-wrapper-catalog").hide()));$o.platform&&$o.core.adapterLoaded===$o.core.adapters.PRO&&$o.core.globalVariables.enterType!=$o.core.enterType.CHECKOUT&&$o.platform.showCartAndList(n.InternalId);n.InternalId.indexOf("Oct8neCatalog")>=0?($o.platform&&$o.platform.hideTotallyCartAndMyListButtons&&$o.platform.hideTotallyCartAndMyListButtons(),n.RouteTo?$("#view-catalog-page").show().find("a").attr("href",n.RouteTo):$("#view-catalog-page").hide()):$o.core.globalVariables.edition==$o.core.editions.LITE&&n.RouteTo&&$o.platform&&$o.core.globalVariables.userType=="V"?$("#view-catalog-page").show().find("a").attr("href",n.RouteTo):$("#view-catalog-page").hide();n.InternalId.indexOf("Oct8neUpload")==-1?$o.carousel.sendToCanva($o.carousel.images[r].FileName,$o.carousel.images[r].Id,$o.carousel.images[r].Type,"no-save"):($("#view-catalog-page").hide(),$o.platform&&$o.platform.hideTotallyCartAndMyListButtons&&$o.platform.hideTotallyCartAndMyListButtons(),$o.carousel.sendToCanva(n.URLMedia,n.URLMedia,"I","no-save"));$o.search.sendingProductToCanva=!1};$o.carousel.loadingProduct=function(){$("#oct8ne-helper,#item-title-up,#product-page-tool").hide();$("#loading-product").fadeIn(100)};$o.carousel.loadingImage=function(){$("#loading-product").fadeIn(100)};$o.carousel.hideLoadingImage=function(){$("#loading-product").hide(0)};$o.carousel.createImageBullets=function(n){$("#items-number-list").hide();$("#items-order-list").empty();$.each(n,function(n){var t=n==0?"<li class='current custom-coviewer-image-dots CVBkg4'><\/li>":"<li class='CVBkg5 custom-coviewer-image-dots '><\/li>";$("#items-order-list").append(t)});var t=n.length*28;t>180&&(t=180);$("#items-order-list").css({margin:"12px auto",width:t+"px"}).show()};$o.carousel.createImageNumbers=function(){$("#items-order-list").hide();$("#items-number-list").show();$(".current-img").html($o.carousel.currentImage);$(".total-img").html($o.carousel.images.length)};$o.carousel.addMediaFromUploadUI=function(){$o.core.userType=="A"?$("#upload-loading").remove():($o.iframes.currentIframeStatus==$o.iframes.iframeStatus.CHAT&&$o.iframes.changeStatusIframe($o.iframes.iframeStatus.SEARCH),window.location.pathname.indexOf("V3")>-1?$("#upload-visitor-tool").addClass("icon-common-clip-upload").removeClass("loading-image"):$("#upload-visitor-tool").addClass("icon-common-upload-button").removeClass("loading-image"));$(".info-icon-button").hide()};$o.carousel.addDocFromUploadUI=function(){$o.core.userType=="A"?$("#upload-loading").remove():window.location.pathname.indexOf("V3")>-1?$("#upload-visitor-tool").addClass("icon-common-clip-upload").removeClass("loading-image"):$("#upload-visitor-tool").addClass("icon-common-upload-button").removeClass("loading-image");$(".info-icon-button").hide()}};$o.chat.events=function(){$(".chat-send").on("click",function(){if(!$o.core.globalVariables.isGone){var n=$("#chat-input").val(),t=$("#chat-input").val().trim().length;return t>0&&$o.chat.pressEnterOnSearchInput(n),$("#chat-input").val(""),$(".emoji-wysiwyg-editor").text(""),$("#go-to-bottom").is(":visible")&&$("#oct8ne-chat-room").mCustomScrollbar("update"),!1}});$("#chat-input").on("keyup",function(n){if(!$o.core.globalVariables.isGone){var t=$("#chat-input").val(),i=$("#chat-input").val().trim().length;if(n.keyCode==13)return n.preventDefault(),i>0&&$o.chat.pressEnterOnSearchInput(t),$("#chat-input").val(""),$("#go-to-bottom").is(":visible")&&$("#oct8ne-chat-room").mCustomScrollbar("update"),!1;$o.chat.displayIsTyping(t,i,n.keyCode)}});$("#chat-tool-box").on("keyup",".emoji-wysiwyg-editor",function(n){if(!$o.core.globalVariables.isGone){var t=$(".emoji-wysiwyg-editor").text(),i=$(".emoji-wysiwyg-editor").text().trim().length;if($o.core.globalVariables.userType==="A"&&t.indexOf("#")===0)$o.agentTools.managementPhrasesFromChat(n,t,i);else{if(n.keyCode===13)return n.preventDefault(),i>0&&$o.chat.pressEnterOnSearchInput(t),$(".emoji-wysiwyg-editor").text(""),$("#go-to-bottom").is(":visible")&&$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom"),!1;$o.chat.displayIsTyping(t,i,n.keyCode)}}});$("#chat-tool-box").on("paste",".emoji-wysiwyg-editor",function(n){var i,t,r;if(!$o.core.globalVariables.isGone&&$o.settings.allowUploads&&$o.settings.showCoviewer=="True"&&!window.clipboardData){if(i=n.originalEvent.clipboardData.items,i.length===0)return;t=i[0].getAsFile();$o.chat.isMyPastedImageFile=t;t!==null&&(r=new FileReader,r.onload=function(n){$o.chat.imagePreviewPasted(n.target.result);$o.chat.myPastedImageIn64=n.target.result},r.readAsDataURL(t))}});$("#refresh-page-button , #refresh-page-afk").on("click",function(){$o.chat.refreshWindow()});$("#go-to-bottom").on("click",function(){$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom")});$("#close-preview-pasted").on("click",function(){$o.chat.closePastedPreview()});$(".oct8ne-chat-room").on("click","a.target-parent",function(n){n.preventDefault();parent.postMessage("GOTOPRODUCTPAGE,"+$(this).attr("href"),"*")});$("#send-pasted-image").on("click",function(){var n,t;$(this).removeClass("icon-common-send");$(this).addClass("loading");n=new FormData;n.append("token",$o.core.globalVariables.myToken);n.append("room",$o.core.globalVariables.room);n.append("files",$o.chat.isMyPastedImageFile);n.append("type","Coviwer");t="SaveVisitorImage";$o.core.globalVariables.userType==="A"&&(t="SaveAgentImage");$.ajax({type:"POST",url:$o.core.globalVariables.uploadUrl+"Files/"+t,data:n,async:!0,processData:!1,contentType:!1,success:function(n){var t=n.split(";"),i,r,u;if(t=t[0],t=t.slice(19,-1),typeof t=="string"&&(i=t.split(","),i[2]=="UPLOAD"&&(r=i[0],u=$o.forms.imageValidator(r),u))){var f=Math.floor(Math.random()*1e6+1),e="Oct8neUpload-"+f,o=$o.carousel.getProductFromUpload(e,r,$o.core.globalVariables.userType);$o.carousel.addMediaFromUploadUI();$o.carousel.sendProductToCarousel(o,$o.carousel.lists.VIEWED,$o.carousel.actions.VIEWINCANVA)}$o.chat.closePastedPreview()}})});$o.chat.UI()};$o.chat.UI=function(){$o.chat.showJustLookingMessage=function(){$("#just-looking-option").show();$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGOPTION,!0)};$o.chat.hideJustLookingMessage=function(){$("#welcome-just-looking").parent().remove();$("#just-looking-option").hide();$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGOPTION,!1);$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGBUTTON,$o.core.localStorageActions.REMOVE)};$o.chat.addAlertChat=function(){};$o.chat.typing=function(n){n.Body.Original==="false"?$(".is-typing-layer").hide():n.Body.Original==="true"?($(".is-typing-layer").find("p").text("···").css({"font-size":"",padding:""}),$(".is-typing-layer").show(),clearTimeout($o.chat.typingTimer),$o.chat.typingTimer=setTimeout(function(){$(".is-typing-layer").hide()},$o.chat.stopTypingInterval)):($(".is-typing-layer").find("p").text(n.Body.Original+"...").css({"font-size":"9px",padding:"5px 10px","font-style":"italic"}),$(".is-typing-layer").show(),clearTimeout($o.chat.typingTimer),$o.chat.typingTimer=setTimeout(function(){$(".is-typing-layer").hide()},$o.chat.stopTypingInterval))};$o.chat.hideTyping=function(){$(".is-typing-layer").hide()};$o.chat.showTypingDelayFromBot=function(){$(".is-typing-layer").find("p").text("···").css({"font-size":"",padding:""});$(".is-typing-layer").show()};$o.chat.addAlertProduct=function(n){if($o.iframes.currentIframeStatus!==$o.iframes.iframeStatus.SEARCH&&$o.iframes.currentIframeStatus!==$o.iframes.iframeStatus.VIEWER){$o.iframes.currentIframeStatus===$o.iframes.iframeStatus.MINIMIZED&&$o.chat.sendAlert(culture.coviewer.TakeALook+"<br/><b>"+n.Title+"<\/b>");var t=parseInt($o.variablesVisitor.pendingProducts);$o.chat.alertProduct=t?t+1:1;$("#pending-products").text($o.chat.alertProduct).show();$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.pendingProducts,value:$o.chat.alertProduct}])}};$o.chat.playVisitorSound=function(){var t,n;$o.variablesVisitor.soundNotificationEnabled=="True"&&(t=$o.storage.local.get($o.core.localStorageTypes.SOUND)?$o.storage.local.get($o.core.localStorageTypes.SOUND):"true",t=="true"&&(n=$("#visitor-sound")[0].play(),n&&n.catch()))};$o.chat.showRatingsAreaInForm=function(){$(".rating-area-form").show()};$o.chat.closePastedPreview=function(){$("#preview-pasted").hide();$("#pasted-image").css("background","none");$("#send-pasted-image").addClass("icon-common-send");$("#send-pasted-image").removeClass("loading")};$o.chat.dataURItoBlob=function(n){for(var i=atob(n).split(",")[1],r=i.length,u=new Uint8Array(r),t=0;t<r;t++)u[t]=i.charCodeAt(t);return new Blob(u)};$o.chat.toogleDenyVisitorTyping=function(n){$o.core.globalVariables.userType==="V"&&($o.chat.canVisitorType=!n,n===!0?($(".emoji-wysiwyg-editor").html("").hide(0),$(".emoji-picker-icon").hide()):($(".emoji-wysiwyg-editor").show(0).attr("readonly","false"),$(".emoji-picker-icon").show()))}};$o.drag.events=function(){$o.drag.object=$("#point-tool");$o.drag.object.click(function(){$o.tools.change($o.tools.type.POINT)});$o.canva.holder.helper.draggable().on("dragstart",function(i,r){$o.canva.holder.helper.removeClass().addClass("dragging");$o.drag.enablePointing=!1;n=r.position.left;t=r.position.top}).on("dragstop",function(i,r){var u,f;$o.zoom.level==1?$o.canva.holder.helper.animate({top:t,left:n},200):(u=$o.canva.validatePosition(r.position.left,r.position.top),$o.canva.holder.helper.removeClass(),f={Coords:{PosX:u.left,PosY:u.top},SizeImage:{Width:$o.canva.holder.helper.width(),Height:$o.canva.holder.helper.height()},SizeCoviewer:{Width:$("#oct8ne-holder").width(),Height:$("#oct8ne-holder").height()},Room:$o.core.globalVariables.room,SentBy:$o.core.userType,ProductInternalID:$o.core.globalVariables.internalId,ImageUrl:$o.core.globalVariables.urlMedia,Type:"D",ZoomLevel:$o.zoom.level},$o.core.isSignalRConnected()&&$o.hubsOut.sendDrag(f),$o.tools.context==$o.tools.type.POINT&&$o.canva.holder.helper.removeClass().addClass("pointing"),$o.tools.context==$o.tools.type.PIN&&$o.canva.holder.helper.removeClass().addClass("adding-pin"))});$o.drag.UI();var n,t};$o.drag.UI=function(){$o.drag.addPointUI=function(n,t){var i={left:n.Coords.PosX*$o.canva.target.object.width(),top:n.Coords.PosY*$o.canva.target.object.height()+15},u=function(){var r=n.SentBy=="A"?"agent-point":"visitor-point",t;$o.canva.holder.helper.append("<div data-x="+n.Coords.PosX+" data-y="+n.Coords.PosY+' style="left:'+i.left+"px; top:"+i.top+"px \" class='point "+r+"' id='point"+n.MarkId+"'><\/div>");t=$("#point"+n.MarkId);t.css({width:"0",height:"0"}).show().animate({width:"50px",height:"50px",left:"-=25px",top:"-=25px"},{duration:350,queue:!0}).animate({width:"0",height:"0",left:"+=25px",top:"+=25px"},{duration:350,queue:!0}).queue(function(){$(this).dequeue();$(this).remove()})},r;n.SentBy!=$o.core.globalVariables.userType?(r={left:i.left+parseInt($o.canva.holder.helper.position().left),top:i.top+parseInt($o.canva.holder.helper.position().top)},$(".other-cursor").css({opacity:1}).stop().animate({top:r.top,left:r.left},1200,"easeOutExpo",function(){u();var n=$o.tools.randomCursorPosition();$(".other-cursor").delay(1e3).animate({top:n.top,left:n.left},1200,"easeOutQuad")})):u(n,t)}};$o.filters.events=function(){$(".filter-panel-wrapper").on("click",".filter-title",function(){$(this).next().slideToggle();$(this).find("span").toggleClass("plus-sign")});$(".sort-choice").click(function(){$(this).next().toggle(0)});$(".sort-filter li").click(function(){var u;if($("#search-term").val().length){var t=$(this),i=t.children().removeClass("CVTxt3").attr("class"),n=t.attr("id").replace("sort-by-",""),r=t.text().split(" ");$(".sorted-by").text(r[r.length-1].toLowerCase());$(".sorted-dir").text(i);$("#sort-button").removeClass("opened");u=i=="asc"?"desc":"asc";t.children().removeClass().addClass(u+" CVTxt3");$o.search.resetSearch();$o.search.sortedBy=n;$o.search.direction=i;$o.search.doSearch($o.search.searchTerm,$o.filters.appliedFilters,!1,"true");$("#sort-results-panel").hide();$("#sort-results-panel-agent").hide();n=n.substr(0,6);$(".sort-choice a").text("Sorted by "+n.charAt(0).toUpperCase()+n.slice(1))}});$("#sort-button").on("click",function(){$o.search.isSearching||($(this).hasClass("opened")?$(this).removeClass("opened CVBkg5").addClass("CVBkg2"):$(this).removeClass("CVBkg2").addClass("opened CVBkg5"),$("#filter-button").removeClass("opened CVBkg5").addClass("CVBkg2"),$("#sort-results-panel").css("overflow","hidden"),$("#sort-results-panel").slideToggle(300,function(){$("#sort-results-panel").css("overflow","auto")}),$("#filters-panel").hide())});$(".header-content").on("click","#sort-button-agent",function(){$("#sort-results-panel-agent").is(":visible")?$("#sort-results-panel-agent").hide():$("#sort-results-panel-agent").show();$("#filters-panel-agent").hide()})};$o.forms.events=function(){function n(){$("#form-tool-box").hide();$("#chat-tool-box").show();$("#chat-tool").addClass("active");$("#form-tool").removeClass("active")}$("#agent-number").css("opacity","0.5").attr("readonly","readonly");$("input[name='call-invite']").change();$("#call-back-invitation").click(function(){$("#agent-number").css("opacity","0.5").attr("readonly","readonly")});$("#contact-invitation").click(function(){$("#agent-number").css("opacity","1").removeAttr("readonly")});$("#invitation-send").click(function(){if($("#call-back-invitation").is(":checked")&&$o.forms.sendForm($o.forms.type.CALLBACK),$("#contact-invitation").is(":checked"))if($("#agent-number").val()==0)alert(culture.coviewer.NumberBeforeSend);else{var n=$("#agent-number").val();$o.forms.sendForm($o.forms.type.SENDCONTACT,n)}$("#voice-tool-box").hide();$("#chat-tool-box").show();$("#chat-tool").addClass("active");$("#voice-tool").removeClass("active")});$("#skype-invitation").click(function(){var n=$o.core.globalVariables.mySkype,t="skype:"+n+"?call";n?($o.forms.sendForm($o.forms.type.SKYPE,t),$("#voice-tool-box").hide(),$("#chat-tool-box").show(),$("#chat-tool").addClass("active"),$("#voice-tool").removeClass("active")):alert(culture.coviewer.ConfigureSkype)});$("#allow-visitor-ss-only").click(function(){$o.forms.sendForm($o.forms.type.ASKFORSS);$("#voice-tool-box").hide();$("#chat-tool-box").show();$("#chat-tool").addClass("active");$("#voice-tool").removeClass("active")});$("#upload-agent-file-path").change(function(){var n=$("#upload-agent-file-path").val().split(".").pop().toLowerCase(),t;n!=""&&($.inArray(n,["gif","png","jpg","jpeg","bmp","otf","pdf","xlsx","xls","doc","docx"])!=-1?($("#upload-token-agent").val($o.core.globalVariables.myToken),$("#upload-token-room").val($o.core.globalVariables.room),t=parseInt($("#oct8ne-nodes ul").css("width").replace("px","")),$("#oct8ne-nodes ul").css("width",t+125+"px").append("<li id='upload-loading'>"),navigator.appName.indexOf("Internet Explorer")!=-1?$("#upload-agent-form").submit():this.files[0].size/1048576<10?this.files[0].size/1048576!=0?$("#upload-agent-form").submit():alert(culture.coviewer.EmptyUploadFile):alert(culture.coviewer.LargerUploadFile)):alert(culture.coviewer.IncorrectExtensionUpload),$(".upload-message").text(culture.coviewer.ImageUploaded),setTimeout(function(){$(".upload-message").text("")},4e3),setTimeout(function(){$("#upload-tool").removeClass("active");$("#chat-tool").addClass("active");$("#tools-container").children().fadeOut(0);$("#chat-tool-box").fadeIn(0)},1e3))});$("#get-info-doc").click(function(){$o.forms.sendForm($o.forms.type.DOCUMENT,"");n()});$("#get-send-email").click(function(){$o.forms.sendForm($o.forms.type.SENDSESSION,"");n()});$("#get-request-phone").click(function(){$o.forms.sendForm($o.forms.type.CALLBACK);n()});$("#get-stars-valoration").click(function(){$o.forms.sendForm($o.forms.type.STARSVALORATION);n()});$("#get-valoration").click(function(){$o.forms.sendForm($o.forms.type.VALORATION);n()});$(".get-custom-form-js").on("click",function(){var t=$(this).attr("attr-data");$o.forms.sendForm(t);n()});$("#oct8ne-communications").on("click",".download-doc",function(){var n=$(this).attr("data-link");n=n+"&token="+$o.core.globalVariables.myToken+"&room="+$o.core.globalVariables.room+"&who="+$o.core.globalVariables.userType;window.location.href=n});$("#oct8ne-communications").on("click","input",function(){$(this).focus()});$("#oct8ne-communications").on("click","#welcome-just-looking",function(){$o.chat.showJustLookingMessage();$o.saveRecord.justLookingB()});$("#oct8ne-communications").on("click",".sending-phone",function(){var t=$(this).prev().val(),i=$o.settings.privacyPolicy.length?!1:!0,n,r;$o.settings.privacyPolicy.length&&(n=$(this).prev().prev().find("input"),n.is(":checked")?(i=!0,n.parent().removeClass("data-contact-error")):n.parent().addClass("data-contact-error"));t==""?alert(culture.coviewer.EnterPhoneNumber):i&&(r=[t],$o.forms.sendFormResponse($(this).attr("data-form-id"),r))});$("#oct8ne-communications").on("click",".sending-phone-new",function(){var t=$(this).parent().parent().prev().find("input").val(),i=$o.settings.privacyPolicy.length?!1:!0,n,r;$(this).parent().parent().prev().find("input").removeClass("data-contact-error");$o.settings.privacyPolicy.length&&(n=$(this).parent().parent().next().find("input"),n.is(":checked")?(i=!0,n.parent().removeClass("data-contact-error")):n.parent().addClass("data-contact-error"));t==""?$(this).parent().parent().prev().find("input").addClass("data-contact-error"):i&&(r=[t],$o.forms.sendFormResponse($(this).attr("data-form-id"),r))});$("#oct8ne-communications").on("click","#skype-decline",function(){$o.forms.sendFormResponse($(this).attr("data-form-id"),["decline"])});$("#oct8ne-communications").on("click","#skype-accept",function(){$o.forms.sendFormResponse($(this).attr("data-form-id"),["accept"])});$("#oct8ne-communications").on("click","#allow-visitor-ss",function(){var n=$(this).attr("data-form-id");conferenceVM.installExtensionFlow(generateConferenceId(),n)});$(".oct8ne-chat-room").on("click",".install-advice-button",function(){var n=$("#crhome-extension-link a").attr("href");window.open(n);$(".install-advice").hide();$(".refresh-advice").show()});$(".oct8ne-chat-room").on("click",".refresh-advice-button",function(){$o.core.userType=="V"&&parent.postMessage("REFRESHPAGE","*")});$(".oct8ne-chat-room").on("click",".valoration-area span",function(){$(".error-valoration").hide();$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active").siblings().removeClass("active")});$(".oct8ne-chat-room").on("click","#send-valoration",function(){var n;if($(".error-valoration").hide(),n=$(".valoration-area span.active").attr("data-form-id"),n){n=n.split("-")[0];var i=$(this).attr("data-form-id"),t=$(".comment-valoration").val(),r=[n,t];$o.forms.sendFormResponse(i,r);var u=$("#domain-id").val(),f=$o.core.globalVariables.agentId,e=$(this).attr("data-form-room"),o=$o.core.globalVariables.agentName;n=n==="bad"?!1:!0;$o.visitorRatings.saveRateAgent(u,e,f,n,t,o,$o.visitorRatings.TypeRatingGoodBad);$o.visitorRatings.agentRated=!0}else $(".error-valoration").show()});$(".oct8ne-chat-room").on("click","#send-valoration-stars",function(){var i,n,t;for($(".error-valoration").hide(),i=$("#rating-area-stars input"),n="",t=0;t<i.length;t++)i[t].checked&&(n=i[t].value);if(n){var u=$(this).attr("data-form-id"),r=$(".comment-valoration").val(),f=[n,r];$o.forms.sendFormResponse(u,f);var e=$("#domain-id").val(),o=$o.core.globalVariables.agentId,s=$(this).attr("data-form-room"),h=$o.core.globalVariables.agentName;$o.visitorRatings.saveRateAgent(e,s,o,n,r,h,$o.visitorRatings.TypeRatingStars);$o.visitorRatings.agentRated=!0}else $(".error-valoration").show()});$("#oct8ne-communications").on("click",".submit-contact-form",function(){var t=$(this).parent().parent().prev().prev().prev(),u=!1,n=$(this).parent().parent().prev(),e=/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/,o=$o.settings.privacyPolicy.length?!1:!0,i,r,f,s;t.val()!=""&&(u=!0,t.removeClass("data-contact-error"));$o.settings.privacyPolicy.length&&(i=$(this).parent().parent().prev().prev().prev().prev().find("input"),i.is(":checked")?(o=!0,i.parent().removeClass("data-contact-error")):i.parent().addClass("data-contact-error"));e.test(n.val())&&u?o&&(r=[t.val(),n.val()],$o.forms.sendFormResponse($(this).attr("data-form-id"),r),f={Email:r[1],FirstName:r[0],Origin:"Chat form",EnterPage:$o.core.globalVariables.sendEmailBaseUrl||$o.core.globalVariables.baseUrl},s="?domainId="+$o.core.globalVariables.domainId+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&tokenSession="+$o.core.globalVariables.room,$.post("/Visitor/DataVisitor"+s,f),$o.core.isSignalRConnected()&&$o.hubsOut.sendDataVisitorToDashboard($o.core.globalVariables.myToken,f)):(n.addClass("data-contact-error"),u||t.addClass("data-contact-error"),e.test(n.val())&&n.removeClass("data-contact-error"))});$("#oct8ne-communications").on("click",".submit-contact-form-new",function(){var n=$(this).parent().parent().prev().find("input.customers-email"),t=$(this).parent().parent().prev().find("input.customers-name"),u=!1,i,r,f,e;canPass=$o.settings.privacyPolicy.length?!1:!0;regex=/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/;t.val()!=""&&(u=!0,t.removeClass("data-contact-error"));$o.settings.privacyPolicy.length&&(i=$(this).parent().parent().next().find("input"),i.is(":checked")?(canPass=!0,i.parent().removeClass("data-contact-error")):i.parent().addClass("data-contact-error"));regex.test(n.val())&&u?(n.removeClass("data-contact-error"),canPass&&(r=[t.val(),n.val()],$o.forms.sendFormResponse($(this).attr("data-form-id"),r),f={Email:r[1],FirstName:r[0],Origin:"Chat form",EnterPage:$o.core.globalVariables.sendEmailBaseUrl||$o.core.globalVariables.baseUrl},e="?domainId="+$o.core.globalVariables.domainId+"&tokenVisitor="+$o.variablesVisitor.tokenVisitor+"&sessionSummaryId="+$o.variablesVisitor.sessionSummaryId+"&tokenSession="+$o.core.globalVariables.room,$.post("/Visitor/DataVisitor"+e,f),$o.core.isSignalRConnected()&&$o.hubsOut.sendDataVisitorToDashboard($o.core.globalVariables.myToken,f))):(n.addClass("data-contact-error"),u||t.addClass("data-contact-error"),regex.test(n.val())&&n.removeClass("data-contact-error"))});$("#oct8ne-communications").on("click",".submit-send-session",function(){var n=$(this).prev().val(),i=$o.settings.privacyPolicy.length?!1:!0,t,r;$o.settings.privacyPolicy.length&&(t=$(this).prev().prev().find("input"),t.is(":checked")?(i=!0,t.parent().removeClass("data-contact-error")):t.parent().addClass("data-contact-error"));/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(n)?($(this).prev().removeClass("data-contact-error"),n&&i===!0&&($o.visitorSearch.getRecordsMailInfo(n),r=[n],$o.forms.sendFormResponse($(this).attr("data-form-id"),r))):$(this).prev().addClass("data-contact-error")});$("#oct8ne-communications").on("click",".submit-send-session-new",function(){var n=$(this).parent().parent().prev().find("input").val(),i=$o.settings.privacyPolicy.length?!1:!0,t,r;$o.settings.privacyPolicy.length&&(t=$(this).parent().parent().next().find("input"),t.is(":checked")?(i=!0,t.parent().removeClass("data-contact-error")):t.parent().addClass("data-contact-error"));/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(n)?($(this).parent().parent().prev().find("input").removeClass("data-contact-error"),n&&i===!0&&($o.visitorSearch.getRecordsMailInfo(n),r=[n],$o.forms.sendFormResponse($(this).attr("data-form-id"),r))):$(this).parent().parent().prev().find("input").addClass("data-contact-error")});$("#upload-visitor-tool").on("change","#upload-visitor-file-path",function(n){var t,i;n.preventDefault();$("#upload-token-visitor").val($o.core.globalVariables.myToken);$("#upload-token-room").val($o.core.globalVariables.room);t=$("#upload-visitor-file-path").val().split(".").pop().toLowerCase();t!=""&&($.inArray(t,["gif","png","jpg","jpeg","bmp","otf","pdf","xlsx","xls","doc","docx"])!=-1?(i=parseInt($("#oct8ne-nodes ul").css("width").replace("px","")),$("#oct8ne-nodes ul").css("width",i+125+"px").append("<li id='upload-loading'>"),$("#mylist-advice").is(":visible")&&$("#mylist-advice").hide(),navigator.appName.indexOf("Internet Explorer")!=-1?($o.core.userType=="V"&&$("#upload-visitor-tool").removeClass("icon-common-upload-button , icon-common-clip-upload").addClass("loading-image"),$("#upload-visitor-form").submit()):this.files[0].size/1048576<10?this.files[0].size/1048576!=0?($o.core.userType=="V"&&$("#upload-visitor-tool").removeClass("icon-common-upload-button , icon-common-clip-upload").addClass("loading-image"),$("#upload-visitor-form").submit()):alert(culture.coviewer.EmptyUploadFile):alert(culture.coviewer.LargerUploadFile)):alert(culture.coviewer.IncorrectExtensionUpload),$("#upload-tool").removeClass())});$("#oct8ne-communications").on("click",".submit-reconnect-session",function(){$o.visitorSearch.actionWhenClosingIframe()});$("#oct8ne-communications").on("click",".busy-js , .overbooking-js ,.no-agents-js",function(){$("#email-us-form").show();$("#chat-wrapper").hide();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"form");$o.canned.sendCannedResponse($(this).attr("data-form-id"),["responsed"]);$o.forms.closeSession()});$("#oct8ne-communications").on("click",".submit-send-session-recover",function(){var n=$(this).prev().val();/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(n)?(n&&$o.visitorSearch.getRecordsMailInfo(n),$(this).parent().parent().html("<p class='CHTxt4'>"+culture.coviewer.EmailSummary+"<\/p>"),$(this).prev().hide(),$(this).hide()):$(this).prev().addClass("data-contact-error")});$("#oct8ne-communications").on("click","#sending-search-order",function(){var n=$o.forms.orderStatusOptions(),i=$(this).attr("data-form-id"),t;n.OrderId=$("input[data-form-id="+i+"]").val();$o.platform.orders.getDetailsFromVisitor(n);t=[n.OrderId];$o.forms.sendFormResponse($(this).attr("data-form-id"),t)});$o.forms.UI()};$o.forms.UI=function(){$o.forms.removeFormCheckout=function(){$(".from-checkout").parent().parent().remove()};$o.forms.updateScroll=function(n){$("#oct8ne-chat-room").scrollTop(n)}};$o.pin.events=function(){$o.pin.object.click(function(){$o.tools.change($o.tools.type.PIN)});$o.pin.UI()};$o.pin.UI=function(){$o.pin.mousePinUI=function(n,t){var i=$o.carousel.currentImage,r=$o.core.globalVariables.internalId;$(".other-cursor").stop().css({opacity:1,top:"311px",left:"212px"}).addClass("agent-pin").animate({top:t.top+parseInt($o.canva.holder.helper.position().top),left:t.left+parseInt($o.canva.holder.helper.position().left)},1500,"easeOutExpo",function(){var u=$o.tools.randomCursorPosition();i==$o.carousel.currentImage&&r==$o.core.globalVariables.internalId?($o.pin.addPin(n,t),$(".other-cursor").delay(1e3).animate({top:u.top,left:u.left},1e3,"easeOutQuad",function(){$(this).removeClass("agent-pin").css({opacity:.5})})):$(".other-cursor").delay(2e3).css({top:u.top,left:u.left}).removeClass("agent-pin").css({opacity:.5})})};$o.pin.addPinUI=function(n,t){$o.canva.holder.helper.append("<div data-x="+n.Coords.PosX+" data-y="+n.Coords.PosY+" id="+n.Id+' style="left:'+t.left+"px; top:"+t.top+"px \" class='TxtCorp icon-common-pin-icon pin-shape'><\/div>")}};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.scroll={init:function(){function n(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null}function r(){u()||$o.core.agentsConnected}function u(){var t=n();return t?document[t]:!1}var t=n(),i;t&&(i=t.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(i,r));mCustomScrollbar?($("#oct8ne-nodes").mCustomScrollbar({updateOnContentResize:!0,axis:"x",theme:"dark-thin",scrollInertia:200,scrollbarPosition:"inside",autoHideScrollbar:!0,scrollButtons:{enable:!0,scrollAmount:"auto"},mouseWheel:{preventDefault:!0},advanced:{updateOnSelectorChange:"ul li"},alwaysShowScrollbar:2}),$("#results-search").mCustomScrollbar({updateOnContentResize:!0,axis:"y",scrollInertia:200,autoHideScrollbar:!0,scrollbarPosition:"inside",scrollButtons:{enable:!0,scrollAmount:"auto"},theme:"dark-thin",mouseWheel:{preventDefault:!0},callbacks:{onTotalScroll:function(){$o.scroll.enableSearch&&(setTimeout(function(){$o.scroll.enableSearch=!0},500),$o.search.searchMode==$o.search.searchModes.RESULTS?($o.search.itsANewSearch=!1,$o.search.doSearch($o.search.searchTerm,$o.core.userType=="V"?$o.filters.appliedFilters:$o.filters.appliedFilters)):$o.search.itsANewSearch=!1)}},alwaysShowScrollbar:2}),$("#oct8ne-chat-room").mCustomScrollbar({updateOnContentResize:!0,alwaysTriggerOffsets:!1,axis:"y",scrollInertia:300,autoHideScrollbar:!0,scrollbarPosition:"inside",theme:"dark-thin",mouseWheel:{preventDefault:!0},callbacks:{onUpdate:function(){$o.chat.noUpdateScroll||$("#oct8ne-chat-room").mCustomScrollbar("scrollTo","bottom",{callbacks:!1})},onScroll:function(){var n=$("#oct8ne-chat-room .mCSB_container").height();n+this.mcs.top>550?$o.scroll.disableScroll():$o.scroll.enableScroll()}},alwaysShowScrollbar:2})):document.getElementById("server-overload").style.display="block"},disableScroll:function(){$("#go-to-bottom").fadeIn(500);$o.chat.noUpdateScroll=!0},enableScroll:function(){$("#go-to-bottom").fadeOut(300);$("#warning-chat").text("").hide();$o.chat.noUpdateScroll=!1;$o.chat.alertMessageInChat=null},moveScroll:function(n,t){$("#"+n).scrollTop(t)},moveChatToBottom:function(){return},enableSearch:!0}}(window);$o.search.events=function(){$("#search-term").on("keyup",function(n){if(n.keyCode===$.ui.keyCode.ENTER&&$(this).val().length&&!$o.search.isSearching){if($(this).val()==="No previous searches")return;$("#no-results-search,#no-products-related").hide();$(".preload-image,.results .loading,.results .loading-products").remove();var t=$(this).val().replace("&","%26");$o.search.searchTerm=t;$("#filter-button p").text("");$o.search.resetSearch();$o.search.doSearch(t,$o.filters.appliedFilters,!1,"true");$("#results-search").not(":visible")&&$("#results-search").show();$o.core.globalVariables.userType==="A"&&($("#info-catalog").trigger("click"),$(".empty-search-agent").hide())}else n.keyCode!==$.ui.keyCode.ENTER||$o.core.globalVariables.apiVersion!="2.5"||$o.search.isSearching||($("#no-results-search,#no-products-related").hide(),$(".preload-image,.results .loading,.results .loading-products").remove(),$o.search.searchTerm="",$o.search.resetSearch(),$o.search.doSearch($o.search.searchTerm,$o.filters.appliedFilters,!1,"true"),$("#results-search").not(":visible")&&$("#results-search").show(),$o.core.globalVariables.userType==="A"&&($("#info-catalog").trigger("click"),$(".empty-search-agent").hide()))});$("#search-action").on("click",function(){var n,t;if($("#visitor-last-search").hasClass("active")||$("#info-catalog").hasClass("active")||$o.core.userType==="V")if($("#search-term").val().length&&!$o.search.isSearching){if($("#search-term").val()==="No previous searches")return;$("#no-results-search,#no-products-related").hide();$(".preload-image,.results .loading,.results .loading-products").remove();n=$("#search-term").val().replace("&","%26");$o.search.searchTerm=n;$("#filter-button p").text("");$o.search.resetSearch();$o.search.doSearch(n,$o.filters.appliedFilters,!1,"true");$("#results-search").not(":visible")&&$("#results-search").show();$o.core.globalVariables.userType==="A"&&($("#info-catalog").trigger("click"),$(".empty-search-agent").hide())}else $o.core.globalVariables.apiVersion!="2.5"||$o.search.isSearching||($("#no-results-search,#no-products-related").hide(),$(".preload-image,.results .loading,.results .loading-products").remove(),$o.search.searchTerm="",$o.search.resetSearch(),$o.search.doSearch($o.search.searchTerm,$o.filters.appliedFilters,!1,"true"),$("#results-search").not(":visible")&&$("#results-search").show(),$o.core.globalVariables.userType==="A"&&($("#info-catalog").trigger("click"),$(".empty-search-agent").hide()));else t=$("#filter-catalog-id").attr("data-filter-id"),window.agentCatalogVM.getCatalog(t),$o.catalog.totalItems=0});$("#more-info-item").on("click",function(){var n=$(this),t;$o.search.openSeeDescription?n.animate({bottom:"0"},150):(t=$("#item-description").height()+30,n.animate({bottom:t},300));$o.search.openSeeDescription=$o.search.openSeeDescription?!1:!0});$o.search.UI()};$o.search.UI=function(){$o.search.createSearchPriceLayout=function(n){var r=n.normalPrice,u="<div class='normal-price custom-search-product-price CVTxt3'><div style='"+r.line1.inlineStyle+"'>"+r.line1.textTemplate+"<\/div>",i,t;r.line2.textTemplate!==""&&(u+="<div style='"+r.line2.inlineStyle+"'>"+r.line2.textTemplate+"<\/div>");u+="<\/div>";u=u.replace("[0]","<span>[0]<\/span>");$o.carousel.searchPriceLayouts.normal=u;i=n.salePrice;t="<div class='sale-price custom-search-product-price-offer CVTxt3'>";t+="<div style='"+i.line1.inlineStyle+"'>"+i.line1.textTemplate+"<\/div>";i.line2.textTemplate!==""&&(t+="<div style='"+i.line2.inlineStyle+"'>"+i.line2.textTemplate+"<\/div>");t=t.replace("[0]","<span>[0]<\/span>");t=t.replace("[1]","<span>[1]<\/span>");t+="<\/div>";$o.carousel.searchPriceLayouts.sale=t};$o.search.setDefaultSortChoiceUI=function(){$(".sort-choice a").text(culture.coviewer.SortedByRelevance)};$o.search.setSearchLayoutUI=function(){$(".my-list-items").hide();$(".my-search-items").show();$("#acces-to-mylist").text(culture.coviewer.AccessMyList)};$o.search.loadingSearchUI=function(){var n=$o.core.globalVariables.userType==="V"?$(".results-wrapper"):$("#results-search .overview");n.append("<div class='loading custom-search-loading CVTxt4'><p class='custom-search-loading-text'>"+culture.coviewer.LoadingInteractions+"<\/p><\/div>").find(".loading").fadeIn(100)};$o.search.loadingMoreProductsUI=function(){var n=$o.core.globalVariables.userType==="V"?$(".results"):$("#results-search .overview");n.append("<div class='loading-products custom-search-loading-products  CVBkg5 CVTxt4'>"+culture.coviewer.LoadingMoreProducts+"<\/div>").fadeIn(100)};$o.search.removeLoadingProductsUI=function(){$(".loading-products").length&&$("#results-search").mCustomScrollbar("scrollTo","-=50",{scrollInertia:800,scrollEasing:"easeOut"});$(".preload-image,.results-wrapper .loading,.results .loading-products , .overview .loading").remove()};$o.search.setTotalItemsUI=function(n){$(".results>ul").css({height:n*65+"px !important"})};$o.search.clickFirstProductUI=function(){$(".product:first-child").trigger("click")};$o.search.hideNoProducts=function(){$("#no-results-search, #no-products-related").hide()};$o.search.showNoProducts=function(){$("#no-results-search").show();$o.search.searchTerm&&$o.search.searchTerm!="''"?$("#no-results-search span").html('"'+$o.search.searchTerm.replace("%26","&")+'"'):$("#no-results-search span").html('""')};$o.search.showNoProductsInCatalog=function(){$("#no-results-search").show();$("#no-results-search span").html('"'+culture.coviewer.EmptyCatalog+'"')};$o.search.showNoProductsInAgentCatalog=function(){$("#no-results-catalog").show()};$o.search.addNodeToMyListUI=function(){$("#add-to-mylist-tool-visitor").removeClass("icon-common-wishlist-icon custom-coviewer-icon-mylist CVTxt3").addClass("icon-common-like-button-high custom-coviewer-icon-mylist-highlighted TxtCorp");$("#add-to-mylist").delay(500).fadeIn(100).delay(1500).fadeOut(400)};$o.search.addNodeToCartUI=function(){$("#add-to-mycart").delay(500).fadeIn(100).delay(1500).fadeOut(400)};$o.search.updateTyniScrollUI=function(){}};$o.tools.events=function(){$o.tools.object=$("#oct8ne-tools");$("#coviewer-tools-box li").on("click",function(){$(this).attr("id")!="undo-tool"&&$(this).addClass("current-tool").siblings().removeClass()});$("#undo-tool").click(function(){$o.tools.undoPin()});$o.tools.UI()};$o.tools.UI=function(){$o.tools.addClassAddingPin=function(){$o.canva.holder.helper.css({opacity:1}).addClass("adding-pin")};$o.tools.addClassPointing=function(){$o.canva.holder.helper.addClass("pointing");$("#point-tool").addClass("current-tool").siblings().removeClass();$("#coviewer-tools-box li").addClass("current-tool").siblings().removeClass()};$o.tools.addClassAddingNote=function(){$o.canva.holder.helper.css({opacity:1}).addClass("adding-note")}};window.oct8ne=window.$o=window.oct8ne||{},function(){oct8ne.iframes={init:function(){$o.iframes.currentIframeStatus=$("#iframe-status").val();$o.variablesVisitor.statusBeforeMin=$("#status-before-min").val();$o.iframes.currentIframeStatus===$o.iframes.iframeStatus.PINCODE?$("#all-wrapper").hide():$o.visitorStart.showAllWrapperUI();$o.iframes.changeStatusIframe($o.iframes.currentIframeStatus,!0);$(".chat-menu").on("click",function(n){n.stopPropagation();$(".chat-menu-options").toggle();$(".send-summary-feedback").is(":visible")&&($(".chat-menu-options ul").show(0),$(".send-summary-feedback").hide(0))});$(".close-summary-form").on("click",function(){$("#summary-form").hide();$("#email-adress-summary").val()});$(".close-summary-finalized-form").on("click",function(){$("#summary-finalized-form").hide();$("#email-adress-summary").val();$o.saveRecord.closeViewerBySurveyB();$o.visitorSearch.actionWhenClosingIframe()});$("#all-wrapper").on("click",function(){$(".chat-menu-options").is(":visible")&&$(".chat-menu-options").hide()});$(".show-coviewer, .chat-header #pending-products").on("click",function(n){if(n.stopPropagation(),$o.iframes.enableChangeStatus){$o.iframes.enableChangeStatus=!1;var t="";$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.CHAT?(!$o.core.agentsConnected&&$o.platform&&$o.platform.addPlatformLogin(),t=$o.core.globalVariables.showSearch!="True"||$o.core.globalVariables.edition==$o.core.editions.FREE?$o.iframes.iframeStatus.VIEWER:$o.iframes.iframeStatus.SEARCH,$("#pending-products").hide(),$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.deleteCookies,[{cookie:$o.cookies.pendingProducts,value:""}])):t=$o.iframes.iframeStatus.CHAT;$o.iframes.changeStatusIframe(t);setTimeout(function(){$o.iframes.enableChangeStatus=!0},100)}});$(".minimize-chat , #minimize-chat-no-agent, .minimize-chat-header").on("click",function(){$(".chat-menu-options,.summary-form ,.block-modal").hide();$o.iframes.previousIframeStatus=$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.MINIMIZED?$o.iframes.iframeStatus.CHAT:$o.iframes.currentIframeStatus;$o.core.globalVariables.agentsConnected=="True"?$o.iframes.changeStatusIframe($o.iframes.iframeStatus.MINIMIZED):$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CLOSE);$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.statusBeforeMin,value:$o.iframes.previousIframeStatus}])});$("#pincode-wrapper span").on("click",function(){$o.inactivity.stopProcess();parent.postMessage("CLOSEIFRAME","*")})},openCoviewerFromPin:function(n){var t={Agent:n},i="?tokenSession="+$o.core.globalVariables.room;$.post("Visitor/AgentAssignedFromPhonePin"+i,{agentId:n.Id});$("#pincode-wrapper").hide(0);$o.iframes.changeStatusIframe($o.iframes.iframeStatus.SEARCH);$o.visitorStart.showAllWrapperUI();$("#search-wrapper,#chat-wrapper").show(0);$o.visitorSearch.enableSelectResult=!0;$o.visitorSearch.assignedAgentName=n.Name;$o.visitorStart.agentsConnectedChangesUI(t);$o.visitorStart.changeHeaderChatToChatting();$o.visitorSearch.sendJustLookingChatMessage(culture.coviewer.WelcomeMessagePhone)},showToken:function(n){var t=n.slice(28,32);$("#pincode-wrapper").show().find("#pin").text(t).show(0)},changeStatusIframe:function(n,t,i){var u,r;n==$o.iframes.iframeStatus.SEARCH&&($o.core.globalVariables.showSearch!="True"||$o.core.globalVariables.edition==$o.core.editions.FREE)&&(n=$o.iframes.iframeStatus.VIEWER);$o.iframes.currentIframeStatus=n;$o.chat.alerts!==null&&$o.chat.alerts.hasOwnProperty("toggle")&&$o.chat.alerts.toggle(n===$o.iframes.iframeStatus.MINIMIZED);switch(n){case $o.iframes.iframeStatus.CLOSE:u=$o.variablesVisitor.tokenVisitor;$.post("Visitor/CloseSession",{tokenVisitor:u},function(){$o.inactivity.stopProcess();parent.postMessage("CLOSEIFRAME","*")});break;case $o.iframes.iframeStatus.SEARCH:$o.core.globalVariables.enterType==$o.core.enterType.PINCODE&&parent.postMessage("REMOVELAYBORDER","*");$("#all-wrapper").is(":hidden")&&$("#all-wrapper").show(0);$(".show-coviewer").addClass("js-reverse");$o.visitorSearch.enableSelectResult=!0;t||$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.coviewerStatus,value:$o.iframes.iframeStatus.SEARCH}]);$("#search-wrapper, #coviewer-wrapper").delay(10).show(0);break;case $o.iframes.iframeStatus.VIEWER:$o.core.globalVariables.enterType==$o.core.enterType.PINCODE&&parent.postMessage("REMOVELAYBORDER","*");$(".show-coviewer").addClass("js-reverse");$("#search-wrapper").hide();t||$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.coviewerStatus,value:$o.iframes.iframeStatus.VIEWER}]);$("#coviewer-wrapper").delay(10).show(0);break;case $o.iframes.iframeStatus.CHAT:$(".show-coviewer").removeClass("js-reverse");$("#search-wrapper,#coviewer-wrapper").hide();t||$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.coviewerStatus,value:$o.iframes.iframeStatus.CHAT}]);break;case $o.iframes.iframeStatus.MINIMIZED:t&&parent.postMessage("HIDEWRAPPER","*");t||$o.variablesVisitor.sendCookiesToApi($o.variablesVisitor.nameFunction.saveCookies,[{cookie:$o.cookies.coviewerStatus,value:$o.iframes.iframeStatus.MINIMIZED}]);break;case $o.iframes.iframeStatus.PINCODE:$("#all-wrapper").hide(0);$("#pincode-wrapper").show(0);parent.postMessage("COVIEWERLOADED","*")}r={View:n,Room:$o.core.globalVariables.room,SentBy:$o.core.userType,Type:"CV"};r.Room&&$o.core.isSignalRConnected()&&$o.hubsOut.sendViewChange(r);i?$o.saveRecord.pageClick():t||$o.saveRecord.statusViewer(n)},iframeStatus:{CLOSE:"CLOSE",CHAT:"CHAT",VIEWER:"VIEWER",SEARCH:"SEARCH",MINIMIZED:"MINIMIZED",PINCODE:"PINCODE"},currentIframeStatus:"",previousIframeStatus:"",enableChangeStatus:!0}}(window);$o.inactivity.events=function(){$o.inactivity.UI()};$o.inactivity.UI=function(){$o.inactivity.disableChatInputUI=function(){$o.chat.toogleDenyVisitorTyping(!0)};$o.inactivity.messageTypesUI=function(n){n==1?($o.canned.sendCanned($o.canned.type.AGENTSDISCONNECT),$("#chat-input").addClass("chat-input-disabled"),$("#chat-input").attr("readonly",!0).blur(),$(".chat-input-emoji").addClass("chat-input-disabled").attr("contenteditable",!1).blur(),$o.core.agentsConnected=!1,$.connection.hub.stop()):n==2?($.connection.hubInterface.server.sendStatus({tokenVisitor:$o.core.globalVariables.myToken,tokenSession:$o.core.globalVariables.room,status:"Waiting"}),$o.canned.sendCanned($o.canned.type.TRANSFERFROMLOGOUT)):($o.canned.sendCanned($o.canned.type.NOMOREAGENTS),$("#chat-input").addClass("chat-input-disabled"),$("#chat-input").attr("readonly",!0).blur(),$(".chat-input-emoji").addClass("chat-input-disabled").attr("contenteditable",!1).blur(),$o.core.agentsConnected=!1,$.connection.hub.stop())}};$o.visitorRatings.events=function(){$("#send-survey").on("click",function(){$o.visitorRatings.saveRatings()});$("#close-survey").on("click",function(){$o.saveRecord.closeViewerBySurveyB();$o.visitorSearch.actionWhenClosingIframe()});$("#visitor-survey").on("click",".answer-options span",function(){var n=$(this),t=n.index();n.parent().find("span").removeClass("icon-common-like-button-high").addClass("icon-common-wishlist-icon");n.parent().find("rating-value").val(t+1);n.parent().find("span:lt("+(t+1)+")").removeClass("icon-common-wishlist-icon").addClass("icon-common-like-button-high")}).on("click",".answer-bool input[type=radio]",function(){});$("#rating-area span").click(function(n){if(n.stopPropagation(),$(this).hasClass("active"))if($o.visitorRatings.agentRated){$(this).removeClass("active");$o.visitorRatings.agentRated=!1;var t=$("#domain-id").val(),i=$o.core.globalVariables.agentId,r=$o.core.globalVariables.room;$o.visitorRatings.saveRateAgent(t,r,i,"DELETE","","",$o.visitorRatings.TypeRatingGoodBad)}else $(this).removeClass("active"),$("#comment-agent").toggle();else $(this).addClass("active").siblings().removeClass("active"),$("#comment-agent").is(":hidden")&&$("#comment-agent").toggle()});$(document).mouseup(function(n){var i=$(".comment-agent"),t;i.is(n.target)||i.has(n.target).length!==0?(t=$(".rating-stars"),t.is(n.target)||t.has(n.target).length!==0||t.hide()):i.hide()});$("#skip-rating , #save-rating").click(function(n){var i;n.stopPropagation();var r=$("#comment-agent textarea").val(),t=$("#rating-area span.active").attr("id"),u=$("#domain-id").val(),f=$o.core.globalVariables.agentId,e=$o.core.globalVariables.room;t=t=="bad"?!1:!0;i=$o.core.globalVariables.agentName;$o.visitorRatings.saveRateAgent(u,e,f,t,r,i,$o.visitorRatings.TypeRatingGoodBad);$("#comment-agent").toggle();$o.visitorRatings.agentRated=!0;$("#comment-agent textarea").val("")});$("#comment-agent").click(function(n){n.stopPropagation()});$("#rating-area-menu-stars span").click(function(n){if(n.stopPropagation(),$(this).hasClass("active-star"))if($o.visitorRatings.agentRated){$(this).removeClass("active-star");$o.visitorRatings.agentRated=!1;var t=$("#domain-id").val(),i=$o.core.globalVariables.agentId,r=$o.core.globalVariables.room;$o.visitorRatings.saveRateAgent(t,r,i,"DELETE","","",$o.visitorRatings.TypeRatingStars)}else $(this).removeClass("active-star"),$("#rating-stars").toggle();else $(this).addClass("active-star").siblings().removeClass("active-star"),$("#rating-stars").is(":hidden")&&$("#rating-stars").toggle()});$("#skip-rating-stars , #save-rating-stars").click(function(n){n.stopPropagation();for(var u=$("#rating-stars textarea").val(),i=$("#rating-area-stars input"),r="",t=0;t<i.length;t++)i[t].checked&&(r=i[t].value);if(r){var f=$("#domain-id").val(),e=$o.core.globalVariables.agentId,o=$o.core.globalVariables.room,s=$o.core.globalVariables.agentName;$o.visitorRatings.saveRateAgent(f,o,e,r,u,s,$o.visitorRatings.TypeRatingStars);$("#rating-stars").toggle();$o.visitorRatings.agentRated=!0;$("#rating-stars textarea").val("")}});$("#rating-stars").click(function(n){n.stopPropagation()});$("#rating-area-form span").click(function(){$(this).hasClass("active")?$o.visitorRatings.agentRated?($(this).removeClass("active"),$o.visitorRatings.agentRated=!1):$(this).removeClass("active"):$(this).addClass("active").siblings().removeClass("active")});$("#save-rating-form").click(function(){var n=$("#rating-area-form span.active").attr("id");if(n){var t=$("#rating-area-form textarea").val(),i=$("#domain-id").val(),r=$o.core.globalVariables.agentId,u=$o.core.globalVariables.room,f=$o.core.globalVariables.agentName;n=n==="bad"?!1:!0;$o.visitorRatings.saveRateAgent(i,u,r,n,t,f,$o.visitorRatings.TypeRatingGoodBad);$o.visitorRatings.agentRated=!0;$("#rating-area-form textarea").val("");$("#rating-area-form").remove();$("#rating-area-success").show()}});$o.visitorRatings.UI()};$o.visitorRatings.UI=function(){$o.visitorRatings.printRatings=function(n){if(n.length){$("#visitor-survey").show();var t="<ul>";$.each(n,function(i){t+="<li data-questionid='"+n[i].Id+"' data-type="+n[i].Type+">";t+="<p class='question'>"+(i+1)+". "+n[i].Question+"<\/p>";n[i].Type==1?t+="<div class='answer-bool' data-answerid="+n[i].Id+"><input type='radio' class='survey-radio-yes' value='Yes' name='response-"+n[i].Id+"'>"+culture.coviewer.RatingSummaryYes+"<input type='radio' class='survey-radio-no' value='No' name='response-"+n[i].Id+"' >"+culture.coviewer.RatingSummaryNo+"<\/div>":n[i].Type==2?t+="<div class='rating-points answer' data-answerid="+n[i].Id+"><input type='hidden' class='rating-value'><p class='answer-options'><span class='icon-common-wishlist-icon glyph'><\/span><span class='icon-common-wishlist-icon glyph'><\/span><span class='icon-common-wishlist-icon glyph'><\/span><span class='icon-common-wishlist-icon glyph'><\/span><span class='icon-common-wishlist-icon glyph'><\/span><\/div>":n[i].Type==3&&(t+="<div class='answer-text' data-answerid="+n[i].Id+"><textarea data-answerid="+n[i].Id+" placeholder='"+culture.coviewer.RatingSummaryPlaceHolder+"'><\/textarea><\/div>");t+="<\/li>"});$o.settings.showRatingAgent!="True"||$o.visitorRatings.agentRated||(t+="<li  data-agent='true' data-questionid='0' data-type='1'><p class='answer-bool'>"+culture.coviewer.RatingSummaryAgent+"<\/p><div class='answer-bool answer-agents'><input type='radio' class='survey-radio-yes' name='response-agents' value='true'>"+culture.coviewer.RatingSummaryGood+"<input type='radio' class='survey-radio-no' name='response-agents' value='false'>"+culture.coviewer.RatingSummaryBad+"<\/div><\/li>");$("#survey-form").append(t)}else $o.visitorSearch.actionWhenClosingIframe()};$o.visitorRatings.saveRatings=function(){var n=[];$("#survey-form li").each(function(){var t="",i=2,r;$(this).attr("data-type")==1&&(t=$(this).find("input[type=radio]:checked").val());$(this).attr("data-type")==2&&(t=$(this).find("span.icon-common-like-button-high").length);$(this).attr("data-type")==3&&(t=$(this).find("textarea").val());$(this).attr("data-agent")=="true"&&(t=$(this).find("input[type=radio]:checked").val(),i=1);r={RatingQuestionId:$(this).attr("data-questionid"),Response:t,TypeResponse:i};n.push(r)});$.post("/Ratings/SaveResponseSessionRating",{tokenSession:$o.core.globalVariables.room,tokenAgent:$o.core.globalVariables.otherToken,jsonResult:JSON.stringify(n)},function(){$o.visitorSearch.actionWhenClosingIframe()})}};$o.visitorSearch.events=function(){$(".results").on("click","li",function(n){if(!n.isPropagationStopped()){var t=$(this).attr("data-nodeid");$o.visitorSearch.enableSelectResult&&t!==$o.core.globalVariables.internalId&&!$o.search.sendingProductToCanva&&($o.search.sendingProductToCanva=!0,$o.carousel.sendIdToCarousel(t,$o.carousel.lists.VIEWED,$o.carousel.actions.VIEWINCANVA))}}).on("mouseleave",".more-actions-menu",function(){$(this).hide().css({top:3})});$("#search-term").on("mousedown",function(){$(this).is(":focus")||$(this).val()===""||$(this).attr("placeholder",culture.coviewer.SearchAgain).val("").focus()});$("#just-looking-button").click(function(){$("#engage-chat, .question-panel").hide();$("#just-looking-wrapper,.sort-panel").show();$o.visitorSearch.sendJustLookingChatMessage();$("#search-banner").show()});$("#keep-searching").on("click",function(){$(".bridge-no-agents").hide();$(".sort-panel").show();$("#no-agent-header").html(culture.coviewer.MylistTip+"<span>"+culture.coviewer.Email+"<\/span>.")});$("#email-us").on("click",function(){$(".bridge-no-agents").hide();$(".sort-panel , #email-us-form").show();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"form")});$("#close-coviewer").on("click",function(){$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGOPTION,$o.core.localStorageActions.REMOVE);$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CLOSE)});$("#email-us-overbooking").on("click",function(){$(".bridge-overbooking").hide();$(".sort-panel,#email-us-form").show();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"form")});$("#email-us-product").on("focus",function(){if($o.core.globalVariables.internalId){var n=viewedVM.getProduct($o.core.globalVariables.internalId);n.Title.length&&$(this).val(n.Title+" ("+n.InternalId+")")}});$("#send-email-us").on("click",function(){var h;$("#email-us-form-message").hide();var i=!0,e=!0,o=/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/,u=$("#email-us-name"),f=$("#email-us-comments"),r=$("#email-us-email"),c=$("#email-us-zip"),n=$("#email-us-phone"),l=$("#email-us-product"),a=$("#email-us-know-us"),t="data-contact-error",s=$("#checkbox-conditions-contact");u.val().length<=0?(u.addClass(t),i=!1):u.removeClass(t);r.val().length<=0?(r.addClass(t),i=!1,e=!1):/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(r.val().trim())?(r.removeClass(t),n.removeClass(t)):(r.addClass(t),i=!1,e=!1);f.val().length<=0?(f.addClass(t),i=!1):f.removeClass(t);n.length&&n.hasClass("mandatory")&&(n.val().length<=0?(n.addClass(t),i=!1):o.test(n.val().trim())?n.removeClass(t):(n.addClass(t),i=!1));n.length&&n.hasClass("optional-combined")&&!e&&(n.val().length<=0?(n.addClass(t),i=!1):o.test(n.val().trim())?(n.removeClass(t),r.removeClass(t),i=!0):(n.addClass(t),i=!1));s.length&&(s.is(":checked")?$(".form-wrapper .checkbox-conditions-wrapper").removeClass("not-accepted"):(i=!1,$(".form-wrapper .checkbox-conditions-wrapper").addClass("not-accepted")));$o.utils&&$o.utils.customContactFormValidation&&(i=$o.utils.customContactFormValidation(i));i&&($("#email-us-form-loading").show(),$("#send-email-us").hide(),h={name:u.val(),email:r.val(),comments:f.val(),phone:n.val(),zip:c.val(),product:l.val(),knowUs:a.val()},$o.visitorSearch.getViewedProductsForEmail(h),parent.postMessage("SENDANALYTICSEVENT,GAContactFormSent","*"))});$(".coview-switch img").click(function(){var n="";$o.iframes.currentIframeStatus===$o.iframes.iframeStatus.V||$o.iframes.currentIframeStatus===$o.iframes.iframeStatus.CLOSE?($(this).attr("src","/api/img/core/right-arrow.png"),n=$o.iframes.iframeStatus.S):($(this).attr("src","/api/img/core/left-arrow.png"),n=$o.iframes.chatShown?$o.iframes.iframeStatus.CLOSE:$o.iframes.iframeStatus.V);$o.iframes.toggleIframeParts(n)});$(".close-iframe-visitor-js").click(function(){$(".chat-menu-options").hide();$o.core.globalVariables.internalId&&$o.settings.showSendSummary==="True"?($(".chat-menu-options").hide(),$("#summary-finalized-form").show(),$o.saveRecord.closeByMenuB(),$o.saveRecord.showSummary(),$o.iframes.changeStatusIframe($o.iframes.iframeStatus.CHAT)):($o.saveRecord.closeByMenuB(),$o.visitorSearch.actionWhenClosingIframe())});$(".send-summary").on("click",function(){$o.saveRecord.getSummaryB();$(".chat-menu-options").hide();$("#summary-form").show();$o.saveRecord.showSummary()});$(".send-summary-button").on("click",function(){var i=$o.settings.privacyPolicy.length?$(this).prev().prev():$(this).prev(),t=i.val(),n=!1,r;/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(t)?(n=!0,i.removeClass("data-contact-error")):i.addClass("data-contact-error");$o.settings.privacyPolicy.length&&(r=$(this).prev().find(".checkbox-conditions-summary"),r.is(":checked")?(n&&(n=!0),$(this).prev().removeClass("not-accepted")):(n=!1,$(this).prev().addClass("not-accepted")));n&&($o.visitorSearch.getRecordsMailInfo(t),$("#summary-form p , #summary-finalized-form>p ").delay(400).show(0).html(culture.coviewer.SummarySent),$(".email-adress-summary,.send-summary-button,.checkbox-conditions-summary-wrapper").hide(0),$(".close-summary-finalized-form").css("margin","0 57px 0 0"),$o.saveRecord.sendSummary(t),$o.canned.sendCanned($o.canned.type.SENDSESSION,culture.coviewer.SummarySentTo+" "+t))});$(".summary-button").on("click",function(){var r,i,f;r=$o.core.globalVariables.agentsConnected=="True"?$("#send-summary-menu-chat"):$("#send-summary-menu-form");var u=r.find(".summary-input"),t=u.val(),n=!1;/^[a-zA-Z0-9._-]+([+][a-zA-Z0-9._-]+){0,1}[@][a-zA-Z0-9._-]+[.][a-zA-Z]{2,6}$/.test(t)?(n=!0,u.removeClass("data-contact-error")):u.addClass("data-contact-error");$o.settings.privacyPolicy.length&&(i=r.find(".checkbox-conditions-wrapper"),f=i.find("input"),f.is(":checked")?(n&&(n=!0),i.removeClass("not-accepted")):(n=!1,i.addClass("not-accepted")));n&&($o.visitorSearch.getRecordsMailInfo(t),$o.saveRecord.sendSummary(t),$o.canned.sendCanned($o.canned.type.SENDSESSION,culture.coviewer.SummarySentTo+" "+t),$(".chat-menu-options ul").hide(0),$(".send-summary-feedback").show(0))});$(".feedback-ok").on("click",function(){$(".send-summary-feedback , .chat-menu-options").hide(0);$(".chat-menu-options ul").show(0)});$("#sound-option").on("click",function(){var n=$("#sound-option span").attr("class");n==="icon-common-volume-on HTxt1"?($o.storage.local.set($o.core.localStorageTypes.SOUND,"false"),$("#sound-option span").removeClass().addClass("icon-common-volume-off HTxt1")):($o.storage.local.set($o.core.localStorageTypes.SOUND,"true"),$("#sound-option span").removeClass().addClass("icon-common-volume-on HTxt1"))});$("#back-to-oct8ne").on("click",function(){$("#summary-finalized-form").hide()});$(".results-info img").click(function(){$o.iframes.toggleIframeParts($o.iframes.iframeStatus.M);$o.iframes.iframeCentered=!1});$("#acces-to-mylist").click(function(){$o.visitorSearch.switchResultsMyList()});$(".powered-by-oct8ne").on("click",function(){$("#block-modal").show()});$("#close-legend , #oct8ne-version .icon-common-close-button").on("click",function(){$("#block-modal").hide()});$(".close-new-tutorial").on("click",function(){$("#tutorial-coviewer").fadeOut(800);$o.storage.local.set($o.core.localStorageTypes.HIDENEWTUTORIAL,!0)});$(".powered-by-oct8ne-new").on("click",function(){$("#block-modal").show().animate({top:"0px",height:"495px",opacity:"1"});$("#oct8ne-version").delay(500).fadeIn(100)});$("#close-legend-new").on("click",function(){$("#block-modal").animate({top:"395px",height:"1px",opacity:"0"}).hide(0);$("#oct8ne-version").hide()});$o.visitorSearch.UI()};$o.visitorSearch.UI=function(){$o.visitorSearch.otherAgentAfterWaitingUI=function(n){$("#just-looking-wrapper,#engage-chat, .question-panel").hide();$("#yes-chat,.sort-panel").show();$(".agent-avatar-image, .other-cursor img").css({background:"url('"+n.Avatar+"') center center / cover"});$("#yes-chat #welcome-message").html($o.visitorSearch.assignedAgentName+culture.coviewer.AgentBusy+n.Name);$(".name-agent").html($o.visitorSearch.assignedAgentName)};$o.visitorSearch.changeStatusOverbookingToWaitingUI=function(n){$o.visitorStart.avatarAgent=n.Agent.Avatar;$(".agent-avatar-image, .other-cursor  .avatar-agent").css({background:"url('"+n.Agent.Avatar+"') center center / cover"});$(".name-agent").html(n.Agent.Name)};$o.visitorSearch.reciveFormUI=function(){$("#yes-chat, .sort-panel").hide();$("#busy-agent, .bridge-no-agents").show()};$o.visitorSearch.reciveSendToMyListUI=function(){$("#my-list-items").show("pulsate",{times:5},200,function(){mylistVM.setActiveTab()})};$o.visitorSearch.hideSearchBannerUI=function(){$("#search-banner,#results-scrollbar,#speed-search").hide();$("#minimized-viewer-message,#all-wrapper").show()};$o.visitorSearch.sendJustLookingChatMessageUI=function(n,t){$o.visitorSearch.showedJustLookingMessage||n!==null&&($o.visitorSearch.showedJustLookingMessage=!0,t?$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGBUTTON,!0):$o.storage.local.set($o.core.localStorageTypes.JUSTLOOKINGBUTTON,$o.core.localStorageActions.REMOVE),$o.canned.sendCanned($o.canned.type.WELCOME,n))};$o.visitorSearch.sendGdprMessageUI=function(n){$o.visitorSearch.showedGdprMessage||n!==null&&($o.visitorSearch.showedGdprMessage=!0,$o.canned.sendGdpr(n))};$o.visitorSearch.sendVipChatMessageUI=function(n){n!==null&&$o.canned.sendCanned($o.canned.type.VIPMESSAGE,n)};$o.visitorSearch.changeToWaitingStatusUI=function(){};$o.visitorSearch.showSearchTutorial=function(){$("#tutorial-search").show()};$o.visitorSearch.showCoviewerTutorial=function(){var n=$o.storage.local.get($o.core.localStorageTypes.HIDENEWTUTORIAL);window.location.pathname.indexOf("V3")>-1&&n||($("#tutorial-coviewer").show(),$o.core.agentsConnected||$("#instructions-upload").remove())};$o.visitorSearch.hideCoviewerTutorial=function(){$("#tutorial-coviewer,#tutorial-search").remove()};$o.visitorSearch.hideSearchTutorial=function(){$("#tutorial-coviewer,#tutorial-search").remove()}};$o.visitorStart.events=function(){$o.visitorStart.UI()};$o.visitorStart.UI=function(){$o.visitorStart.showChatWrapperUI=function(){$("#chat-wrapper").show();$(".email-us-form").hide();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"chat")};$o.visitorStart.showAllWrapperUI=function(){$("#all-wrapper").show(0);$o.visitorStart.finishLoading();parent.postMessage("COVIEWERLOADED","*")};$o.visitorStart.agentsConnectedChangesUI=function(n){$(".connecting-agent").hide();$("#chat-input").attr("readonly",!1);$o.core.globalVariables.otherName=$o.visitorSearch.assignedAgentName;$o.core.globalVariables.otherToken=n.Agent.Token;$(".name-agent").html($o.visitorSearch.assignedAgentName);$o.visitorStart.avatarAgent=n.Agent.Avatar;$(".agent-avatar-image, .other-cursor  .avatar-agent").css({background:"url('"+n.Agent.Avatar+"') center center / cover"});$o.settings.showRatingAgent&&$o.visitorStart.printRatedAgent(n.Agent.AgentRated,n.Agent.AgentRateType)};$o.visitorStart.agentsDisconnectedChangesUI=function(){$o.visitorSearch.enableSelectResult=!0;$(".sort-panel , #email-us-form").show();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"form")};$o.visitorStart.displayFormCuzNoAgentsConnected=function(){$("#chat-wrapper").hide();$(".email-us-form").show();$o.storage.local.set($o.core.localStorageTypes.LASTDISPLAY,"form");$.connection.hub.state!=$.signalR.connectionState.disconnected&&$.connection.hub.stop()};$o.visitorStart.enterByCheckoutUI=function(){};$o.visitorStart.changeAgentUI=function(n){$o.core.globalVariables.otherToken=n.Visitor.Agent.Token;$o.core.globalVariables.agentId=n.Visitor.Agent.AgentId;$o.core.globalVariables.otherName=n.Visitor.Agent.Name;$o.visitorStart.avatarAgent=n.Visitor.Agent.Avatar;$o.visitorStart.assignedDepartment.Name=n.NewDepartment;$o.core.globalVariables.enabledDepartments=="True"&&$(".after-join-agent .message-agent").text(n.NewDepartment);$(".agent-avatar-image, .other-cursor  .avatar-agent").css({background:"url('"+n.Visitor.Agent.Avatar+"') center center / cover"});$(".name-agent").html(n.Visitor.Agent.Name);$o.visitorStart.printRatedAgent(n.Visitor.Agent.AgentRated);$o.visitorStart.reBindingCallCapabilities(n.Visitor)};$o.visitorStart.printRatedAgent=function(n,t){var i,r,u;t===$o.visitorRatings.TypeRatingGoodBad?n!=null?(i=n?"good":"bad",$("#"+i).addClass("active"),$o.visitorRatings.agentRated=!0):($("#rating-area > span").removeClass("active"),$o.visitorRatings.agentRated=!1):t===$o.visitorRatings.TypeRatingStars&&(n!=null?(r=(n-5)*-1,u=$("#rating-area-stars input"),u[r].checked=!0,$("#rating-area-menu-stars > span").addClass("active-star"),$o.visitorRatings.agentRated=!0):($("#rating-area-menu-stars > span").removeClass("active-star"),$o.visitorRatings.agentRated=!1))};$o.visitorStart.changeHeaderChatToChatting=function(){$o.core.globalVariables.enabledDepartments=="True"&&$o.visitorStart.assignedDepartment.Name!=""&&$(".after-join-agent .message-agent").text($o.visitorStart.assignedDepartment.Name);$(".before-join-agent").hide();$(".after-join-agent").show();$o.core.globalVariables.conferenceProvider&&$o.chat.showRatingsAreaInForm()};$o.visitorStart.changeHeaderChatToAvailable=function(){$(".after-join-agent").hide();$(".before-join-agent").show()};$o.visitorStart.collpaseChatComunications=function(){var n="158px";window.location.pathname.indexOf("V3")>-1&&(n="203px");$(".oct8ne-communications, .chat-scrollbar, .oct8ne-chat-room, .chat-scrollbar.scrollbar").css({height:n,"margin-top":"190px"});$(".oct8ne-communications .real-background").css({height:n});$("#search-wrapper").length&&$("#oct8ne-conference-body , #oct8ne-conference-toolbar , #oct8ne-conference-info").removeClass("bigger")};$o.visitorStart.expandChatComunications=function(){var n="348px";window.location.pathname.indexOf("V3")>-1&&(n="393px");$(".oct8ne-communications, .chat-scrollbar, .oct8ne-chat-room, .chat-scrollbar.scrollbar , .oct8ne-communications .real-background").css({height:n,"margin-top":"0px"});$("#search-wrapper").length&&$("#oct8ne-conference-body , #oct8ne-conference-toolbar , #oct8ne-conference-info").addClass("bigger");$o.iframes.currentIframeStatus==$o.iframes.iframeStatus.CHAT&&$(".chat-header .show-coviewer").trigger("click");$("#tutorial-coviewer").is(":visible")&&$("#tutorial-coviewer").hide()};$o.visitorStart.resetChatComunications=function(){if(!$("#on-hold-lay").is(":visible")){var n="348px";window.location.pathname.indexOf("V3")>-1&&(n="393px");$(".oct8ne-communications, .chat-scrollbar, .oct8ne-chat-room, .chat-scrollbar.scrollbar , .oct8ne-communications .real-background").css({height:n,"margin-top":"0px"})}};$o.visitorStart.showAccessFormWrapperUI=function(n,t){$("#access-form-wrapper").show();n||$("#departments-wrapper").hide();t||$("#info-wrapper").hide();n&&t&&$("#departments-wrapper .title-section").hide()};$o.visitorStart.displaySoundVisitorUI=function(){var n=$o.variablesVisitor.enabledSoundVisitor=="true"?"icon-common-volume-on HTxt1":"icon-common-volume-off HTxt1";$("#sound-option span").removeClass().addClass(n)};$o.visitorStart.videoInitFromEmbed=function(){$(".btn-start-video.init-call").trigger("click")};$o.visitorStart.reBindingCallCapabilities=function(n){if($o.core.globalVariables.conferenceProvider){var t={visitor:{hasAudioDevices:$o.core.globalVariables.visitorHasAudioDevices,hasVideoDevices:$o.core.globalVariables.visitorHasVideoDevices,isWebRtcSupported:$o.core.globalVariables.visitorIsWebRtcSupported},agent:{hasAudioDevices:n.Agent.AgentHasAudioDevices&&(n.Agent.AllowAudioConference||n.Agent.AllowMobileAudioConference)?!0:!1,hasVideoDevices:n.Agent.AgentHasVideoDevices&&(n.Agent.AllowVideoConference||n.Agent.AllowMobileVideoConference)?!0:!1,isWebRtcSupported:n.Agent.AgentIsWebRtcSupported}};window.conferenceVM&&(n.VisitorCanStartConference||window.conferenceVM.hideStartCallButtons(!0),window.conferenceVM.updateSessionInfo(t))}}}