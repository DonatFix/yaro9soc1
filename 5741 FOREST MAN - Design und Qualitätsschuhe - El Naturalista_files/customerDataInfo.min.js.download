define(['ko','jquery','underscore','uiComponent','Magento_Customer/js/customer-data'],function(ko,$,_,Component,customerData){'use strict';return Component.extend({alreadySent:false,initialize:function(){var self=this;this._super();customerData.get('customer').subscribe(function(dataObject){self.trySendUserInfoDataLayer(dataObject);});if(customerData.get('customer')().hasOwnProperty('customerId')){this.trySendUserInfoDataLayer(customerData.get('customer')());}},trySendUserInfoDataLayer:function(dataObject){try{if(!this.alreadySent){this._sendUserInfoDataLayer(dataObject);this.alreadySent=true;}}catch(err){console.log(err);customerData.reload(['customer'],false);}},_sendUserInfoDataLayer:function(dataObject){window.dataLayer=window.dataLayer||[];dataLayer.push({"user":{"user_id":dataObject.customerId?dataObject.customerId:'null',"logged":dataObject.isLoggedIn?'true':'false'}});}});});