define(['jquery','Magento_Ui/js/modal/modal','mage/url','mage/storage','mage/translate'],function($,modal,url,storage,$t){'use strict';$.widget('interactiv4_contentpopupajax.popup',{options:{modalClassClick:'.content_popup_ajax_link',classContent:'.content_popup_ajax',dataCmsId:'cms-id',optionsModal:{type:'popup',responsive:true,innerScroll:true,modalClass:'modal_content_popup_ajax',buttons:[{text:$t('Close'),class:'btn btn-primary',click:function(){this.closeModal();}}]}},_create:function(){this._eventClick();},_eventClick:function(){var self=this,modalClassClick=self.options.modalClassClick;$(document).on('click',modalClassClick,function(event){event.preventDefault();url.setBaseUrl(window.BASE_URL);var serviceUrl=url.build('rest/V1/contentpopupajax/loadpage/'+$(this).data(self.options.dataCmsId));return storage.get(serviceUrl,false).done(function(result){result=result.shift();if(result.content){self._openModal(result.content,result.title);}}).fail(function(){self._openModal($t('Sorry, an error has occurred when retrieving the information. Try again later.'),$t('An error has occurred.'));});});},_openModal:function(content,title){$(this.options.classContent).html(content);var optionsModal=this.options.optionsModal;optionsModal['title']=title;modal(this.options.optionsModal,$(this.options.classContent));$(this.options.classContent).modal('openModal');}});return $.interactiv4_contentpopupajax.popup;});